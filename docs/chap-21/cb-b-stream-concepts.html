<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-chap-21/cb-b-stream-concepts" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">21.1 Stream Concepts | Common Lisp (New) Language Reference</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://lisp-docs.github.io/cl-language-reference/img/1024px-Lisp_logo.svg.png"><meta data-rh="true" name="twitter:image" content="https://lisp-docs.github.io/cl-language-reference/img/1024px-Lisp_logo.svg.png"><meta data-rh="true" property="og:url" content="https://lisp-docs.github.io/cl-language-reference/docs/chap-21/cb-b-stream-concepts"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="21.1 Stream Concepts | Common Lisp (New) Language Reference"><meta data-rh="true" name="description" content="21.1.1 Introduction to Streams"><meta data-rh="true" property="og:description" content="21.1.1 Introduction to Streams"><link data-rh="true" rel="icon" href="/cl-language-reference/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lisp-docs.github.io/cl-language-reference/docs/chap-21/cb-b-stream-concepts"><link data-rh="true" rel="alternate" href="https://lisp-docs.github.io/cl-language-reference/docs/chap-21/cb-b-stream-concepts" hreflang="en"><link data-rh="true" rel="alternate" href="https://lisp-docs.github.io/cl-language-reference/docs/chap-21/cb-b-stream-concepts" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://C1F2Q5VM6X-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/cl-language-reference/blog/rss.xml" title="Common Lisp (New) Language Reference RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cl-language-reference/blog/atom.xml" title="Common Lisp (New) Language Reference Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Common Lisp (New) Language Reference" href="/cl-language-reference/opensearch.xml"><link rel="stylesheet" href="/cl-language-reference/assets/css/styles.3db452cc.css">
<script src="/cl-language-reference/assets/js/runtime~main.026c2a54.js" defer="defer"></script>
<script src="/cl-language-reference/assets/js/main.ea9dc74c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cl-language-reference/"><div class="navbar__logo"><img src="/cl-language-reference/img/logo.svg" alt="LISP Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/cl-language-reference/img/logo.svg" alt="LISP Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">CL Technical Reference </b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cl-language-reference/docs/intro">The CL Reference</a><a class="navbar__item navbar__link" href="/cl-language-reference/contribute">Contribute!</a><a class="navbar__item navbar__link" href="/cl-language-reference/todo">TODO</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/cl-language-reference/blog">Blog</a><a href="https://github.com/lisp-docs/cl-language-reference/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cl-language-reference/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/contents-and-figures">Contents and Figures</a><button aria-label="Expand sidebar category &#x27;Contents and Figures&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/1-introduction">1. Introduction</a><button aria-label="Expand sidebar category &#x27;1. Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/2-syntax">2. Syntax</a><button aria-label="Expand sidebar category &#x27;2. Syntax&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/3-evaluation-and-compilation">3. Evaluation and Compilation</a><button aria-label="Expand sidebar category &#x27;3. Evaluation and Compilation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/4-types-and-classes">4. Types and Classes</a><button aria-label="Expand sidebar category &#x27;4. Types and Classes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/5-data-and-control-flow">5. Data and Control Flow</a><button aria-label="Expand sidebar category &#x27;5. Data and Control Flow&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/6-iteration">6. Iteration</a><button aria-label="Expand sidebar category &#x27;6. Iteration&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/7-objects">7. Objects</a><button aria-label="Expand sidebar category &#x27;7. Objects&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/8-structures">8. Structures</a><button aria-label="Expand sidebar category &#x27;8. Structures&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/9-conditions">9. Conditions</a><button aria-label="Expand sidebar category &#x27;9. Conditions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/10-symbols">10. Symbols</a><button aria-label="Expand sidebar category &#x27;10. Symbols&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/11-packages">11. Packages</a><button aria-label="Expand sidebar category &#x27;11. Packages&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/12-numbers">12. Numbers</a><button aria-label="Expand sidebar category &#x27;12. Numbers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/13-characters">13. Characters</a><button aria-label="Expand sidebar category &#x27;13. Characters&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/14-conses">14. Conses</a><button aria-label="Expand sidebar category &#x27;14. Conses&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/15-arrays">15. Arrays</a><button aria-label="Expand sidebar category &#x27;15. Arrays&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/16-strings">16. Strings</a><button aria-label="Expand sidebar category &#x27;16. Strings&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/17-sequences">17. Sequences</a><button aria-label="Expand sidebar category &#x27;17. Sequences&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/18-hash-tables">18. Hash Tables</a><button aria-label="Expand sidebar category &#x27;18. Hash Tables&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/19-filenames">19. Filenames</a><button aria-label="Expand sidebar category &#x27;19. Filenames&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/20-files">20. Files</a><button aria-label="Expand sidebar category &#x27;20. Files&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/cl-language-reference/docs/category/21-streams">21. Streams</a><button aria-label="Collapse sidebar category &#x27;21. Streams&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cl-language-reference/docs/chap-21/cb-b-stream-concepts">21.1 Stream Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cl-language-reference/docs/chap-21/intro">intro</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/22-printer">22. Printer</a><button aria-label="Expand sidebar category &#x27;22. Printer&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/23-reader">23. Reader</a><button aria-label="Expand sidebar category &#x27;23. Reader&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/24-system-construction">24. System Construction</a><button aria-label="Expand sidebar category &#x27;24. System Construction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/25-environment">25. Environment</a><button aria-label="Expand sidebar category &#x27;25. Environment&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/26-glossary">26. Glossary</a><button aria-label="Expand sidebar category &#x27;26. Glossary&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/a-appendix">A. Appendix</a><button aria-label="Expand sidebar category &#x27;A. Appendix&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cl-language-reference/docs/code-blocks-double-slashes">Code Blocks TODO Fixes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cl-language-reference/docs/code-blocks">code-blocks</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/cl-language-reference/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cl-language-reference/docs/category/21-streams"><span itemprop="name">21. Streams</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">21.1 Stream Concepts</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>21.1 Stream Concepts</h1>
<!-- -->
<!-- -->
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2111-introduction-to-streams">21.1.1 Introduction to Streams<a href="#2111-introduction-to-streams" class="hash-link" aria-label="Direct link to 21.1.1 Introduction to Streams" title="Direct link to 21.1.1 Introduction to Streams">​</a></h2>
<!-- -->
<p>A <em>stream</em> is an <em>object</em> that can be used with an input or output function to identify an appropriate source or sink of <em>characters</em> or <em>bytes</em> for that operation. A <em>character stream</em> is a source or sink of <em>characters</em>. A <em>binary stream</em> is a source or sink of <em>bytes</em>.</p>
<p>Some operations may be performed on any kind of <em>stream</em>; Figure 21–1 provides a list of <em>standardized</em> operations that are potentially useful with any kind of <em>stream</em>.</p>
<table><thead><tr><th style="text-align:left">&lt;p&gt;<strong>close stream-element-type</strong> &lt;/p&gt;&lt;p&gt;<strong>input-stream-p streamp</strong> &lt;/p&gt;&lt;p&gt;<strong>interactive-stream-p with-open-stream</strong> &lt;/p&gt;&lt;p&gt;<strong>output-stream-p</strong>&lt;/p&gt;</th></tr></thead></table>
<p><strong>Figure 21–1. Some General-Purpose Stream Operations</strong></p>
<p>Other operations are only meaningful on certain <em>stream types</em>. For example, <strong>read-char</strong> is only defined for <em>character streams</em> and <strong>read-byte</strong> is only defined for <em>binary streams</em>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21111-abstract-classifications-of-streams">21.1.1.1 Abstract Classifications of Streams<a href="#21111-abstract-classifications-of-streams" class="hash-link" aria-label="Direct link to 21.1.1.1 Abstract Classifications of Streams" title="Direct link to 21.1.1.1 Abstract Classifications of Streams">​</a></h3>
<!-- -->
<!-- -->
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="211111-input">21.1.1.1.1 Input<a href="#211111-input" class="hash-link" aria-label="Direct link to 21.1.1.1.1 Input" title="Direct link to 21.1.1.1.1 Input">​</a></h4>
<!-- -->
<p>A <em>stream</em>, whether a <em>character stream</em> or a <em>binary stream</em>, can be an <em>input stream</em> (source of data), an <em>output stream</em> (sink for data), both, or (<em>e.g.</em>, when “<!-- -->:direction<!-- --> <!-- -->:probe<!-- -->” is given to <strong>open</strong>) neither.</p>
<p>Figure 21–2 shows <em>operators</em> relating to <em>input streams</em>.</p>
<table><thead><tr><th style="text-align:left">&lt;p&gt;<strong>clear-input read-byte read-from-string</strong> &lt;/p&gt;&lt;p&gt;<strong>listen read-char read-line</strong> &lt;/p&gt;&lt;p&gt;<strong>peek-char read-char-no-hang read-preserving-whitespace read read-delimited-list unread-char</strong>&lt;/p&gt;</th></tr></thead></table>
<p><strong>Figure 21–2. Operators relating to Input Streams.</strong></p>
<p>Streams <strong>21–1</strong></p>
<p>Figure 21–3 shows <em>operators</em> relating to <em>output streams</em>.</p>
<table><thead><tr><th style="text-align:left">&lt;p&gt;<strong>clear-output prin1 write</strong> &lt;/p&gt;&lt;p&gt;<strong>finish-output prin1-to-string write-byte</strong> &lt;/p&gt;&lt;p&gt;<strong>force-output princ write-char</strong> &lt;/p&gt;&lt;p&gt;<strong>format princ-to-string write-line</strong> &lt;/p&gt;&lt;p&gt;<strong>fresh-line print write-string</strong> &lt;/p&gt;&lt;p&gt;<strong>pprint terpri write-to-string</strong>&lt;/p&gt;</th></tr></thead></table>
<p><strong>Figure 21–3. Operators relating to Output Streams.</strong></p>
<p>A <em>stream</em> that is both an <em>input stream</em> and an <em>output stream</em> is called a <em>bidirectional stream</em>. See the <em>functions</em> <strong>input-stream-p</strong> and <strong>output-stream-p</strong>.</p>
<p>Any of the <em>operators</em> listed in Figure 21–2 or Figure 21–3 can be used with <em>bidirectional streams</em>. In addition, Figure 21–4 shows a list of <em>operators</em> that relate specificaly to <em>bidirectional streams</em>.</p>
<table><thead><tr><th style="text-align:left"><strong>y-or-n-p yes-or-no-p</strong></th></tr></thead></table>
<p><strong>Figure 21–4. Operators relating to Bidirectional Streams.</strong></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="211112-open-and-closed-streams">21.1.1.1.2 Open and Closed Streams<a href="#211112-open-and-closed-streams" class="hash-link" aria-label="Direct link to 21.1.1.1.2 Open and Closed Streams" title="Direct link to 21.1.1.1.2 Open and Closed Streams">​</a></h4>
<!-- -->
<p><em>Streams</em> are either <em>open</em> or <em>closed</em>.</p>
<p>Except as explicitly specified otherwise, operations that create and return <em>streams</em> return <em>open streams</em>.</p>
<p>The action of <em>closing</em> a <em>stream</em> marks the end of its use as a source or sink of data, permitting the <em>implementation</em> to reclaim its internal data structures, and to free any external resources which might have been locked by the <em>stream</em> when it was opened.</p>
<p>Except as explicitly specified otherwise, the consequences are undefined when a <em>closed stream</em> is used where a <em>stream</em> is called for.</p>
<p>Coercion of <em>streams</em> to <em>pathnames</em> is permissible for <em>closed streams</em>; in some situations, such as for a <em>truename</em> computation, the result might be different for an <em>open stream</em> and for that same <em>stream</em> once it has been <em>closed</em>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="211113-interactive-streams">21.1.1.1.3 Interactive Streams<a href="#211113-interactive-streams" class="hash-link" aria-label="Direct link to 21.1.1.1.3 Interactive Streams" title="Direct link to 21.1.1.1.3 Interactive Streams">​</a></h4>
<!-- -->
<p>An <em>interactive stream</em> is one on which it makes sense to perform interactive querying.</p>
<p>The precise meaning of an <em>interactive stream</em> is <em>implementation-defined</em>, and may depend on the underlying operating system. Some examples of the things that an <em>implementation</em> might choose to use as identifying characteristics of an <em>interactive stream</em> include:</p>
<p><em>•</em> The <em>stream</em> is connected to a person (or equivalent) in such a way that the program can prompt for information and expect to receive different input depending on the prompt.</p>
<p><em>•</em> The program is expected to prompt for input and support “normal input editing”.</p>
<p><em>•</em> <strong>read-char</strong> might wait for the user to type something before returning instead of immediately returning a character or end-of-file.</p>
<p>The general intent of having some <em>streams</em> be classified as <em>interactive streams</em> is to allow them to be distinguished from streams containing batch (or background or command-file) input. Output to batch streams is typically discarded or saved for later viewing, so interactive queries to such streams might not have the expected effect.</p>
<p><em>Terminal I/O</em> might or might not be an <em>interactive stream</em>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21112-abstract-classifications-of-streams">21.1.1.2 Abstract Classifications of Streams<a href="#21112-abstract-classifications-of-streams" class="hash-link" aria-label="Direct link to 21.1.1.2 Abstract Classifications of Streams" title="Direct link to 21.1.1.2 Abstract Classifications of Streams">​</a></h3>
<!-- -->
<!-- -->
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="211121-file-streams">21.1.1.2.1 File Streams<a href="#211121-file-streams" class="hash-link" aria-label="Direct link to 21.1.1.2.1 File Streams" title="Direct link to 21.1.1.2.1 File Streams">​</a></h4>
<!-- -->
<p>Some <em>streams</em>, called <em>file streams</em>, provide access to <em>files</em>. An <em>object</em> of <em>class</em> <strong>file-stream</strong> is used to represent a <em>file stream</em>.</p>
<p>The basic operation for opening a <em>file</em> is <strong>open</strong>, which typically returns a <em>file stream</em> (see its dictionary entry for details). The basic operation for closing a <em>stream</em> is <strong>close</strong>. The macro <strong>with-open-file</strong> is useful to express the common idiom of opening a <em>file</em> for the duration of a given body of <em>code</em>, and assuring that the resulting <em>stream</em> is closed upon exit from that body.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21113-other-subclasses-of-stream">21.1.1.3 Other Subclasses of Stream<a href="#21113-other-subclasses-of-stream" class="hash-link" aria-label="Direct link to 21.1.1.3 Other Subclasses of Stream" title="Direct link to 21.1.1.3 Other Subclasses of Stream">​</a></h3>
<!-- -->
<p>The <em>class</em> <strong>stream</strong> has a number of <em>subclasses</em> defined by this specification. Figure 21–5 shows some information about these subclasses.</p>
<p>Streams <strong>21–3</strong></p>
<table><thead><tr><th style="text-align:left"><strong>Class Related Operators</strong></th></tr></thead><tbody><tr><td style="text-align:left">&lt;p&gt;<strong>broadcast-stream make-broadcast-stream</strong> &lt;/p&gt;&lt;p&gt;<strong>broadcast-stream-streams</strong> &lt;/p&gt;&lt;p&gt;<strong>concatenated-stream make-concatenated-stream</strong> &lt;/p&gt;&lt;p&gt;<strong>concatenated-stream-streams</strong> &lt;/p&gt;&lt;p&gt;<strong>echo-stream make-echo-stream</strong> &lt;/p&gt;&lt;p&gt;<strong>echo-stream-input-stream</strong> &lt;/p&gt;&lt;p&gt;<strong>echo-stream-output-stream</strong> &lt;/p&gt;&lt;p&gt;<strong>string-stream make-string-input-stream</strong> &lt;/p&gt;&lt;p&gt;<strong>with-input-from-string</strong> &lt;/p&gt;&lt;p&gt;<strong>make-string-output-stream</strong> &lt;/p&gt;&lt;p&gt;<strong>with-output-to-string</strong> &lt;/p&gt;&lt;p&gt;<strong>get-output-stream-string</strong> &lt;/p&gt;&lt;p&gt;<strong>synonym-stream make-synonym-stream</strong> &lt;/p&gt;&lt;p&gt;<strong>synonym-stream-symbol</strong> &lt;/p&gt;&lt;p&gt;<strong>two-way-stream make-two-way-stream</strong> &lt;/p&gt;&lt;p&gt;<strong>two-way-stream-input-stream</strong> &lt;/p&gt;&lt;p&gt;<strong>two-way-stream-output-stream</strong>&lt;/p&gt;</td></tr></tbody></table>
<p><strong>Figure 21–5. Defined Names related to Specialized Streams</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2112-stream-variables">21.1.2 Stream Variables<a href="#2112-stream-variables" class="hash-link" aria-label="Direct link to 21.1.2 Stream Variables" title="Direct link to 21.1.2 Stream Variables">​</a></h2>
<!-- -->
<p><em>Variables</em> whose <em>values</em> must be <em>streams</em> are sometimes called <em>stream variables</em>.</p>
<p>Certain <em>stream variables</em> are defined by this specification to be the proper source of input or output in various <em>situations</em> where no specific <em>stream</em> has been specified instead. A complete list of such <em>standardized stream variables</em> appears in Figure 21–6. The consequences are undefined if at any time the <em>value</em> of any of these <em>variables</em> is not an <em>open stream</em>.</p>
<table><thead><tr><th style="text-align:left"><strong>Glossary Term Variable Name</strong></th></tr></thead><tbody><tr><td style="text-align:left">&lt;p&gt;<em>debug I/O</em> <strong>*debug-io*</strong> &lt;/p&gt;&lt;p&gt;<em>error output</em> <strong>*error-output*</strong> &lt;/p&gt;&lt;p&gt;<em>query I/O</em> <strong>*query-io*</strong> &lt;/p&gt;&lt;p&gt;<em>standard input</em> <strong>*standard-input*</strong> &lt;/p&gt;&lt;p&gt;<em>standard output</em> <strong>*standard-output*</strong> &lt;/p&gt;&lt;p&gt;<em>terminal I/O</em> <strong>*terminal-io*</strong> &lt;/p&gt;&lt;p&gt;<em>trace output</em> <strong>*trace-output*</strong>&lt;/p&gt;</td></tr></tbody></table>
<p><strong>Figure 21–6. Standardized Stream Variables</strong></p>
<p>Note that, by convention, <em>standardized stream variables</em> have names ending in “-input*” if they must be <em>input streams</em>, ending in “-output*” if they must be <em>output streams</em>, or ending in “-io*” if they must be <em>bidirectional streams</em>.</p>
<p>User programs may <em>assign</em> or <em>bind</em> any <em>standardized stream variable</em> except <strong>*terminal-io*</strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2113-stream-arguments-to-standardized-functions">21.1.3 Stream Arguments to Standardized Functions<a href="#2113-stream-arguments-to-standardized-functions" class="hash-link" aria-label="Direct link to 21.1.3 Stream Arguments to Standardized Functions" title="Direct link to 21.1.3 Stream Arguments to Standardized Functions">​</a></h2>
<!-- -->
<p>The <em>operators</em> in Figure 21–7 accept <em>stream arguments</em> that might be either <em>open</em> or <em>closed streams</em>.</p>
<table><thead><tr><th style="text-align:left">&lt;p&gt;<strong>broadcast-stream-streams file-author pathnamep</strong> &lt;/p&gt;&lt;p&gt;<strong>close file-namestring probe-file</strong> &lt;/p&gt;&lt;p&gt;<strong>compile-file file-write-date rename-file</strong> &lt;/p&gt;&lt;p&gt;<strong>compile-file-pathname host-namestring streamp</strong> &lt;/p&gt;&lt;p&gt;<strong>concatenated-stream-streams load synonym-stream-symbol delete-file logical-pathname translate-logical-pathname directory merge-pathnames translate-pathname directory-namestring namestring truename</strong> &lt;/p&gt;&lt;p&gt;<strong>dribble open two-way-stream-input-stream echo-stream-input-stream open-stream-p two-way-stream-output-stream echo-stream-ouput-stream parse-namestring wild-pathname-p ed pathname with-open-file</strong> &lt;/p&gt;&lt;p&gt;<strong>enough-namestring pathname-match-p</strong>&lt;/p&gt;</th></tr></thead></table>
<p><strong>Figure 21–7. Operators that accept either Open or Closed Streams</strong></p>
<p>The <em>operators</em> in Figure 21–8 accept <em>stream arguments</em> that must be <em>open streams</em>.</p>
<table><thead><tr><th>&lt;p&gt;<strong>clear-input output-stream-p read-char-no-hang clear-output peek-char read-delimited-list file-length pprint read-line</strong> &lt;/p&gt;&lt;p&gt;<strong>file-position pprint-fill read-preserving-whitespace file-string-length pprint-indent stream-element-type finish-output pprint-linear stream-external-format force-output pprint-logical-block terpri</strong> &lt;/p&gt;&lt;p&gt;<strong>format pprint-newline unread-char fresh-line pprint-tab with-open-stream get-output-stream-string pprint-tabular write</strong> &lt;/p&gt;&lt;p&gt;<strong>input-stream-p prin1 write-byte</strong> &lt;/p&gt;&lt;p&gt;<strong>interactive-stream-p princ write-char</strong> &lt;/p&gt;&lt;p&gt;<strong>listen print write-line</strong> &lt;/p&gt;&lt;p&gt;<strong>make-broadcast-stream print-object write-string make-concatenated-stream print-unreadable-object y-or-n-p</strong> &lt;/p&gt;&lt;p&gt;<strong>make-echo-stream read yes-or-no-p</strong> &lt;/p&gt;&lt;p&gt;<strong>make-synonym-stream read-byte</strong> &lt;/p&gt;&lt;p&gt;<strong>make-two-way-stream read-char</strong>&lt;/p&gt;</th></tr></thead></table>
<p><strong>Figure 21–8. Operators that accept Open Streams only</strong></p>
<p>Streams <strong>21–5</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2114-restrictions-on-composite-streams">21.1.4 Restrictions on Composite Streams<a href="#2114-restrictions-on-composite-streams" class="hash-link" aria-label="Direct link to 21.1.4 Restrictions on Composite Streams" title="Direct link to 21.1.4 Restrictions on Composite Streams">​</a></h2>
<!-- -->
<!-- -->
<p>The consequences are undefined if any <em>component</em> of a <em>composite stream</em> is <em>closed</em> before the <em>composite stream</em> is <em>closed</em>.</p>
<p>The consequences are undefined if the <em>synonym stream symbol</em> is not <em>bound</em> to an <em>open stream</em> from the time of the <em>synonym stream</em>’s creation until the time it is <em>closed</em>.</p>
<p><strong>stream</strong> <em>System Class</em></p>
<p><strong>Class Precedence List:</strong></p>
<p><strong>stream</strong>, <strong>t</strong></p>
<p><strong>Description:</strong></p>
<p>A <em>stream</em> is an <em>object</em> that can be used with an input or output function to identify an appropriate source or sink of <em>characters</em> or <em>bytes</em> for that operation.</p>
<p>For more complete information, see Section 21.1 (Stream Concepts).</p>
<p><strong>See Also:</strong></p>
<p>Section 21.1 (Stream Concepts), Section 22.1.3.13 (Printing Other Objects), Chapter 22 (Printer), Chapter 23 (Reader)</p>
<p><strong>broadcast-stream</strong> <em>System Class</em></p>
<p><strong>Class Precedence List:</strong></p>
<p><strong>broadcast-stream</strong>, <strong>stream</strong>, <strong>t</strong></p>
<p><strong>Description:</strong></p>
<p>A <em>broadcast stream</em> is an <em>output stream</em> which has associated with it a set of zero or more <em>output streams</em> such that any output sent to the <em>broadcast stream</em> gets passed on as output to each of the associated <em>output streams</em>. (If a <em>broadcast stream</em> has no <em>component streams</em>, then all output to the <em>broadcast stream</em> is discarded.)</p>
<p>The set of operations that may be performed on a <em>broadcast stream</em> is the intersection of those for its associated <em>output streams</em>.</p>
<p>Some output operations (<em>e.g.</em>, <strong>fresh-line</strong>) return <em>values</em> based on the state of the <em>stream</em> at the time of the operation. Since these <em>values</em> might differ for each of the <em>component streams</em>, it is necessary to describe their return value specifically:</p>
<p><em>•</em> <strong>stream-element-type</strong> returns the value from the last component stream, or <strong>t</strong> if there are no component streams.</p>
<p><em>•</em> <strong>fresh-line</strong> returns the value from the last component stream, or <strong>nil</strong> if there are no component streams.</p>
<p>Streams <strong>21–7</strong></p>
<p><em>•</em> The functions <strong>file-length</strong>, <strong>file-position</strong>, <strong>file-string-length</strong>, and <strong>stream-external-format</strong> return the value from the last component stream; if there are no component</p>
<p>streams, <strong>file-length</strong> and <strong>file-position</strong> return 0, <strong>file-string-length</strong> returns 1, and <strong>stream-external-format</strong> returns <!-- -->:default<!-- -->.</p>
<p><em>•</em> The functions <strong>streamp</strong> and <strong>output-stream-p</strong> always return <em>true</em> for <em>broadcast streams</em>.</p>
<p><em>•</em> The functions <strong>open-stream-p</strong> tests whether the <em>broadcast stream</em> is <em>open</em>&lt;sub&gt;2&lt;/sub&gt;, not whether its component streams are <em>open</em>.</p>
<p><em>•</em> The functions <strong>input-stream-p</strong> and <em>interactive-stream-p</em> return an <em>implementation-defined</em>, <em>generalized boolean</em> value.</p>
<p><em>•</em> For the input operations <strong>clear-input listen</strong>, <strong>peek-char</strong>, <strong>read-byte</strong>, <strong>read-char-no-hang</strong>, <strong>read-char</strong>, <strong>read-line</strong>, and <strong>unread-char</strong>, the consequences are undefined if the indicated operation is performed. However, an <em>implementation</em> is permitted to define such a behavior as an <em>implementation-dependent</em> extension.</p>
<p>For any output operations not having their return values explicitly specified above or elsewhere in this document, it is defined that the <em>values</em> returned by such an operation are the <em>values</em> resulting from performing the operation on the last of its <em>component streams</em>; the <em>values</em> resulting from performing the operation on all preceding <em>streams</em> are discarded. If there are no <em>component streams</em>, the value is <em>implementation-dependent</em>.</p>
<p><strong>See Also:</strong></p>
<p><strong>broadcast-stream-streams</strong>, <strong>make-broadcast-stream</strong></p>
<p><strong>concatenated-stream</strong> <em>System Class</em></p>
<p><strong>Class Precedence List:</strong></p>
<p><strong>concatenated-stream</strong>, <strong>stream</strong>, <strong>t</strong></p>
<p><strong>Description:</strong></p>
<p>A <em>concatenated stream</em> is an <em>input stream</em> which is a <em>composite stream</em> of zero or more other <em>input streams</em>, such that the sequence of data which can be read from the <em>concatenated stream</em> is the same as the concatenation of the sequences of data which could be read from each of the constituent <em>streams</em>.</p>
<p>Input from a <em>concatenated stream</em> is taken from the first of the associated <em>input streams</em> until it reaches <em>end of file</em>&lt;sub&gt;1&lt;/sub&gt;; then that <em>stream</em> is discarded, and subsequent input is taken from the next <em>input stream</em>, and so on. An <em>end of file</em> on the associated <em>input streams</em> is always managed invisibly by the <em>concatenated stream</em>—the only time a client of a <em>concatenated stream</em> sees an <em>end of file</em> is</p>
<p>when an attempt is made to obtain data from the <em>concatenated stream</em> but it has no remaining <em>input streams</em> from which to obtain such data.</p>
<p><strong>See Also:</strong></p>
<p><strong>concatenated-stream-streams</strong>, <strong>make-concatenated-stream</strong></p>
<p><strong>echo-stream</strong> <em>System Class</em></p>
<p><strong>Class Precedence List:</strong></p>
<p><strong>echo-stream</strong>, <strong>stream</strong>, <strong>t</strong></p>
<p><strong>Description:</strong></p>
<p>An <em>echo stream</em> is a <em>bidirectional stream</em> that gets its input from an associated <em>input stream</em> and sends its output to an associated <em>output stream</em>.</p>
<p>All input taken from the <em>input stream</em> is echoed to the <em>output stream</em>. Whether the input is echoed immediately after it is encountered, or after it has been read from the <em>input stream</em> is <em>implementation-dependent</em>.</p>
<p><strong>See Also:</strong></p>
<p><strong>echo-stream-input-stream</strong>, <strong>echo-stream-output-stream</strong>, <strong>make-echo-stream</strong></p>
<p><strong>file-stream</strong> <em>System Class</em></p>
<p><strong>Class Precedence List:</strong></p>
<p><strong>file-stream</strong>, <strong>stream</strong>, <strong>t</strong></p>
<p><strong>Description:</strong></p>
<p>An <em>object</em> of <em>type</em> <strong>file-stream</strong> is a <em>stream</em> the direct source or sink of which is a <em>file</em>. Such a <em>stream</em> is created explicitly by <strong>open</strong> and <strong>with-open-file</strong>, and implicitly by <em>functions</em> such as <strong>load</strong> that process <em>files</em>.</p>
<p><strong>See Also:</strong></p>
<p><strong>load</strong>, <strong>open</strong>, <strong>with-open-file</strong></p>
<p>Streams <strong>21–9</strong></p>
<p><strong>string-stream</strong> <em>System Class</em></p>
<p><strong>Class Precedence List:</strong></p>
<p><strong>string-stream</strong>, <strong>stream</strong>, <strong>t</strong></p>
<p><strong>Description:</strong></p>
<p>A <em>string stream</em> is a <em>stream</em> which reads input from or writes output to an associated <em>string</em>. The <em>stream element type</em> of a <em>string stream</em> is always a <em>subtype</em> of <em>type</em> <strong>character</strong>.</p>
<p><strong>See Also:</strong></p>
<p><strong>make-string-input-stream</strong>, <strong>make-string-output-stream</strong>, <strong>with-input-from-string</strong>, <strong>with-output-to-string</strong></p>
<p><strong>synonym-stream</strong> <em>System Class</em></p>
<p><strong>Class Precedence List:</strong></p>
<p><strong>synonym-stream</strong>, <strong>stream</strong>, <strong>t</strong></p>
<p><strong>Description:</strong></p>
<p>A <em>stream</em> that is an alias for another <em>stream</em>, which is the <em>value</em> of a <em>dynamic variable</em> whose <em>name</em> is the <em>synonym stream symbol</em> of the <em>synonym stream</em>.</p>
<p>Any operations on a <em>synonym stream</em> will be performed on the <em>stream</em> that is then the <em>value</em> of the <em>dynamic variable</em> named by the <em>synonym stream symbol</em>. If the <em>value</em> of the <em>variable</em> should change, or if the <em>variable</em> should be <em>bound</em>, then the <em>stream</em> will operate on the new <em>value</em> of the <em>variable</em>.</p>
<p><strong>See Also:</strong></p>
<p><strong>make-synonym-stream</strong>, <strong>synonym-stream-symbol</strong></p>
<p><strong>two-way-stream</strong> <em>System Class</em></p>
<p><strong>Class Precedence List:</strong></p>
<p><strong>two-way-stream</strong>, <strong>stream</strong>, <strong>t</strong></p>
<p><strong>Description:</strong></p>
<p>A <em>bidirectional composite stream</em> that receives its input from an associated <em>input stream</em> and sends its output to an associated <em>output stream</em>.</p>
<p><strong>See Also:</strong></p>
<p><strong>make-two-way-stream</strong>, <strong>two-way-stream-input-stream</strong>, <strong>two-way-stream-output-stream input-stream-p, output-stream-p</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>input-stream-p</strong> <em>stream → generalized-boolean</em></p>
<p><strong>output-stream-p</strong> <em>stream → generalized-boolean</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>stream</em>—a <em>stream</em>.</p>
<p><em>generalized-boolean</em>—a <em>generalized boolean</em>.</p>
<p><strong>Description:</strong></p>
<p><strong>input-stream-p</strong> returns <em>true</em> if <em>stream</em> is an <em>input stream</em>; otherwise, returns <em>false</em>. <strong>output-stream-p</strong> returns <em>true</em> if <em>stream</em> is an <em>output stream</em>; otherwise, returns <em>false</em>. <strong>Examples:</strong></p>
<p>(input-stream-p *standard-input*) <em>→ true</em></p>
<p>(input-stream-p *terminal-io*) <em>→ true</em></p>
<p>(input-stream-p (make-string-output-stream)) <em>→ false</em></p>
<p>(output-stream-p *standard-output*) <em>→ true</em></p>
<p>(output-stream-p *terminal-io*) <em>→ true</em></p>
<p>(output-stream-p (make-string-input-stream &quot;jr&quot;)) <em>→ false</em></p>
<p><strong>Exceptional Situations:</strong></p>
<p>Should signal an error of <em>type</em> <strong>type-error</strong> if <em>stream</em> is not a <em>stream</em>.</p>
<p>Streams <strong>21–11</strong></p>
<p><strong>interactive-stream-p</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>interactive-stream-p</strong> <em>stream → generalized-boolean</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>stream</em>—a <em>stream</em>.</p>
<p><em>generalized-boolean</em>—a <em>generalized boolean</em>.</p>
<p><strong>Description:</strong></p>
<p>Returns <em>true</em> if <em>stream</em> is an <em>interactive stream</em>; otherwise, returns <em>false</em>.</p>
<p><strong>Examples:</strong></p>
<p>(when (&gt; measured limit)</p>
<p>(let ((error (round (* (- measured limit) 100)</p>
<p>limit)))</p>
<p>(unless (if (interactive-stream-p *query-io*)</p>
<p>(yes-or-no-p &quot;The frammis is out of tolerance by <del>D%.</del>@</p>
<p>Is it safe to proceed? &quot; error)</p>
<p>(&lt; error 15)) ;15% is acceptable</p>
<p>(error &quot;The frammis is out of tolerance by ~D%.&quot; error))))</p>
<p><strong>Exceptional Situations:</strong></p>
<p>Should signal an error of <em>type</em> <strong>type-error</strong> if <em>stream</em> is not a <em>stream</em>.</p>
<p><strong>See Also:</strong></p>
<p>Section 21.1 (Stream Concepts)</p>
<p><strong>open-stream-p</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>open-stream-p</strong> <em>stream → generalized-boolean</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>stream</em>—a <em>stream</em>.</p>
<p><em>generalized-boolean</em>—a <em>generalized boolean</em>.</p>
<p><strong>Description:</strong></p>
<p>Returns <em>true</em> if <em>stream</em> is an <em>open stream</em>; otherwise, returns <em>false</em>.</p>
<p><em>Streams</em> are open until they have been explicitly closed with <strong>close</strong>, or until they are implicitly closed due to exit from a <strong>with-output-to-string</strong>, <strong>with-open-file</strong>, <strong>with-input-from-string</strong>, or <strong>with-open-stream</strong> <em>form</em>.</p>
<p><strong>Examples:</strong></p>
<p>(open-stream-p *standard-input*) <em>→ true</em></p>
<p><strong>Affected By:</strong></p>
<p><strong>close</strong>.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>Should signal an error of <em>type</em> <strong>type-error</strong> if <em>stream</em> is not a <em>stream</em>.</p>
<p><strong>stream-element-type</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>stream-element-type</strong> <em>stream → typespec</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>stream</em>—a <em>stream</em>.</p>
<p><em>typespec</em>—a <em>type specifier</em> .</p>
<p><strong>Description:</strong></p>
<p><strong>stream-element-type</strong> returns a <em>type specifier</em> that indicates the <em>types</em> of <em>objects</em> that may be read from or written to <em>stream</em>.</p>
<p><em>Streams</em> created by <strong>open</strong> have an <em>element type</em> restricted to <strong>integer</strong> or a <em>subtype</em> of <em>type</em> <strong>character</strong>. <strong>Examples:</strong></p>
<p>;; Note that the stream must accomodate at least the specified type,</p>
<p>;; but might accomodate other types. Further note that even if it does</p>
<p>;; accomodate exactly the specified type, the type might be specified in</p>
<p>;; any of several ways.</p>
<p>(with-open-file (s &quot;test&quot; <!-- -->:element-type<!-- --> ’(integer 0 1)</p>
<p>:if-exists<!-- --> <!-- -->:error</p>
<p>:direction<!-- --> <!-- -->:output<!-- -->)</p>
<p>Streams <strong>21–13</strong></p>
<p>(stream-element-type s))</p>
<p><em>→</em> INTEGER</p>
<p>&lt;i&gt;&lt;sup&gt;or&lt;/sup&gt;→&lt;/i&gt; (UNSIGNED-BYTE 16)</p>
<p>&lt;i&gt;&lt;sup&gt;or&lt;/sup&gt;→&lt;/i&gt; (UNSIGNED-BYTE 8)</p>
<p>&lt;i&gt;&lt;sup&gt;or&lt;/sup&gt;→&lt;/i&gt; BIT</p>
<p>&lt;i&gt;&lt;sup&gt;or&lt;/sup&gt;→&lt;/i&gt; (UNSIGNED-BYTE 1)</p>
<p>&lt;i&gt;&lt;sup&gt;or&lt;/sup&gt;→&lt;/i&gt; (INTEGER 0 1)</p>
<p>&lt;i&gt;&lt;sup&gt;or&lt;/sup&gt;→&lt;/i&gt; (INTEGER 0 (2))</p>
<p><strong>Exceptional Situations:</strong></p>
<p>Should signal an error of <em>type</em> <strong>type-error</strong> if <em>stream</em> is not a <em>stream</em>.</p>
<p><strong>streamp</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>streamp</strong> <em>object → generalized-boolean</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>object</em>—an <em>object</em>.</p>
<p><em>generalized-boolean</em>—a <em>generalized boolean</em>.</p>
<p><strong>Description:</strong></p>
<p>Returns <em>true</em> if <em>object</em> is of <em>type</em> <strong>stream</strong>; otherwise, returns <em>false</em>.</p>
<p><strong>streamp</strong> is unaffected by whether <em>object</em>, if it is a <em>stream</em>, is <em>open</em> or closed.</p>
<p><strong>Examples:</strong></p>
<p>(streamp *terminal-io*) <em>→ true</em></p>
<p>(streamp 1) <em>→ false</em></p>
<p><strong>Notes:</strong></p>
<p>(streamp <em>object</em>) <em>≡</em> (typep <em>object</em> ’stream)</p>
<p><strong>read-byte</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>read-byte</strong> <em>stream</em> &amp;optional <em>eof-error-p eof-value → byte</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>stream</em>—a <em>binary input stream</em>.</p>
<p><em>eof-error-p</em>—a <em>generalized boolean</em>. The default is <em>true</em>.</p>
<p><em>eof-value</em>—an <em>object</em>. The default is <strong>nil</strong>.</p>
<p><em>byte</em>—an <em>integer</em> , or the <em>eof-value</em>.</p>
<p><strong>Description:</strong></p>
<p><strong>read-byte</strong> reads and returns one byte from <em>stream</em>.</p>
<p>If an <em>end of file</em>&lt;sub&gt;2&lt;/sub&gt; occurs and <em>eof-error-p</em> is <em>false</em>, the <em>eof-value</em> is returned.</p>
<p><strong>Examples:</strong></p>
<p>(with-open-file (s &quot;temp-bytes&quot;</p>
<p>:direction<!-- --> <!-- -->:output</p>
<p>:element-type<!-- --> ’unsigned-byte)</p>
<p>(write-byte 101 s)) <em>→</em> 101</p>
<p>(with-open-file (s &quot;temp-bytes&quot; <!-- -->:element-type<!-- --> ’unsigned-byte)</p>
<p>(format t &quot;~S ~S&quot; (read-byte s) (read-byte s nil ’eof)))</p>
<p>▷ 101 EOF</p>
<p><em>→</em> NIL</p>
<p><strong>Side Effects:</strong></p>
<p>Modifies <em>stream</em>.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>Should signal an error of <em>type</em> <strong>type-error</strong> if <em>stream</em> is not a <em>stream</em>.</p>
<p>Should signal an error of <em>type</em> <strong>error</strong> if <em>stream</em> is not a <em>binary input stream</em>.</p>
<p>If there are no <em>bytes</em> remaining in the <em>stream</em> and <em>eof-error-p</em> is <em>true</em>, an error of <em>type</em> <strong>end-of-file</strong> is signaled.</p>
<p><strong>See Also:</strong></p>
<p><strong>read-char</strong>, <strong>read-sequence</strong>, <strong>write-byte</strong></p>
<p>Streams <strong>21–15</strong></p>
<p><strong>write-byte</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>write-byte</strong> <em>byte stream → byte</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>byte</em>—an <em>integer</em> of the <em>stream element type</em> of <em>stream</em>.</p>
<p><em>stream</em>—a <em>binary output stream</em>.</p>
<p><strong>Description:</strong></p>
<p><strong>write-byte</strong> writes one byte, <em>byte</em>, to <em>stream</em>.</p>
<p><strong>Examples:</strong></p>
<p>(with-open-file (s &quot;temp-bytes&quot;</p>
<p>:direction<!-- --> <!-- -->:output</p>
<p>:element-type<!-- --> ’unsigned-byte)</p>
<p>(write-byte 101 s)) <em>→</em> 101</p>
<p><strong>Side Effects:</strong></p>
<p><em>stream</em> is modified.</p>
<p><strong>Affected By:</strong></p>
<p>The <em>element type</em> of the <em>stream</em>.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>Should signal an error of <em>type</em> <strong>type-error</strong> if <em>stream</em> is not a <em>stream</em>. Should signal an error of <em>type</em> <strong>error</strong> if <em>stream</em> is not a <em>binary output stream</em>.</p>
<p>Might signal an error of <em>type</em> <strong>type-error</strong> if <em>byte</em> is not an <em>integer</em> of the <em>stream element type</em> of <em>stream</em>.</p>
<p><strong>See Also:</strong></p>
<p><strong>read-byte</strong>, <strong>write-char</strong>, <strong>write-sequence</strong></p>
<p><strong>peek-char</strong></p>
<p><strong>peek-char</strong> <em>Function</em> <strong>Syntax:</strong></p>
<p><strong>peek-char</strong> &amp;optional <em>peek-type input-stream eof-error-p eof-value recursive-p</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>peek-type</em>—a <em>character</em> or <strong>t</strong> or <strong>nil</strong>.</p>
<p><em>→ char</em></p>
<p><em>input-stream</em>—<em>input stream designator</em> . The default is <em>standard input</em>.</p>
<p><em>eof-error-p</em>—a <em>generalized boolean</em>. The default is <em>true</em>.</p>
<p><em>eof-value</em>—an <em>object</em>. The default is <strong>nil</strong>.</p>
<p><em>recursive-p</em>—a <em>generalized boolean</em>. The default is <em>false</em>.</p>
<p><em>char</em>—a <em>character</em> or the <em>eof-value</em>.</p>
<p><strong>Description:</strong></p>
<p><strong>peek-char</strong> obtains the next character in <em>input-stream</em> without actually reading it, thus leaving the character to be read at a later time. It can also be used to skip over and discard intervening characters in the <em>input-stream</em> until a particular character is found.</p>
<p>If <em>peek-type</em> is not supplied or <strong>nil</strong>, <strong>peek-char</strong> returns the next character to be read from <em>input-stream</em>, without actually removing it from <em>input-stream</em>. The next time input is done from <em>input-stream</em>, the character will still be there. If <em>peek-type</em> is <strong>t</strong>, then <strong>peek-char</strong> skips over <em>whitespace</em>&lt;sub&gt;2&lt;/sub&gt; <em>characters</em>, but not comments, and then performs the peeking operation on the next character. The last character examined, the one that starts an <em>object</em>, is not removed from <em>input-stream</em>. If <em>peek-type</em> is a <em>character</em> , then <strong>peek-char</strong> skips over input characters until a character that is <strong>char=</strong> to that <em>character</em> is found; that character is left in <em>input-stream</em>.</p>
<p>If an <em>end of file</em>&lt;sub&gt;2&lt;/sub&gt; occurs and <em>eof-error-p</em> is <em>false</em>, <em>eof-value</em> is returned.</p>
<p>If <em>recursive-p</em> is <em>true</em>, this call is expected to be embedded in a higher-level call to <strong>read</strong> or a similar <em>function</em> used by the <em>Lisp reader</em> .</p>
<p>When <em>input-stream</em> is an <em>echo stream</em>, characters that are only peeked at are not echoed. In the case that <em>peek-type</em> is not <strong>nil</strong>, the characters that are passed by <strong>peek-char</strong> are treated as if by <strong>read-char</strong>, and so are echoed unless they have been marked otherwise by <strong>unread-char</strong>.</p>
<p><strong>Examples:</strong></p>
<p>(with-input-from-string (input-stream &quot; 1 2 3 4 5&quot;)</p>
<p>(format t &quot;~S ~S ~S&quot;</p>
<p>(peek-char t input-stream)</p>
<p>Streams <strong>21–17</strong></p>
<p>(peek-char #\4 input-stream)</p>
<p>(peek-char nil input-stream)))</p>
<p>▷ #\1 #\4 #\4</p>
<p><em>→</em> NIL</p>
<p><strong>Affected By:</strong></p>
<p><strong>*readtable*</strong>, <strong>*standard-input*</strong>, <strong>*terminal-io*</strong>.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>If <em>eof-error-p</em> is <em>true</em> and an <em>end of file</em>&lt;sub&gt;2&lt;/sub&gt; occurs an error of <em>type</em> <strong>end-of-file</strong> is signaled.</p>
<p>If <em>peek-type</em> is a <em>character</em> , an <em>end of file</em>&lt;sub&gt;2&lt;/sub&gt; occurs, and <em>eof-error-p</em> is <em>true</em>, an error of <em>type</em> <strong>end-of-file</strong> is signaled.</p>
<p>If <em>recursive-p</em> is <em>true</em> and an <em>end of file</em>&lt;sub&gt;2&lt;/sub&gt; occurs, an error of <em>type</em> <strong>end-of-file</strong> is signaled. <strong>read-char</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>read-char</strong> &amp;optional <em>input-stream eof-error-p eof-value recursive-p → char</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>input-stream</em>—an <em>input stream designator</em> . The default is <em>standard input</em>.</p>
<p><em>eof-error-p</em>—a <em>generalized boolean</em>. The default is <em>true</em>.</p>
<p><em>eof-value</em>—an <em>object</em>. The default is <strong>nil</strong>.</p>
<p><em>recursive-p</em>—a <em>generalized boolean</em>. The default is <em>false</em>.</p>
<p><em>char</em>—a <em>character</em> or the <em>eof-value</em>.</p>
<p><strong>Description:</strong></p>
<p><strong>read-char</strong> returns the next <em>character</em> from <em>input-stream</em>.</p>
<p>When <em>input-stream</em> is an <em>echo stream</em>, the character is echoed on <em>input-stream</em> the first time the character is seen. Characters that are not echoed by <strong>read-char</strong> are those that were put there by <strong>unread-char</strong> and hence are assumed to have been echoed already by a previous call to <strong>read-char</strong>.</p>
<p>If <em>recursive-p</em> is <em>true</em>, this call is expected to be embedded in a higher-level call to <strong>read</strong> or a similar <em>function</em> used by the <em>Lisp reader</em> .</p>
<p>If an <em>end of file</em>&lt;sub&gt;2&lt;/sub&gt; occurs and <em>eof-error-p</em> is <em>false</em>, <em>eof-value</em> is returned.</p>
<p><strong>Examples:</strong></p>
<p>(with-input-from-string (is &quot;0123&quot;)</p>
<p>(do ((c (read-char is) (read-char is nil ’the-end)))</p>
<p>((not (characterp c)))</p>
<p>(format t &quot;~S &quot; c)))</p>
<p>▷ #\0 #\1 #\2 #\3</p>
<p><em>→</em> NIL</p>
<p><strong>Affected By:</strong></p>
<p><strong>*standard-input*</strong>, <strong>*terminal-io*</strong>.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>If an <em>end of file</em>&lt;sub&gt;2&lt;/sub&gt; occurs before a character can be read, and <em>eof-error-p</em> is <em>true</em>, an error of <em>type</em> <strong>end-of-file</strong> is signaled.</p>
<p><strong>See Also:</strong></p>
<p><strong>read-byte</strong>, <strong>read-sequence</strong>, <strong>write-char</strong>, <strong>read</strong></p>
<p><strong>Notes:</strong></p>
<p>The corresponding output function is <strong>write-char</strong>.</p>
<p><strong>read-char-no-hang</strong> <em>Function</em> <strong>Syntax:</strong></p>
<p><strong>read-char-no-hang</strong> &amp;optional <em>input-stream eof-error-p eof-value recursive-p</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>→ char</em></p>
<p><em>input-stream</em> – an <em>input stream designator</em> . The default is <em>standard input</em>.</p>
<p><em>eof-error-p</em>—a <em>generalized boolean</em>. The default is <em>true</em>.</p>
<p><em>eof-value</em>—an <em>object</em>. The default is <strong>nil</strong>.</p>
<p><em>recursive-p</em>—a <em>generalized boolean</em>. The default is <em>false</em>.</p>
<p><em>char</em>—a <em>character</em> or <strong>nil</strong> or the <em>eof-value</em>.</p>
<p><strong>Description:</strong></p>
<p><strong>read-char-no-hang</strong> returns a character from <em>input-stream</em> if such a character is available. If no character is available, <strong>read-char-no-hang</strong> returns <strong>nil</strong>.</p>
<p>Streams <strong>21–19</strong></p>
<p>If <em>recursive-p</em> is <em>true</em>, this call is expected to be embedded in a higher-level call to <strong>read</strong> or a similar <em>function</em> used by the <em>Lisp reader</em> .</p>
<p>If an <em>end of file</em>&lt;sub&gt;2&lt;/sub&gt; occurs and <em>eof-error-p</em> is <em>false</em>, <em>eof-value</em> is returned.</p>
<p><strong>Examples:</strong></p>
<p>;; This code assumes an implementation in which a newline is not</p>
<p>;; required to terminate input from the console.</p>
<p>(defun test-it ()</p>
<p>(unread-char (read-char))</p>
<p>(list (read-char-no-hang)</p>
<p>(read-char-no-hang)</p>
<p>(read-char-no-hang)))</p>
<p><em>→</em> TEST-IT</p>
<p>;; Implementation A, where a Newline is not required to terminate</p>
<p>;; interactive input on the console.</p>
<p>(test-it)</p>
<p>▷ a</p>
<p><em>→</em> (#\a NIL NIL)</p>
<p>;; Implementation B, where a Newline is required to terminate</p>
<p>;; interactive input on the console, and where that Newline remains</p>
<p>;; on the input stream.</p>
<p>(test-it)</p>
<p>▷ a<em>←-</em></p>
<p><em>→</em> (#\a #\Newline NIL)</p>
<p><strong>Affected By:</strong></p>
<p><strong>*standard-input*</strong>, <strong>*terminal-io*</strong>.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>If an <em>end of file</em>&lt;sub&gt;2&lt;/sub&gt; occurs when <em>eof-error-p</em> is <em>true</em>, an error of <em>type</em> <strong>end-of-file</strong> is signaled . <strong>See Also:</strong></p>
<p><strong>listen</strong></p>
<p><strong>Notes:</strong></p>
<p><strong>read-char-no-hang</strong> is exactly like <strong>read-char</strong>, except that if it would be necessary to wait in order to get a character (as from a keyboard), <strong>nil</strong> is immediately returned without waiting.</p>
<p><strong>terpri, fresh-line</strong></p>
<p><strong>terpri, fresh-line</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>terpri</strong> &amp;optional <em>output-stream →</em> <strong>nil</strong></p>
<p><strong>fresh-line</strong> &amp;optional <em>output-stream → generalized-boolean</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>output-stream</em> – an <em>output stream designator</em> . The default is <em>standard output</em>.</p>
<p><em>generalized-boolean</em>—a <em>generalized boolean</em>.</p>
<p><strong>Description:</strong></p>
<p><strong>terpri</strong> outputs a <em>newline</em> to <em>output-stream</em>.</p>
<p><strong>fresh-line</strong> is similar to <strong>terpri</strong> but outputs a <em>newline</em> only if the <em>output-stream</em> is not already at the start of a line. If for some reason this cannot be determined, then a <em>newline</em> is output anyway. <strong>fresh-line</strong> returns <em>true</em> if it outputs a <em>newline</em>; otherwise it returns <em>false</em>.</p>
<p><strong>Examples:</strong></p>
<p>(with-output-to-string (s)</p>
<p>(write-string &quot;some text&quot; s)</p>
<p>(terpri s)</p>
<p>(terpri s)</p>
<p>(write-string &quot;more text&quot; s))</p>
<p><em>→</em> &quot;some text</p>
<p>more text&quot;</p>
<p>(with-output-to-string (s)</p>
<p>(write-string &quot;some text&quot; s)</p>
<p>(fresh-line s)</p>
<p>(fresh-line s)</p>
<p>(write-string &quot;more text&quot; s))</p>
<p><em>→</em> &quot;some text</p>
<p>more text&quot;</p>
<p><strong>Side Effects:</strong></p>
<p>The <em>output-stream</em> is modified.</p>
<p><strong>Affected By:</strong></p>
<p><strong>*standard-output*</strong>, <strong>*terminal-io*</strong>.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>None.</p>
<p>Streams <strong>21–21</strong></p>
<p><strong>Notes:</strong></p>
<p><strong>terpri</strong> is identical in effect to</p>
<p>(write-char #\Newline output-stream)</p>
<p><strong>unread-char</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>unread-char</strong> <em>character</em> &amp;optional <em>input-stream →</em> <strong>nil</strong></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>character</em>—a <em>character</em> ; must be the last <em>character</em> that was read from <em>input-stream</em>. <em>input-stream</em>—an <em>input stream designator</em> . The default is <em>standard input</em>.</p>
<p><strong>Description:</strong></p>
<p><strong>unread-char</strong> places <em>character</em> back onto the front of <em>input-stream</em> so that it will again be the next character in <em>input-stream</em>.</p>
<p>When <em>input-stream</em> is an <em>echo stream</em>, no attempt is made to undo any echoing of the character that might already have been done on <em>input-stream</em>. However, characters placed on <em>input-stream</em> by <strong>unread-char</strong> are marked in such a way as to inhibit later re-echo by <strong>read-char</strong>.</p>
<p>It is an error to invoke <strong>unread-char</strong> twice consecutively on the same <em>stream</em> without an intervening call to <strong>read-char</strong> (or some other input operation which implicitly reads characters) on that <em>stream</em>.</p>
<p>Invoking <strong>peek-char</strong> or <strong>read-char</strong> commits all previous characters. The consequences of invoking <strong>unread-char</strong> on any character preceding that which is returned by <strong>peek-char</strong> (including those passed over by <strong>peek-char</strong> that has a <em>non-nil peek-type</em>) are unspecified. In particular, the consequences of invoking <strong>unread-char</strong> after <strong>peek-char</strong> are unspecified.</p>
<p><strong>Examples:</strong></p>
<p>(with-input-from-string (is &quot;0123&quot;)</p>
<p>(dotimes (i 6)</p>
<p>(let ((c (read-char is)))</p>
<p>(if (evenp i) (format t &quot;~&amp;~S <del>S</del>%&quot; i c) (unread-char c is)))))</p>
<p>▷ 0 #\0</p>
<p>▷ 2 #\1</p>
<p>▷ 4 #\2</p>
<p><em>→</em> NIL</p>
<p><strong>Affected By:</strong></p>
<p><strong>*standard-input*</strong>, <strong>*terminal-io*</strong>.</p>
<p><strong>See Also:</strong></p>
<p><strong>peek-char</strong>, <strong>read-char</strong>, Section 21.1 (Stream Concepts)</p>
<p><strong>Notes:</strong></p>
<p><strong>unread-char</strong> is intended to be an efficient mechanism for allowing the <em>Lisp reader</em> and other parsers to perform one-character lookahead in <em>input-stream</em>.</p>
<p><strong>write-char</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>write-char</strong> <em>character</em> &amp;optional <em>output-stream → character</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>character</em>—a <em>character</em> .</p>
<p><em>output-stream</em> – an <em>output stream designator</em> . The default is <em>standard output</em>.</p>
<p><strong>Description:</strong></p>
<p><strong>write-char</strong> outputs <em>character</em> to <em>output-stream</em>.</p>
<p><strong>Examples:</strong></p>
<p>(write-char #\a)</p>
<p>▷ a</p>
<p><em>→</em> #\a</p>
<p>(with-output-to-string (s)</p>
<p>(write-char #\a s)</p>
<p>(write-char #\Space s)</p>
<p>(write-char #\b s))</p>
<p><em>→</em> &quot;a b&quot;</p>
<p><strong>Side Effects:</strong></p>
<p>The <em>output-stream</em> is modified.</p>
<p><strong>Affected By:</strong></p>
<p><strong>*standard-output*</strong>, <strong>*terminal-io*</strong>.</p>
<p><strong>See Also:</strong></p>
<p><strong>read-char</strong>, <strong>write-byte</strong>, <strong>write-sequence</strong></p>
<p>Streams <strong>21–23</strong></p>
<p><strong>read-line</strong></p>
<p><strong>read-line</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>read-line</strong> &amp;optional <em>input-stream eof-error-p eof-value recursive-p</em></p>
<p><em>→ line, missing-newline-p</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>input-stream</em>—an <em>input stream designator</em> . The default is <em>standard input</em>.</p>
<p><em>eof-error-p</em>—a <em>generalized boolean</em>. The default is <em>true</em>.</p>
<p><em>eof-value</em>—an <em>object</em>. The default is <strong>nil</strong>.</p>
<p><em>recursive-p</em>—a <em>generalized boolean</em>. The default is <em>false</em>.</p>
<p><em>line</em>—a <em>string</em> or the <em>eof-value</em>.</p>
<p><em>missing-newline-p</em>—a <em>generalized boolean</em>.</p>
<p><strong>Description:</strong></p>
<p>Reads from <em>input-stream</em> a line of text that is terminated by a <em>newline</em> or <em>end of file</em>.</p>
<p>If <em>recursive-p</em> is <em>true</em>, this call is expected to be embedded in a higher-level call to <strong>read</strong> or a similar <em>function</em> used by the <em>Lisp reader</em> .</p>
<p>The <em>primary value</em>, <em>line</em>, is the line that is read, represented as a <em>string</em> (without the trailing <em>newline</em>, if any). If <em>eof-error-p</em> is <em>false</em> and the <em>end of file</em> for <em>input-stream</em> is reached before any <em>characters</em> are read, <em>eof-value</em> is returned as the <em>line</em>.</p>
<p>The <em>secondary value</em>, <em>missing-newline-p</em>, is a <em>generalized boolean</em> that is <em>false</em> if the <em>line</em> was terminated by a <em>newline</em>, or <em>true</em> if the <em>line</em> was terminated by the <em>end of file</em> for <em>input-stream</em> (or if the <em>line</em> is the <em>eof-value</em>).</p>
<p><strong>Examples:</strong></p>
<p>(setq a &quot;line 1</p>
<p>line2&quot;)</p>
<p><em>→</em> &quot;line 1</p>
<p>line2&quot;</p>
<p>(read-line (setq input-stream (make-string-input-stream a)))</p>
<p><em>→</em> &quot;line 1&quot;, <em>false</em></p>
<p>(read-line input-stream)</p>
<p><em>→</em> &quot;line2&quot;, <em>true</em></p>
<p>(read-line input-stream nil nil)</p>
<p><em>→</em> NIL, <em>true</em></p>
<p><strong>Affected By:</strong></p>
<p><strong>*standard-input*</strong>, <strong>*terminal-io*</strong>.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>If an <em>end of file</em>&lt;sub&gt;2&lt;/sub&gt; occurs before any characters are read in the line, an error is signaled if <em>eof-error-p</em> is <em>true</em>.</p>
<p><strong>See Also:</strong></p>
<p><strong>read</strong></p>
<p><strong>Notes:</strong></p>
<p>The corresponding output function is <strong>write-line</strong>.</p>
<p><strong>write-string, write-line</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>write-string</strong> <em>string</em> &amp;optional <em>output-stream</em> &amp;key <em>start end → string</em></p>
<p><strong>write-line</strong> <em>string</em> &amp;optional <em>output-stream</em> &amp;key <em>start end → string</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>string</em>—a <em>string</em>.</p>
<p><em>output-stream</em> – an <em>output stream designator</em> . The default is <em>standard output</em>.</p>
<p><em>start</em>, <em>end</em>—<em>bounding index designators</em> of <em>string</em>. The defaults for <em>start</em> and <em>end</em> are 0 and <strong>nil</strong>, respectively.</p>
<p><strong>Description:</strong></p>
<p><strong>write-string</strong> writes the <em>characters</em> of the subsequence of <em>string bounded</em> by <em>start</em> and <em>end</em> to <em>output-stream</em>. <strong>write-line</strong> does the same thing, but then outputs a newline afterwards.</p>
<p><strong>Examples:</strong></p>
<p>(prog1 (write-string &quot;books&quot; nil <!-- -->:end<!-- --> 4) (write-string &quot;worms&quot;))</p>
<p>▷ bookworms</p>
<p><em>→</em> &quot;books&quot;</p>
<p>(progn (write-char #\*)</p>
<p>(write-line &quot;test12&quot; *standard-output* <!-- -->:end<!-- --> 5)</p>
<p>(write-line &quot;*test2&quot;)</p>
<p>(write-char #\*)</p>
<p>nil)</p>
<p>▷ *test1</p>
<p>Streams <strong>21–25</strong></p>
<p>▷ *test2</p>
<p>▷ *</p>
<p><em>→</em> NIL</p>
<p><strong>Affected By:</strong></p>
<p><strong>*standard-output*</strong>, <strong>*terminal-io*</strong>.</p>
<p><strong>See Also:</strong></p>
<p><strong>read-line</strong>, <strong>write-char</strong></p>
<p><strong>Notes:</strong></p>
<p><strong>write-line</strong> and <strong>write-string</strong> return <em>string</em>, not the substring <em>bounded</em> by <em>start</em> and <em>end</em>.</p>
<p>(write-string string)</p>
<p><em>≡</em> (dotimes (i (length string)</p>
<p>(write-char (char string i)))</p>
<p>(write-line string)</p>
<p><em>≡</em> (prog1 (write-string string) (terpri))</p>
<p><strong>read-sequence</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>read-sequence</strong> <em>sequence stream</em> &amp;key <em>start end → position</em></p>
<p><em>sequence</em>—a <em>sequence</em>.</p>
<p><em>stream</em>—an <em>input stream</em>.</p>
<p><em>start</em>, <em>end</em>—<em>bounding index designators</em> of <em>sequence</em>. The defaults for <em>start</em> and <em>end</em> are 0 and <strong>nil</strong>, respectively.</p>
<p><em>position</em>—an <em>integer</em> greater than or equal to zero, and less than or equal to the <em>length</em> of the <em>sequence</em>.</p>
<p><strong>Description:</strong></p>
<p>Destructively modifies <em>sequence</em> by replacing the <em>elements</em> of <em>sequence bounded</em> by <em>start</em> and <em>end</em> with <em>elements</em> read from <em>stream</em>.</p>
<p><em>Sequence</em> is destructively modified by copying successive <em>elements</em> into it from <em>stream</em>. If the <em>end of file</em> for <em>stream</em> is reached before copying all <em>elements</em> of the subsequence, then the extra <em>elements</em> near the end of <em>sequence</em> are not updated.</p>
<p><em>Position</em> is the index of the first <em>element</em> of <em>sequence</em> that was not updated, which might be less than <em>end</em> because the <em>end of file</em> was reached.</p>
<p><strong>Examples:</strong></p>
<p>(defvar *data* (make-array 15 <!-- -->:initial-element<!-- --> nil))</p>
<p>(values (read-sequence *data* (make-string-input-stream &quot;test string&quot;)) *data*) <em>→</em> 11, #(#\t #\e #\s #\t #\Space #\s #\t #\r #\i #\n #\g NIL NIL NIL NIL)</p>
<p><strong>Side Effects:</strong></p>
<p>Modifies <em>stream</em> and <em>sequence</em>.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>Should be prepared to signal an error of <em>type</em> <strong>type-error</strong> if <em>sequence</em> is not a <em>proper sequence</em>. Should signal an error of <em>type</em> <strong>type-error</strong> if <em>start</em> is not a non-negative <em>integer</em> . Should signal an error of <em>type</em> <strong>type-error</strong> if <em>end</em> is not a non-negative <em>integer</em> or <strong>nil</strong>.</p>
<p>Might signal an error of <em>type</em> <strong>type-error</strong> if an <em>element</em> read from the <em>stream</em> is not a member of the <em>element type</em> of the <em>sequence</em>.</p>
<p><strong>See Also:</strong></p>
<p>Section 3.2.1 (Compiler Terminology), <strong>write-sequence</strong>, <strong>read-line</strong></p>
<p><strong>Notes:</strong></p>
<p><strong>read-sequence</strong> is identical in effect to iterating over the indicated subsequence and reading one <em>element</em> at a time from <em>stream</em> and storing it into <em>sequence</em>, but may be more efficient than the equivalent loop. An efficient implementation is more likely to exist for the case where the <em>sequence</em> is a <em>vector</em> with the same <em>element type</em> as the <em>stream</em>.</p>
<p><strong>write-sequence</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>write-sequence</strong> <em>sequence stream</em> &amp;key <em>start end → sequence</em></p>
<p><em>sequence</em>—a <em>sequence</em>.</p>
<p><em>stream</em>—an <em>output stream</em>.</p>
<p><em>start</em>, <em>end</em>—<em>bounding index designators</em> of <em>sequence</em>. The defaults for <em>start</em> and <em>end</em> are 0 and <strong>nil</strong>, respectively.</p>
<p><strong>Description:</strong></p>
<p><strong>write-sequence</strong> writes the <em>elements</em> of the subsequence of <em>sequence bounded</em> by <em>start</em> and <em>end</em> to <em>stream</em>.</p>
<p>Streams <strong>21–27</strong></p>
<p><strong>Examples:</strong></p>
<p>(write-sequence &quot;bookworms&quot; *standard-output* <!-- -->:end<!-- --> 4)</p>
<p>▷ book</p>
<p><em>→</em> &quot;bookworms&quot;</p>
<p><strong>Side Effects:</strong></p>
<p>Modifies <em>stream</em>.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>Should be prepared to signal an error of <em>type</em> <strong>type-error</strong> if <em>sequence</em> is not a <em>proper sequence</em>. Should signal an error of <em>type</em> <strong>type-error</strong> if <em>start</em> is not a non-negative <em>integer</em> . Should signal an error of <em>type</em> <strong>type-error</strong> if <em>end</em> is not a non-negative <em>integer</em> or <strong>nil</strong>.</p>
<p>Might signal an error of <em>type</em> <strong>type-error</strong> if an <em>element</em> of the <em>bounded sequence</em> is not a member of the <em>stream element type</em> of the <em>stream</em>.</p>
<p><strong>See Also:</strong></p>
<p>Section 3.2.1 (Compiler Terminology), <strong>read-sequence</strong>, <strong>write-string</strong>, <strong>write-line</strong></p>
<p><strong>Notes:</strong></p>
<p><strong>write-sequence</strong> is identical in effect to iterating over the indicated subsequence and writing one <em>element</em> at a time to <em>stream</em>, but may be more efficient than the equivalent loop. An efficient implementation is more likely to exist for the case where the <em>sequence</em> is a <em>vector</em> with the same <em>element type</em> as the <em>stream</em>.</p>
<p><strong>file-length</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>file-length</strong> <em>stream → length</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>stream</em>—a <em>stream associated with a file</em>.</p>
<p><em>length</em>—a non-negative <em>integer</em> or <strong>nil</strong>.</p>
<p><strong>Description:</strong></p>
<p><strong>file-length</strong> returns the length of <em>stream</em>, or <strong>nil</strong> if the length cannot be determined.</p>
<p>For a binary file, the length is measured in units of the <em>element type</em> of the <em>stream</em>. <strong>Examples:</strong></p>
<p>(with-open-file (s &quot;decimal-digits.text&quot;</p>
<p>:direction<!-- --> <!-- -->:output<!-- --> <!-- -->:if-exists<!-- --> <!-- -->:error<!-- -->)</p>
<p>(princ &quot;0123456789&quot; s)</p>
<p>(truename s))</p>
<p><em>→</em> #P&quot;A:&gt;Joe&gt;decimal-digits.text.1&quot;</p>
<p>(with-open-file (s &quot;decimal-digits.text&quot;)</p>
<p>(file-length s))</p>
<p><em>→</em> 10</p>
<p><strong>Exceptional Situations:</strong></p>
<p>Should signal an error of <em>type</em> <strong>type-error</strong> if <em>stream</em> is not a <em>stream associated with a file</em>.</p>
<p><strong>See Also:</strong></p>
<p><strong>open</strong></p>
<p><strong>file-position</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>file-position</strong> <em>stream → position</em></p>
<p><strong>file-position</strong> <em>stream position-spec → success-p</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>stream</em>—a <em>stream</em>.</p>
<p><em>position-spec</em>—a <em>file position designator</em> .</p>
<p><em>position</em>—a <em>file position</em> or <strong>nil</strong>.</p>
<p><em>success-p</em>—a <em>generalized boolean</em>.</p>
<p><strong>Description:</strong></p>
<p>Returns or changes the current position within a <em>stream</em>.</p>
<p>When <em>position-spec</em> is not supplied, <strong>file-position</strong> returns the current <em>file position</em> in the <em>stream</em>, or <strong>nil</strong> if this cannot be determined.</p>
<p>When <em>position-spec</em> is supplied, the <em>file position</em> in <em>stream</em> is set to that <em>file position</em> (if possible). <strong>file-position</strong> returns <em>true</em> if the repositioning is performed successfully, or <em>false</em> if it is not.</p>
<p>An <em>integer</em> returned by <strong>file-position</strong> of one argument should be acceptable as <em>position-spec</em> for use with the same file.</p>
<p>For a character file, performing a single <strong>read-char</strong> or <strong>write-char</strong> operation may cause the file position to be increased by more than 1 because of character-set translations (such as translating between the Common Lisp #\Newline character and an external ASCII carriage-return/line-feed</p>
<p>Streams <strong>21–29</strong></p>
<p><strong>file-position</strong></p>
<p>sequence) and other aspects of the implementation. For a binary file, every <strong>read-byte</strong> or <strong>write-byte</strong> operation increases the file position by 1.</p>
<p><strong>Examples:</strong></p>
<p>(defun tester ()</p>
<p>(let ((noticed ’()) file-written)</p>
<p>(flet ((notice (x) (push x noticed) x))</p>
<p>(with-open-file (s &quot;test.bin&quot;</p>
<p>:element-type<!-- --> ’(unsigned-byte 8)</p>
<p>:direction<!-- --> <!-- -->:output</p>
<p>:if-exists<!-- --> <!-- -->:error<!-- -->)</p>
<p>(notice (file-position s)) ;1</p>
<p>(write-byte 5 s)</p>
<p>(write-byte 6 s)</p>
<p>(let ((p (file-position s)))</p>
<p>(notice p) ;2</p>
<p>(notice (when p (file-position s (1- p))))) ;3</p>
<p>(write-byte 7 s)</p>
<p>(notice (file-position s)) ;4</p>
<p>(setq file-written (truename s)))</p>
<p>(with-open-file (s file-written</p>
<p>:element-type<!-- --> ’(unsigned-byte 8)</p>
<p>:direction<!-- --> <!-- -->:input<!-- -->)</p>
<p>(notice (file-position s)) ;5</p>
<p>(let ((length (file-length s)))</p>
<p>(notice length) ;6</p>
<p>(when length</p>
<p>(dotimes (i length)</p>
<p>(notice (read-byte s)))))) ;7,...</p>
<p>(nreverse noticed))))</p>
<p><em>→</em> tester</p>
<p>(tester)</p>
<p><em>→</em> (0 2 T 2 0 2 5 7)</p>
<p>&lt;i&gt;&lt;sup&gt;or&lt;/sup&gt;→&lt;/i&gt; (0 2 NIL 3 0 3 5 6 7)</p>
<p>&lt;i&gt;&lt;sup&gt;or&lt;/sup&gt;→&lt;/i&gt; (NIL NIL NIL NIL NIL NIL)</p>
<p><strong>Side Effects:</strong></p>
<p>When the <em>position-spec</em> argument is supplied, the <em>file position</em> in the <em>stream</em> might be moved.</p>
<p><strong>Affected By:</strong></p>
<p>The value returned by <strong>file-position</strong> increases monotonically as input or output operations are performed.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>If <em>position-spec</em> is supplied, but is too large or otherwise inappropriate, an error is signaled.</p>
<p><strong>See Also:</strong></p>
<p><strong>file-length</strong>, <strong>file-string-length</strong>, <strong>open</strong></p>
<p><strong>Notes:</strong></p>
<p>Implementations that have character files represented as a sequence of records of bounded size might choose to encode the file position as, for example, ⟨record-number ⟩*⟨max-record size⟩+⟨character-within-record⟩. This is a valid encoding because it increases monotonically as each character is read or written, though not necessarily by 1 at each step. An <em>integer</em> might then be considered “inappropriate” as <em>position-spec</em> to <strong>file-position</strong> if, when decoded into record number and character number, it turned out that the supplied record was too short for the specified character number.</p>
<p><strong>file-string-length</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>file-string-length</strong> <em>stream object → length</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>stream</em>—an <em>output character file stream</em>.</p>
<p><em>object</em>—a <em>string</em> or a <em>character</em> .</p>
<p><em>length</em>—a non-negative <em>integer</em> , or <strong>nil</strong>.</p>
<p><strong>Description:</strong></p>
<p><strong>file-string-length</strong> returns the difference between what (file-position <em>stream</em>) would be after writing <em>object</em> and its current value, or <strong>nil</strong> if this cannot be determined.</p>
<p>The returned value corresponds to the current state of <em>stream</em> at the time of the call and might not be the same if it is called again when the state of the <em>stream</em> has changed.</p>
<p>Streams <strong>21–31</strong></p>
<p><strong>open</strong></p>
<p><strong>open</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>open</strong> <em>filespec</em> &amp;key <em>direction element-type</em></p>
<p><em>if-exists if-does-not-exist external-format</em></p>
<p><em>→ stream</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>filespec</em>—a <em>pathname designator</em> .</p>
<p><em>direction</em>—one of <!-- -->:input<!-- -->, <!-- -->:output<!-- -->, <!-- -->:io<!-- -->, or <!-- -->:probe<!-- -->. The default is <!-- -->:input<!-- -->.</p>
<p><em>element-type</em>—a <em>type specifier</em> for <em>recognizable subtype</em> of <strong>character</strong>; or a <em>type specifier</em> for a <em>finite recognizable subtype</em> of <em>integer</em> ; or one of the <em>symbols</em> <strong>signed-byte</strong>, <strong>unsigned-byte</strong>, or <!-- -->:default<!-- -->. The default is <strong>character</strong>.</p>
<p><em>if-exists</em>—one of <!-- -->:error<!-- -->, <!-- -->:new-version<!-- -->, <!-- -->:rename<!-- -->, <!-- -->:rename-and-delete<!-- -->, <!-- -->:overwrite<!-- -->, <!-- -->:append<!-- -->, <!-- -->:supersede<!-- -->, or <strong>nil</strong>. The default is <!-- -->:new-version<!-- --> if the version component of <em>filespec</em> is <!-- -->:newest<!-- -->, or <!-- -->:error<!-- --> otherwise.</p>
<p><em>if-does-not-exist</em>—one of <!-- -->:error<!-- -->, <!-- -->:create<!-- -->, or <strong>nil</strong>. The default is <!-- -->:error<!-- --> if <em>direction</em> is <!-- -->:input<!-- --> or <em>if-exists</em> is <!-- -->:overwrite<!-- --> or <!-- -->:append<!-- -->; <!-- -->:create<!-- --> if <em>direction</em> is <!-- -->:output<!-- --> or <!-- -->:io<!-- -->, and <em>if-exists</em> is neither <!-- -->:overwrite<!-- --> nor <!-- -->:append<!-- -->; or <strong>nil</strong> when <em>direction</em> is <!-- -->:probe<!-- -->.</p>
<p><em>external-format</em>—an <em>external file format designator</em> . The default is <!-- -->:default<!-- -->.</p>
<p><em>stream</em>—a <em>file stream</em> or <strong>nil</strong>.</p>
<p><strong>Description:</strong></p>
<p><strong>open</strong> creates, opens, and returns a <em>file stream</em> that is connected to the file specified by <em>filespec</em>. <em>Filespec</em> is the name of the file to be opened. If the <em>filespec designator</em> is a <em>stream</em>, that <em>stream</em> is not closed first or otherwise affected.</p>
<p>The keyword arguments to <strong>open</strong> specify the characteristics of the <em>file stream</em> that is returned, and how to handle errors.</p>
<p>If <em>direction</em> is <!-- -->:input<!-- --> or <!-- -->:probe<!-- -->, or if <em>if-exists</em> is not <!-- -->:new-version<!-- --> and the version component of the <em>filespec</em> is <!-- -->:newest<!-- -->, then the file opened is that file already existing in the file system that has a version greater than that of any other file in the file system whose other pathname components are the same as those of <em>filespec</em>.</p>
<p>An implementation is required to recognize all of the <strong>open</strong> keyword options and to do something reasonable in the context of the host operating system. For example, if a file system does not support distinct file versions and does not distinguish the notions of deletion and expunging, <!-- -->:new-version<!-- --> might be treated the same as <!-- -->:rename<!-- --> or <!-- -->:supersede<!-- -->, and <!-- -->:rename-and-delete<!-- --> might be treated the same as <!-- -->:supersede<!-- -->.</p>
<p><strong>open</strong></p>
<p>:direction</p>
<p>These are the possible values for <em>direction</em>, and how they affect the nature of the <em>stream</em> that is created:</p>
<p>:input</p>
<p>Causes the creation of an <em>input file stream</em>.</p>
<p>:output</p>
<p>Causes the creation of an <em>output file stream</em>.</p>
<p>:io</p>
<p>Causes the creation of a <em>bidirectional file stream</em>.</p>
<p>:probe</p>
<p>Causes the creation of a “no-directional” <em>file stream</em>; in effect, the <em>file stream</em> is</p>
<p>created and then closed prior to being returned by <strong>open</strong>.</p>
<p>:element-type</p>
<p>The <em>element-type</em> specifies the unit of transaction for the <em>file stream</em>. If it is <!-- -->:default<!-- -->, the unit is determined by <em>file system</em>, possibly based on the <em>file</em>.</p>
<p>:if-exists</p>
<p><em>if-exists</em> specifies the action to be taken if <em>direction</em> is <!-- -->:output<!-- --> or <!-- -->:io<!-- --> and a file of the name <em>filespec</em> already exists. If <em>direction</em> is <!-- -->:input<!-- -->, not supplied, or <!-- -->:probe<!-- -->, <em>if-exists</em> is ignored. These are the results of <strong>open</strong> as modified by <em>if-exists</em>:</p>
<p>:error</p>
<p>An error of <em>type</em> <strong>file-error</strong> is signaled.</p>
<p>:new-version</p>
<p>A new file is created with a larger version number.</p>
<p>:rename</p>
<p>The existing file is renamed to some other name and then a new file is created.</p>
<p>:rename-and-delete</p>
<p>The existing file is renamed to some other name, then it is deleted but not</p>
<p>expunged, and then a new file is created.</p>
<p>Streams <strong>21–33</strong></p>
<p><strong>open</strong></p>
<p>:overwrite</p>
<p>Output operations on the <em>stream</em> destructively modify the existing file. If <em>direction</em></p>
<p>is <!-- -->:io<!-- --> the file is opened in a bidirectional mode that allows both reading and</p>
<p>writing. The file pointer is initially positioned at the beginning of the file; however,</p>
<p>the file is not truncated back to length zero when it is opened.</p>
<p>:append</p>
<p>Output operations on the <em>stream</em> destructively modify the existing file. The file</p>
<p>pointer is initially positioned at the end of the file.</p>
<p>If <em>direction</em> is <!-- -->:io<!-- -->, the file is opened in a bidirectional mode that allows both</p>
<p>reading and writing.</p>
<p>:supersede</p>
<p>The existing file is superseded; that is, a new file with the same name as the old</p>
<p>one is created. If possible, the implementation should not destroy the old file until</p>
<p>the new <em>stream</em> is closed.</p>
<p><strong>nil</strong></p>
<p>No file or <em>stream</em> is created; instead, <strong>nil</strong> is returned to indicate failure.</p>
<p>:if-does-not-exist</p>
<p><em>if-does-not-exist</em> specifies the action to be taken if a file of name <em>filespec</em> does not already exist. These are the results of <strong>open</strong> as modified by <em>if-does-not-exist</em>:</p>
<p>:error</p>
<p>An error of <em>type</em> <strong>file-error</strong> is signaled.</p>
<p>:create</p>
<p>An empty file is created. Processing continues as if the file had already existed but</p>
<p>no processing as directed by <em>if-exists</em> is performed.</p>
<p><strong>nil</strong></p>
<p>No file or <em>stream</em> is created; instead, <strong>nil</strong> is returned to indicate failure.</p>
<p>:external-format</p>
<p>This option selects an <em>external file format</em> for the <em>file</em>: The only <em>standardized</em> value for this option is <!-- -->:default<!-- -->, although <em>implementations</em> are permitted to define additional <em>external file formats</em> and <em>implementation-dependent</em> values returned by <strong>stream-external-format</strong> can also be used by <em>conforming programs</em>.</p>
<p><strong>open</strong></p>
<p>The <em>external-format</em> is meaningful for any kind of <em>file stream</em> whose <em>element type</em> is a <em>subtype</em> of <em>character</em> . This option is ignored for <em>streams</em> for which it is not meaningful; however, <em>implementations</em> may define other <em>element types</em> for which it is meaningful. The consequences are unspecified if a <em>character</em> is written that cannot be represented by the given <em>external file format</em>.</p>
<p>When a file is opened, a <em>file stream</em> is constructed to serve as the file system’s ambassador to the Lisp environment; operations on the <em>file stream</em> are reflected by operations on the file in the file system.</p>
<p>A file can be deleted, renamed, or destructively modified by <strong>open</strong>.</p>
<p>For information about opening relative pathnames, see Section 19.2.3 (Merging Pathnames). <strong>Examples:</strong></p>
<p>(open <em>filespec</em> <!-- -->:direction<!-- --> <!-- -->:probe<!-- -->) <em>→</em> #&lt;Closed Probe File Stream...&gt;</p>
<p>(setq q (merge-pathnames (user-homedir-pathname) &quot;test&quot;))</p>
<p><em>→</em> #&lt;PATHNAME <!-- -->:HOST<!-- --> NIL <!-- -->:DEVICE<!-- --> <em>device-name</em> <!-- -->:DIRECTORY<!-- --> <em>directory-name</em></p>
<p>:NAME<!-- --> &quot;test&quot; <!-- -->:TYPE<!-- --> NIL <!-- -->:VERSION<!-- --> <!-- -->:NEWEST<!-- -->&gt;</p>
<p>(open <em>filespec</em> <!-- -->:if-does-not-exist<!-- --> <!-- -->:create<!-- -->) <em>→</em> #&lt;Input File Stream...&gt;</p>
<p>(setq s (open <em>filespec</em> <!-- -->:direction<!-- --> <!-- -->:probe<!-- -->)) <em>→</em> #&lt;Closed Probe File Stream...&gt;</p>
<p>(truename s) <em>→</em> #&lt;PATHNAME <!-- -->:HOST<!-- --> NIL <!-- -->:DEVICE<!-- --> <em>device-name</em> <!-- -->:DIRECTORY</p>
<p><em>directory-name</em> <!-- -->:NAME<!-- --> <em>filespec</em> <!-- -->:TYPE<!-- --> <em>extension</em> <!-- -->:VERSION<!-- --> 1&gt;</p>
<p>(open s <!-- -->:direction<!-- --> <!-- -->:output<!-- --> <!-- -->:if-exists<!-- --> nil) <em>→</em> NIL</p>
<p><strong>Affected By:</strong></p>
<p>The nature and state of the host computer’s <em>file system</em>.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>If <em>if-exists</em> is <!-- -->:error<!-- -->, (subject to the constraints on the meaning of <em>if-exists</em> listed above), an error of <em>type</em> <strong>file-error</strong> is signaled.</p>
<p>If <em>if-does-not-exist</em> is <!-- -->:error<!-- --> (subject to the constraints on the meaning of <em>if-does-not-exist</em> listed above), an error of <em>type</em> <strong>file-error</strong> is signaled.</p>
<p>If it is impossible for an implementation to handle some option in a manner close to what is specified here, an error of <em>type</em> <strong>error</strong> might be signaled.</p>
<p>An error of <em>type</em> <strong>file-error</strong> is signaled if (wild-pathname-p <em>filespec</em>) returns true.</p>
<p>An error of <em>type</em> <strong>error</strong> is signaled if the <em>external-format</em> is not understood by the <em>implementation</em>.</p>
<p>The various <em>file systems</em> in existence today have widely differing capabilities, and some aspects of the <em>file system</em> are beyond the scope of this specification to define. A given <em>implementation</em> might not be able to support all of these options in exactly the manner stated. An <em>implementation</em> is required to recognize all of these option keywords and to try to do something “reasonable” in the context of the host <em>file system</em>. Where necessary to accomodate the <em>file system</em>, an <em>implementation</em></p>
<p>Streams <strong>21–35</strong></p>
<p>deviate slightly from the semantics specified here without being disqualified for consideration as a <em>conforming implementation</em>. If it is utterly impossible for an <em>implementation</em> to handle some option in a manner similar to what is specified here, it may simply signal an error.</p>
<p>With regard to the <!-- -->:element-type<!-- --> option, if a <em>type</em> is requested that is not supported by the <em>file system</em>, a substitution of types such as that which goes on in <em>upgrading</em> is permissible. As a minimum requirement, it should be the case that opening an <em>output stream</em> to a <em>file</em> in a given <em>element type</em> and later opening an <em>input stream</em> to the same <em>file</em> in the same <em>element type</em> should work compatibly.</p>
<p><strong>See Also:</strong></p>
<p><strong>with-open-file</strong>, <strong>close</strong>, <strong>pathname</strong>, <strong>logical-pathname</strong>, Section 19.2.3 (Merging Pathnames), Section 19.1.2 (Pathnames as Filenames)</p>
<p><strong>Notes:</strong></p>
<p><strong>open</strong> does not automatically close the file when an abnormal exit occurs.</p>
<p>When <em>element-type</em> is a <em>subtype</em> of <strong>character</strong>, <strong>read-char</strong> and/or <strong>write-char</strong> can be used on the resulting <em>file stream</em>.</p>
<p>When <em>element-type</em> is a <em>subtype</em> of <em>integer</em> , <strong>read-byte</strong> and/or <strong>write-byte</strong> can be used on the resulting <em>file stream</em>.</p>
<p>When <em>element-type</em> is <!-- -->:default<!-- -->, the <em>type</em> can be determined by using <strong>stream-element-type</strong>. <strong>stream-external-format</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>stream-external-format</strong> <em>stream → format</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>stream</em>—a <em>file stream</em>.</p>
<p><em>format</em>—an <em>external file format</em>.</p>
<p><strong>Description:</strong></p>
<p>Returns an <em>external file format designator</em> for the <em>stream</em>.</p>
<p><strong>Examples:</strong></p>
<p>(with-open-file (stream &quot;test&quot; <!-- -->:direction<!-- --> <!-- -->:output<!-- -->)</p>
<p>(stream-external-format stream))</p>
<p><em>→</em> <!-- -->:DEFAULT</p>
<p>&lt;i&gt;&lt;sup&gt;or&lt;/sup&gt;→&lt;/i&gt; <!-- -->:ISO8859<!-- -->/1-1987</p>
<p>&lt;i&gt;&lt;sup&gt;or&lt;/sup&gt;→&lt;/i&gt; (<!-- -->:ASCII<!-- --> <!-- -->:SAIL<!-- -->)</p>
<p>&lt;i&gt;&lt;sup&gt;or&lt;/sup&gt;→&lt;/i&gt; ACME::PROPRIETARY-FILE-FORMAT-17</p>
<p>&lt;i&gt;&lt;sup&gt;or&lt;/sup&gt;→&lt;/i&gt; #&lt;FILE-FORMAT <!-- -->:ISO646-1983<!-- --> 2343673&gt;</p>
<p><strong>See Also:</strong></p>
<p>the <!-- -->:external-format<!-- --> <em>argument</em> to the <em>function</em> <strong>open</strong> and the <strong>with-open-file</strong> <em>macro</em>.</p>
<p><strong>Notes:</strong></p>
<p>The <em>format</em> returned is not necessarily meaningful to other <em>implementations</em>.</p>
<p><strong>with-open-file</strong> <em>macro</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>with-open-file</strong> (<em>stream filespec {options}</em>*) <em>{declaration}</em>* <em>{form}</em>*</p>
<p><em>→ results</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>stream</em> – a variable.</p>
<p><em>filespec</em>—a <em>pathname designator</em> .</p>
<p><em>options</em> – <em>forms</em>; evaluated.</p>
<p><em>declaration</em>—a <strong>declare</strong> <em>expression</em>; not evaluated.</p>
<p><em>forms</em>—an <em>implicit progn</em>.</p>
<p><em>results</em>—the <em>values</em> returned by the <em>forms</em>.</p>
<p><strong>Description:</strong></p>
<p><strong>with-open-file</strong> uses <strong>open</strong> to create a <em>file stream</em> to <em>file</em> named by <em>filespec</em>. <em>Filespec</em> is the name of the file to be opened. <em>Options</em> are used as keyword arguments to <strong>open</strong>.</p>
<p>The <em>stream object</em> to which the <em>stream variable</em> is <em>bound</em> has <em>dynamic extent</em>; its <em>extent</em> ends when the <em>form</em> is exited.</p>
<p><strong>with-open-file</strong> evaluates the <em>forms</em> as an <em>implicit progn</em> with <em>stream</em> bound to the value returned by <strong>open</strong>.</p>
<p>When control leaves the body, either normally or abnormally (such as by use of <strong>throw</strong>), the file is automatically closed. If a new output file is being written, and control leaves abnormally, the file is aborted and the file system is left, so far as possible, as if the file had never been opened.</p>
<p>Streams <strong>21–37</strong></p>
<p><strong>with-open-file</strong></p>
<p>It is possible by the use of <!-- -->:if-exists<!-- --> nil or <!-- -->:if-does-not-exist<!-- --> nil for <em>stream</em> to be bound to <strong>nil</strong>. Users of <!-- -->:if-does-not-exist<!-- --> nil should check for a valid <em>stream</em>.</p>
<p>The consequences are undefined if an attempt is made to <em>assign</em> the <em>stream variable</em>. The compiler may choose to issue a warning if such an attempt is detected.</p>
<p><strong>Examples:</strong></p>
<p>(setq p (merge-pathnames &quot;test&quot;))</p>
<p><em>→</em> #&lt;PATHNAME <!-- -->:HOST<!-- --> NIL <!-- -->:DEVICE<!-- --> <em>device-name</em> <!-- -->:DIRECTORY<!-- --> <em>directory-name</em></p>
<p>:NAME<!-- --> &quot;test&quot; <!-- -->:TYPE<!-- --> NIL <!-- -->:VERSION<!-- --> <!-- -->:NEWEST<!-- -->&gt;</p>
<p>(with-open-file (s p <!-- -->:direction<!-- --> <!-- -->:output<!-- --> <!-- -->:if-exists<!-- --> <!-- -->:supersede<!-- -->)</p>
<p>(format s &quot;Here are a couple~%of test data lines~%&quot;)) <em>→</em> NIL</p>
<p>(with-open-file (s p)</p>
<p>(do ((l (read-line s) (read-line s nil ’eof)))</p>
<p>((eq l ’eof) &quot;Reached end of file.&quot;)</p>
<p>(format t &quot;~&amp;*** <del>A</del>%&quot; l)))</p>
<p>▷ *** Here are a couple</p>
<p>▷ *** of test data lines</p>
<p><em>→</em> &quot;Reached end of file.&quot;</p>
<p>;; Normally one would not do this intentionally because it is</p>
<p>;; not perspicuous, but beware when using <!-- -->:IF-DOES-NOT-EXIST<!-- --> NIL</p>
<p>;; that this doesn’t happen to you accidentally...</p>
<p>(with-open-file (foo &quot;no-such-file&quot; <!-- -->:if-does-not-exist<!-- --> nil)</p>
<p>(read foo))</p>
<p>▷ hello?</p>
<p><em>→</em> HELLO? ;This value was read from the terminal, not a file!</p>
<p>;; Here’s another bug to avoid...</p>
<p>(with-open-file (foo &quot;no-such-file&quot; <!-- -->:direction<!-- --> <!-- -->:output<!-- --> <!-- -->:if-does-not-exist<!-- --> nil) (format foo &quot;Hello&quot;))</p>
<p><em>→</em> &quot;Hello&quot; ;FORMAT got an argument of NIL!</p>
<p><strong>Side Effects:</strong></p>
<p>Creates a <em>stream</em> to the <em>file</em> named by <em>filename</em> (upon entry), and closes the <em>stream</em> (upon exit). In some <em>implementations</em>, the <em>file</em> might be locked in some way while it is open. If the <em>stream</em> is an <em>output stream</em>, a <em>file</em> might be created.</p>
<p><strong>Affected By:</strong></p>
<p>The host computer’s file system.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>See the <em>function</em> <strong>open</strong>.</p>
<p><strong>See Also:</strong></p>
<p><strong>open</strong>, <strong>close</strong>, <strong>pathname</strong>, <strong>logical-pathname</strong>, Section 19.1.2 (Pathnames as Filenames) <strong>close</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>close</strong> <em>stream</em> &amp;key <em>abort → result</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>stream</em>—a <em>stream</em> (either <em>open</em> or <em>closed</em>).</p>
<p><em>abort</em>—a <em>generalized boolean</em>. The default is <em>false</em>.</p>
<p><em>result</em>—<strong>t</strong> if the <em>stream</em> was <em>open</em> at the time it was received as an <em>argument</em>, or <em>implementation dependent</em> otherwise.</p>
<p><strong>Description:</strong></p>
<p><strong>close</strong> closes <em>stream</em>. Closing a <em>stream</em> means that it may no longer be used in input or output operations. The act of <em>closing</em> a <em>file stream</em> ends the association between the <em>stream</em> and its associated <em>file</em>; the transaction with the <em>file system</em> is terminated, and input/output may no longer be performed on the <em>stream</em>.</p>
<p>If <em>abort</em> is <em>true</em>, an attempt is made to clean up any side effects of having created <em>stream</em>. If <em>stream</em> performs output to a file that was created when the <em>stream</em> was created, the file is deleted and any previously existing file is not superseded.</p>
<p>It is permissible to close an already closed <em>stream</em>, but in that case the <em>result</em> is <em>implementation dependent</em>.</p>
<p>After <em>stream</em> is closed, it is still possible to perform the following query operations upon it: <strong>streamp</strong>, <strong>pathname</strong>, <strong>truename</strong>, <strong>merge-pathnames</strong>, <strong>pathname-host</strong>, <strong>pathname-device</strong>, <strong>pathname-directory</strong>,<strong>pathname-name</strong>, <strong>pathname-type</strong>, <strong>pathname-version</strong>, <strong>namestring</strong>, <strong>file-namestring</strong>, <strong>directory-namestring</strong>, <strong>host-namestring</strong>, <strong>enough-namestring</strong>, <strong>open</strong>, <strong>probe-file</strong>, and <strong>directory</strong>.</p>
<p>The effect of <strong>close</strong> on a <em>constructed stream</em> is to close the argument <em>stream</em> only. There is no effect on the <em>constituents</em> of <em>composite streams</em>.</p>
<p>For a <em>stream</em> created with <strong>make-string-output-stream</strong>, the result of <strong>get-output-stream-string</strong> is unspecified after <strong>close</strong>.</p>
<p>Streams <strong>21–39</strong></p>
<p><strong>Examples:</strong></p>
<p>(setq s (make-broadcast-stream)) <em>→</em> #&lt;BROADCAST-STREAM&gt;</p>
<p>(close s) <em>→</em> T</p>
<p>(output-stream-p s) <em>→ true</em></p>
<p><strong>Side Effects:</strong></p>
<p>The <em>stream</em> is <em>closed</em> (if necessary). If <em>abort</em> is <em>true</em> and the <em>stream</em> is an <em>output file stream</em>, its associated <em>file</em> might be deleted.</p>
<p><strong>See Also:</strong></p>
<p><strong>open</strong></p>
<p><strong>with-open-stream</strong> <em>Macro</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>with-open-stream</strong> (<em>var stream</em>) <em>{declaration}</em>* <em>{form}</em>*</p>
<p><em>→ {result}</em>*</p>
<p><strong>Arguments and Values:</strong></p>
<p><em>var</em>—a <em>variable name</em>.</p>
<p><em>stream</em>—a <em>form</em>; evaluated to produce a <em>stream</em>.</p>
<p><em>declaration</em>—a <strong>declare</strong> <em>expression</em>; not evaluated.</p>
<p><em>forms</em>—an <em>implicit progn</em>.</p>
<p><em>results</em>—the <em>values</em> returned by the <em>forms</em>.</p>
<p><strong>Description:</strong></p>
<p><strong>with-open-stream</strong> performs a series of operations on <em>stream</em>, returns a value, and then closes the <em>stream</em>.</p>
<p><em>Var</em> is bound to the value of <em>stream</em>, and then <em>forms</em> are executed as an <em>implicit progn</em>. <em>stream</em> is automatically closed on exit from <strong>with-open-stream</strong>, no matter whether the exit is normal or abnormal. The <em>stream</em> has <em>dynamic extent</em>; its <em>extent</em> ends when the <em>form</em> is exited.</p>
<p>The consequences are undefined if an attempt is made to <em>assign</em> the the <em>variable var</em> with the <em>forms</em>.</p>
<p><strong>Examples:</strong></p>
<p>(with-open-stream (s (make-string-input-stream &quot;1 2 3 4&quot;))</p>
<p>(+ (read s) (read s) (read s))) <em>→</em> 6</p>
<p><strong>Side Effects:</strong></p>
<p>The <em>stream</em> is closed (upon exit).</p>
<p><strong>See Also:</strong></p>
<p><strong>close</strong></p>
<p><strong>listen</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>listen</strong> &amp;optional <em>input-stream → generalized-boolean</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>input-stream</em>—an <em>input stream designator</em> . The default is <em>standard input</em>.</p>
<p><em>generalized-boolean</em>—a <em>generalized boolean</em>.</p>
<p><strong>Description:</strong></p>
<p>Returns <em>true</em> if there is a character immediately available from <em>input-stream</em>; otherwise, returns <em>false</em>. On a non-interactive <em>input-stream</em>, <strong>listen</strong> returns <em>true</em> except when at <em>end of file</em>&lt;sub&gt;1&lt;/sub&gt;. If an <em>end of file</em> is encountered, <strong>listen</strong> returns <em>false</em>. <strong>listen</strong> is intended to be used when <em>input-stream</em> obtains characters from an interactive device such as a keyboard.</p>
<p><strong>Examples:</strong></p>
<p>(progn (unread-char (read-char)) (list (listen) (read-char)))</p>
<p>▷ 1</p>
<p><em>→</em> (T #\1)</p>
<p>(progn (clear-input) (listen))</p>
<p><em>→</em> NIL ;Unless you’re a very fast typist!</p>
<p><strong>Affected By:</strong></p>
<p><strong>*standard-input*</strong></p>
<p><strong>See Also:</strong></p>
<p><strong>interactive-stream-p</strong>, <strong>read-char-no-hang</strong></p>
<p>Streams <strong>21–41</strong></p>
<p><strong>clear-input</strong></p>
<p><strong>clear-input</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>clear-input</strong> &amp;optional <em>input-stream →</em> <strong>nil</strong></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>input-stream</em>—an <em>input stream designator</em> . The default is <em>standard input</em>.</p>
<p><strong>Description:</strong></p>
<p>Clears any available input from <em>input-stream</em>.</p>
<p>If <strong>clear-input</strong> does not make sense for <em>input-stream</em>, then <strong>clear-input</strong> does nothing. <strong>Examples:</strong></p>
<p>;; The exact I/O behavior of this example might vary from implementation</p>
<p>;; to implementation depending on the kind of interactive buffering that</p>
<p>;; occurs. (The call to SLEEP here is intended to help even out the</p>
<p>;; differences in implementations which do not do line-at-a-time buffering.)</p>
<p>(defun read-sleepily (&amp;optional (clear-p nil) (zzz 0))</p>
<p>(list (progn (print ’&gt;) (read))</p>
<p>;; Note that input typed within the first ZZZ seconds</p>
<p>;; will be discarded.</p>
<p>(progn (print ’&gt;)</p>
<p>(if zzz (sleep zzz))</p>
<p>(print ’»)</p>
<p>(if clear-p (clear-input))</p>
<p>(read))))</p>
<p>(read-sleepily)</p>
<p>▷ &gt; 10</p>
<p>▷ &gt;</p>
<p>▷ » 20</p>
<p><em>→</em> (10 20)</p>
<p>(read-sleepily t)</p>
<p>▷ &gt; 10</p>
<p>▷ &gt;</p>
<p>▷ » 20</p>
<p><em>→</em> (10 20)</p>
<p>(read-sleepily t 10)</p>
<p>▷ &gt; 10</p>
<p>▷ &gt; 20 ; Some implementations won’t echo typeahead here.</p>
<p>▷ » 30</p>
<p><em>→</em> (10 30)</p>
<p><strong>Side Effects:</strong></p>
<p>The <em>input-stream</em> is modified.</p>
<p><strong>Affected By:</strong></p>
<p><strong>*standard-input*</strong></p>
<p><strong>Exceptional Situations:</strong></p>
<p>Should signal an error of <em>type</em> <strong>type-error</strong> if <em>input-stream</em> is not a <em>stream designator</em> .</p>
<p><strong>See Also:</strong></p>
<p><strong>clear-output</strong></p>
<p><strong>finish-output, force-output, clear-output</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>finish-output</strong> &amp;optional <em>output-stream →</em> <strong>nil</strong></p>
<p><strong>force-output</strong> &amp;optional <em>output-stream →</em> <strong>nil</strong></p>
<p><strong>clear-output</strong> &amp;optional <em>output-stream →</em> <strong>nil</strong></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>output-stream</em>—an <em>output stream designator</em> . The default is <em>standard output</em>.</p>
<p><strong>Description:</strong></p>
<p><strong>finish-output</strong>, <strong>force-output</strong>, and <strong>clear-output</strong> exercise control over the internal handling of buffered stream output.</p>
<p><strong>finish-output</strong> attempts to ensure that any buffered output sent to <em>output-stream</em> has reached its destination, and then returns.</p>
<p><strong>force-output</strong> initiates the emptying of any internal buffers but does not wait for completion or acknowledgment to return.</p>
<p><strong>clear-output</strong> attempts to abort any outstanding output operation in progress in order to allow as little output as possible to continue to the destination.</p>
<p>If any of these operations does not make sense for <em>output-stream</em>, then it does nothing. The precise actions of these <em>functions</em> are <em>implementation-dependent</em>.</p>
<p>Streams <strong>21–43</strong></p>
<p><strong>Examples:</strong></p>
<p>;; Implementation A</p>
<p>(progn (princ &quot;am i seen?&quot;) (clear-output))</p>
<p><em>→</em> NIL</p>
<p>;; Implementation B</p>
<p>(progn (princ &quot;am i seen?&quot;) (clear-output))</p>
<p>▷ am i seen?</p>
<p><em>→</em> NIL</p>
<p><strong>Affected By:</strong></p>
<p><strong>*standard-output*</strong></p>
<p><strong>Exceptional Situations:</strong></p>
<p>Should signal an error of <em>type</em> <strong>type-error</strong> if <em>output-stream</em> is not a <em>stream designator</em> .</p>
<p><strong>See Also:</strong></p>
<p><strong>clear-input</strong></p>
<p><strong>y-or-n-p, yes-or-no-p</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>y-or-n-p</strong> &amp;optional <em>control</em> &amp;rest <em>arguments → generalized-boolean</em></p>
<p><strong>yes-or-no-p</strong> &amp;optional <em>control</em> &amp;rest <em>arguments → generalized-boolean</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>control</em>—a <em>format control</em>.</p>
<p><em>arguments</em>—<em>format arguments</em> for <em>control</em>.</p>
<p><em>generalized-boolean</em>—a <em>generalized boolean</em>.</p>
<p><strong>Description:</strong></p>
<p>These functions ask a question and parse a response from the user. They return <em>true</em> if the answer is affirmative, or <em>false</em> if the answer is negative.</p>
<p><strong>y-or-n-p</strong> is for asking the user a question whose answer is either “yes” or “no.” It is intended that the reply require the user to answer a yes-or-no question with a single character. <strong>yes-or-no-p</strong> is also for asking the user a question whose answer is either “Yes” or “No.” It is intended that the reply require the user to take more action than just a single keystroke, such as typing the full word yes or no followed by a newline.</p>
<p><strong>y-or-n-p</strong> types out a message (if supplied), reads an answer in some <em>implementation-dependent</em> manner (intended to be short and simple, such as reading a single character such as Y or N). <strong>yes-or-no-p</strong> types out a message (if supplied), attracts the user’s attention (for example, by ringing the terminal’s bell), and reads an answer in some <em>implementation-dependent</em> manner (intended to be multiple characters, such as YES or NO).</p>
<p>If <em>format-control</em> is supplied and not <strong>nil</strong>, then a <strong>fresh-line</strong> operation is performed; then a message is printed as if <em>format-control</em> and <em>arguments</em> were given to <strong>format</strong>. In any case, <strong>yes-or-no-p</strong> and <strong>y-or-n-p</strong> will provide a prompt such as “(Y or N)” or “(Yes or No)” if appropriate.</p>
<p>All input and output are performed using <em>query I/O</em>.</p>
<p><strong>Examples:</strong></p>
<p>(y-or-n-p &quot;(t or nil) given by&quot;)</p>
<p>▷ (t or nil) given by (Y or N) Y</p>
<p><em>→ true</em></p>
<p>(yes-or-no-p &quot;a ~S message&quot; ’frightening)</p>
<p>▷ a FRIGHTENING message (Yes or No) no</p>
<p><em>→ false</em></p>
<p>(y-or-n-p &quot;Produce listing file?&quot;)</p>
<p>▷ Produce listing file?</p>
<p>▷ Please respond with Y or N. n</p>
<p><em>→ false</em></p>
<p><strong>Side Effects:</strong></p>
<p>Output to and input from <em>query I/O</em> will occur.</p>
<p><strong>Affected By:</strong></p>
<p><strong>*query-io*</strong>.</p>
<p><strong>See Also:</strong></p>
<p><strong>format</strong></p>
<p><strong>Notes:</strong></p>
<p><strong>yes-or-no-p</strong> and <strong>yes-or-no-p</strong> do not add question marks to the end of the prompt string, so any desired question mark or other punctuation should be explicitly included in the text query.</p>
<p>Streams <strong>21–45</strong></p>
<p><strong>make-synonym-stream</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>make-synonym-stream</strong> <em>symbol → synonym-stream</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>symbol</em>—a <em>symbol</em> that names a <em>dynamic variable</em>.</p>
<p><em>synonym-stream</em>—a <em>synonym stream</em>.</p>
<p><strong>Description:</strong></p>
<p>Returns a <em>synonym stream</em> whose <em>synonym stream symbol</em> is <em>symbol</em>.</p>
<p><strong>Examples:</strong></p>
<p>(setq a-stream (make-string-input-stream &quot;a-stream&quot;)</p>
<p>b-stream (make-string-input-stream &quot;b-stream&quot;))</p>
<p><em>→</em> #&lt;String Input Stream&gt;</p>
<p>(setq s-stream (make-synonym-stream ’c-stream))</p>
<p><em>→</em> #&lt;SYNONYM-STREAM for C-STREAM&gt;</p>
<p>(setq c-stream a-stream)</p>
<p><em>→</em> #&lt;String Input Stream&gt;</p>
<p>(read s-stream) <em>→</em> A-STREAM</p>
<p>(setq c-stream b-stream)</p>
<p><em>→</em> #&lt;String Input Stream&gt;</p>
<p>(read s-stream) <em>→</em> B-STREAM</p>
<p><strong>Exceptional Situations:</strong></p>
<p>Should signal <strong>type-error</strong> if its argument is not a <em>symbol</em>.</p>
<p><strong>See Also:</strong></p>
<p>Section 21.1 (Stream Concepts)</p>
<p><strong>synonym-stream-symbol</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>synonym-stream-symbol</strong> <em>synonym-stream → symbol</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>synonym-stream</em>—a <em>synonym stream</em>.</p>
<p><em>symbol</em>—a <em>symbol</em>.</p>
<p><strong>Description:</strong></p>
<p>Returns the <em>symbol</em> whose <strong>symbol-value</strong> the <em>synonym-stream</em> is using.</p>
<p><strong>See Also:</strong></p>
<p><strong>make-synonym-stream</strong></p>
<p><strong>broadcast-stream-streams</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>broadcast-stream-streams</strong> <em>broadcast-stream → streams</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>broadcast-stream</em>—a <em>broadcast stream</em>.</p>
<p><em>streams</em>—a <em>list</em> of <em>streams</em>.</p>
<p><strong>Description:</strong></p>
<p>Returns a <em>list</em> of output <em>streams</em> that constitute all the <em>streams</em> to which the <em>broadcast-stream</em> is broadcasting.</p>
<p><strong>make-broadcast-stream</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>make-broadcast-stream</strong> &amp;rest <em>streams → broadcast-stream</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>stream</em>—an <em>output stream</em>.</p>
<p><em>broadcast-stream</em>—a <em>broadcast stream</em>.</p>
<p><strong>Description:</strong></p>
<p>Returns a <em>broadcast stream</em>.</p>
<p><strong>Examples:</strong></p>
<p>(setq a-stream (make-string-output-stream)</p>
<p>b-stream (make-string-output-stream)) <em>→</em> #&lt;String Output Stream&gt;</p>
<p>(format (make-broadcast-stream a-stream b-stream)</p>
<p>&quot;this will go to both streams&quot;) <em>→</em> NIL</p>
<p>(get-output-stream-string a-stream) <em>→</em> &quot;this will go to both streams&quot;</p>
<p>Streams <strong>21–47</strong></p>
<p>(get-output-stream-string b-stream) <em>→</em> &quot;this will go to both streams&quot;</p>
<p><strong>Exceptional Situations:</strong></p>
<p>Should signal an error of <em>type</em> <strong>type-error</strong> if any <em>stream</em> is not an <em>output stream</em>.</p>
<p><strong>See Also:</strong></p>
<p><strong>broadcast-stream-streams</strong></p>
<p><strong>make-two-way-stream</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>make-two-way-stream</strong> <em>input-stream output-stream → two-way-stream</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>input-stream</em>—a <em>stream</em>.</p>
<p><em>output-stream</em>—a <em>stream</em>.</p>
<p><em>two-way-stream</em>—a <em>two-way stream</em>.</p>
<p><strong>Description:</strong></p>
<p>Returns a <em>two-way stream</em> that gets its input from <em>input-stream</em> and sends its output to <em>output-stream</em>.</p>
<p><strong>Examples:</strong></p>
<p>(with-output-to-string (out)</p>
<p>(with-input-from-string (in &quot;input...&quot;)</p>
<p>(let ((two (make-two-way-stream in out)))</p>
<p>(format two &quot;output...&quot;)</p>
<p>(setq what-is-read (read two))))) <em>→</em> &quot;output...&quot;</p>
<p>what-is-read <em>→</em> INPUT...</p>
<p><strong>Exceptional Situations:</strong></p>
<p>Should signal an error of <em>type</em> <strong>type-error</strong> if <em>input-stream</em> is not an <em>input stream</em>. Should signal an error of <em>type</em> <strong>type-error</strong> if <em>output-stream</em> is not an <em>output stream</em>.</p>
<p>&lt;b&gt;&lt;sup&gt;two-way-stream-input-stream, two-way-stream&lt;/sup&gt; output-stream&lt;/b&gt; &lt;i&gt;Function&lt;/i&gt;</p>
<p><strong>Syntax:</strong></p>
<p><strong>two-way-stream-input-stream</strong> <em>two-way-stream → input-stream</em></p>
<p><strong>two-way-stream-output-stream</strong> <em>two-way-stream → output-stream</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>two-way-stream</em>—a <em>two-way stream</em>.</p>
<p><em>input-stream</em>—an <em>input stream</em>.</p>
<p><em>output-stream</em>—an <em>output stream</em>.</p>
<p><strong>Description:</strong></p>
<p><strong>two-way-stream-input-stream</strong> returns the <em>stream</em> from which <em>two-way-stream</em> receives input. <strong>two-way-stream-output-stream</strong> returns the <em>stream</em> to which <em>two-way-stream</em> sends output.</p>
<p>&lt;b&gt;&lt;sup&gt;echo-stream-input-stream, echo-stream-output&lt;/sup&gt; stream&lt;/b&gt; &lt;i&gt;Function&lt;/i&gt;</p>
<p><strong>Syntax:</strong></p>
<p><strong>echo-stream-input-stream</strong> <em>echo-stream → input-stream</em></p>
<p><strong>echo-stream-output-stream</strong> <em>echo-stream → output-stream</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>echo-stream</em>—an <em>echo stream</em>.</p>
<p><em>input-stream</em>—an <em>input stream</em>.</p>
<p><strong>output-stream</strong>—an <em>output stream</em>.</p>
<p><strong>Description:</strong></p>
<p><strong>echo-stream-input-stream</strong> returns the <em>input stream</em> from which <em>echo-stream</em> receives input. <strong>echo-stream-output-stream</strong> returns the <em>output stream</em> to which <em>echo-stream</em> sends output.</p>
<p>Streams <strong>21–49</strong></p>
<p><strong>make-echo-stream</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>make-echo-stream</strong> <em>input-stream output-stream → echo-stream</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>input-stream</em>—an <em>input stream</em>.</p>
<p><em>output-stream</em>—an <em>output stream</em>.</p>
<p><em>echo-stream</em>—an <em>echo stream</em>.</p>
<p><strong>Description:</strong></p>
<p>Creates and returns an <em>echo stream</em> that takes input from <em>input-stream</em> and sends output to <em>output-stream</em>.</p>
<p><strong>Examples:</strong></p>
<p>(let ((out (make-string-output-stream)))</p>
<p>(with-open-stream</p>
<p>(s (make-echo-stream</p>
<p>(make-string-input-stream &quot;this-is-read-and-echoed&quot;)</p>
<p>out))</p>
<p>(read s)</p>
<p>(format s &quot; * this-is-direct-output&quot;)</p>
<p>(get-output-stream-string out)))</p>
<p><em>→</em> &quot;this-is-read-and-echoed * this-is-direct-output&quot;</p>
<p><strong>See Also:</strong></p>
<p><strong>echo-stream-input-stream</strong>, <strong>echo-stream-output-stream</strong>, <strong>make-two-way-stream concatenated-stream-streams</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>concatenated-stream-streams</strong> <em>concatenated-stream → streams</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>concatenated-stream</em> – a <em>concatenated stream</em>.</p>
<p><em>streams</em>—a <em>list</em> of <em>input streams</em>.</p>
<p><strong>Description:</strong></p>
<p>Returns a <em>list</em> of <em>input streams</em> that constitute the ordered set of <em>streams</em> the <em>concatenated-stream</em> still has to read from, starting with the current one it is reading from. The list may be <em>empty</em> if no more <em>streams</em> remain to be read.</p>
<p>The consequences are undefined if the <em>list structure</em> of the <em>streams</em> is ever modified. <strong>make-concatenated-stream</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>make-concatenated-stream</strong> &amp;rest <em>input-streams → concatenated-stream</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>input-stream</em>—an <em>input stream</em>.</p>
<p><em>concatenated-stream</em>—a <em>concatenated stream</em>.</p>
<p><strong>Description:</strong></p>
<p>Returns a <em>concatenated stream</em> that has the indicated <em>input-streams</em> initially associated with it. <strong>Examples:</strong></p>
<p>(read (make-concatenated-stream</p>
<p>(make-string-input-stream &quot;1&quot;)</p>
<p>(make-string-input-stream &quot;2&quot;))) <em>→</em> 12</p>
<p><strong>Exceptional Situations:</strong></p>
<p>Should signal <strong>type-error</strong> if any argument is not an <em>input stream</em>.</p>
<p><strong>See Also:</strong></p>
<p><strong>concatenated-stream-streams</strong></p>
<p>Streams <strong>21–51</strong></p>
<p><strong>get-output-stream-string</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>get-output-stream-string</strong> <em>string-output-stream → string</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>string-output-stream</em>—a <em>stream</em>.</p>
<p><em>string</em>—a <em>string</em>.</p>
<p><strong>Description:</strong></p>
<p>Returns a <em>string</em> containing, in order, all the <em>characters</em> that have been output to <em>string-output stream</em>. This operation clears any <em>characters</em> on <em>string-output-stream</em>, so the <em>string</em> contains only those <em>characters</em> which have been output since the last call to <strong>get-output-stream-string</strong> or since the creation of the <em>string-output-stream</em>, whichever occurred most recently.</p>
<p><strong>Examples:</strong></p>
<p>(setq a-stream (make-string-output-stream)</p>
<p>a-string &quot;abcdefghijklm&quot;) <em>→</em> &quot;abcdefghijklm&quot;</p>
<p>(write-string a-string a-stream) <em>→</em> &quot;abcdefghijklm&quot;</p>
<p>(get-output-stream-string a-stream) <em>→</em> &quot;abcdefghijklm&quot;</p>
<p>(get-output-stream-string a-stream) <em>→</em> &quot;&quot;</p>
<p><strong>Side Effects:</strong></p>
<p>The <em>string-output-stream</em> is cleared.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>The consequences are undefined if <em>stream-output-string</em> is <em>closed</em>.</p>
<p>The consequences are undefined if <em>string-output-stream</em> is a <em>stream</em> that was not produced by <strong>make-string-output-stream</strong>. The consequences are undefined if <em>string-output-stream</em> was created implicitly by <strong>with-output-to-string</strong> or <strong>format</strong>.</p>
<p><strong>See Also:</strong></p>
<p><strong>make-string-output-stream</strong></p>
<p><strong>make-string-input-stream</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>make-string-input-stream</strong> <em>string</em> &amp;optional <em>start end → string-stream</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>string</em>—a <em>string</em>.</p>
<p><em>start</em>, <em>end</em>—<em>bounding index designators</em> of <em>string</em>. The defaults for <em>start</em> and <em>end</em> are 0 and <strong>nil</strong>, respectively.</p>
<p><em>string-stream</em>—an <em>input string stream</em>.</p>
<p><strong>Description:</strong></p>
<p>Returns an <em>input string stream</em>. This <em>stream</em> will supply, in order, the <em>characters</em> in the substring of <em>string bounded</em> by <em>start</em> and <em>end</em>. After the last <em>character</em> has been supplied, the <em>string stream</em> will then be at <em>end of file</em>.</p>
<p><strong>Examples:</strong></p>
<p>(let ((string-stream (make-string-input-stream &quot;1 one &quot;)))</p>
<p>(list (read string-stream nil nil)</p>
<p>(read string-stream nil nil)</p>
<p>(read string-stream nil nil)))</p>
<p><em>→</em> (1 ONE NIL)</p>
<p>(read (make-string-input-stream &quot;prefixtargetsuffix&quot; 6 12)) <em>→</em> TARGET</p>
<p><strong>See Also:</strong></p>
<p><strong>with-input-from-string</strong></p>
<p><strong>make-string-output-stream</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>make-string-output-stream</strong> &amp;key <em>element-type → string-stream</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>element-type</em>—a <em>type specifier</em> . The default is <strong>character</strong>.</p>
<p><em>string-stream</em>—an <em>output string stream</em>.</p>
<p>Streams <strong>21–53</strong></p>
<p><strong>Description:</strong></p>
<p>Returns an <em>output string stream</em> that accepts <em>characters</em> and makes available (via <strong>get-output-stream-string</strong>) a <em>string</em> that contains the <em>characters</em> that were actually output.</p>
<p>The <em>element-type</em> names the <em>type</em> of the <em>elements</em> of the <em>string</em>; a <em>string</em> is constructed of the most specialized <em>type</em> that can accommodate <em>elements</em> of that <em>element-type</em>.</p>
<p><strong>Examples:</strong></p>
<p>(let ((s (make-string-output-stream)))</p>
<p>(write-string &quot;testing... &quot; s)</p>
<p>(prin1 1234 s)</p>
<p>(get-output-stream-string s))</p>
<p><em>→</em> &quot;testing... 1234&quot;</p>
<p>None..</p>
<p><strong>See Also:</strong></p>
<p><strong>get-output-stream-string</strong>, <strong>with-output-to-string</strong></p>
<p><strong>with-input-from-string</strong> <em>Macro</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>with-input-from-string</strong> (<em>var string</em> &amp;key <em>index start end</em>) <em>{declaration}</em>* <em>{form}</em>*</p>
<p><em>→ {result}</em>*</p>
<p><strong>Arguments and Values:</strong></p>
<p><em>var</em>—a <em>variable name</em>.</p>
<p><em>string</em>—a <em>form</em>; evaluated to produce a <em>string</em>.</p>
<p><em>index</em>—a <em>place</em>.</p>
<p><em>start</em>, <em>end</em>—<em>bounding index designators</em> of <em>string</em>. The defaults for <em>start</em> and <em>end</em> are 0 and <strong>nil</strong>, respectively.</p>
<p><em>declaration</em>—a <strong>declare</strong> <em>expression</em>; not evaluated.</p>
<p><em>forms</em>—an <em>implicit progn</em>.</p>
<p><em>result</em>—the <em>values</em> returned by the <em>forms</em>.</p>
<p><strong>Description:</strong></p>
<p>Creates an <em>input string stream</em>, provides an opportunity to perform operations on the <em>stream</em> (returning zero or more <em>values</em>), and then closes the <em>string stream</em>.</p>
<p><em>String</em> is evaluated first, and <em>var</em> is bound to a character <em>input string stream</em> that supplies <em>characters</em> from the subsequence of the resulting <em>string bounded</em> by <em>start</em> and <em>end</em>. The body is executed as an <em>implicit progn</em>.</p>
<p>The <em>input string stream</em> is automatically closed on exit from <strong>with-input-from-string</strong>, no matter whether the exit is normal or abnormal. The <em>input string stream</em> to which the <em>variable var</em> is <em>bound</em> has <em>dynamic extent</em>; its <em>extent</em> ends when the <em>form</em> is exited.</p>
<p>The <em>index</em> is a pointer within the <em>string</em> to be advanced. If <strong>with-input-from-string</strong> is exited normally, then <em>index</em> will have as its <em>value</em> the index into the <em>string</em> indicating the first character not read which is (length <em>string</em>) if all characters were used. The place specified by <em>index</em> is not updated as reading progresses, but only at the end of the operation.</p>
<p><em>start</em> and <em>index</em> may both specify the same variable, which is a pointer within the <em>string</em> to be advanced, perhaps repeatedly by some containing loop.</p>
<p>The consequences are undefined if an attempt is made to <em>assign</em> the <em>variable var</em>.</p>
<p><strong>Examples:</strong></p>
<p>(with-input-from-string (s &quot;XXX1 2 3 4xxx&quot;</p>
<p>:index<!-- --> ind</p>
<p>:start<!-- --> 3 <!-- -->:end<!-- --> 10)</p>
<p>(+ (read s) (read s) (read s))) <em>→</em> 6</p>
<p>ind <em>→</em> 9</p>
<p>(with-input-from-string (s &quot;Animal Crackers&quot; <!-- -->:index<!-- --> j <!-- -->:start<!-- --> 6)</p>
<p>(read s)) <em>→</em> CRACKERS</p>
<p>The variable j is set to 15.</p>
<p><strong>Side Effects:</strong></p>
<p>The <em>value</em> of the <em>place</em> named by <em>index</em>, if any, is modified.</p>
<p><strong>See Also:</strong></p>
<p><strong>make-string-input-stream</strong>, Section 3.6 (Traversal Rules and Side Effects)</p>
<p><strong>with-output-to-string</strong> <em>Macro</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>with-output-to-string</strong> (<em>var</em> &amp;optional <em>string-form</em> &amp;key <em>element-type</em>) <em>{declaration}</em>* <em>{form}</em>* <em>→ {result}</em>*</p>
<p><strong>Arguments and Values:</strong></p>
<p><em>var</em>—a <em>variable name</em>.</p>
<p>Streams <strong>21–55</strong></p>
<p><strong>with-output-to-string</strong></p>
<p><em>string-form</em>—a <em>form</em> or <strong>nil</strong>; if <em>non-nil</em>, evaluated to produce <em>string</em>.</p>
<p><em>string</em>—a <em>string</em> that has a <em>fill pointer</em> .</p>
<p><em>element-type</em>—a <em>type specifier</em> ; evaluated. The default is <strong>character</strong>.</p>
<p><em>declaration</em>—a <strong>declare</strong> <em>expression</em>; not evaluated.</p>
<p><em>forms</em>—an <em>implicit progn</em>.</p>
<p><em>results</em>—If a <em>string-form</em> is not supplied or <strong>nil</strong>, a <em>string</em>; otherwise, the <em>values</em> returned by the <em>forms</em>.</p>
<p><strong>Description:</strong></p>
<p><strong>with-output-to-string</strong> creates a character <em>output stream</em>, performs a series of operations that may send results to this <em>stream</em>, and then closes the <em>stream</em>.</p>
<p>The <em>element-type</em> names the <em>type</em> of the elements of the <em>stream</em>; a <em>stream</em> is constructed of the most specialized <em>type</em> that can accommodate elements of the given <em>type</em>.</p>
<p>The body is executed as an <em>implicit progn</em> with <em>var</em> bound to an <em>output string stream</em>. All output to that <em>string stream</em> is saved in a <em>string</em>.</p>
<p>If <em>string</em> is supplied, <em>element-type</em> is ignored, and the output is incrementally appended to <em>string</em> as if by use of <strong>vector-push-extend</strong>.</p>
<p>The <em>output stream</em> is automatically closed on exit from <strong>with-output-from-string</strong>, no matter whether the exit is normal or abnormal. The <em>output string stream</em> to which the <em>variable var</em> is <em>bound</em> has <em>dynamic extent</em>; its <em>extent</em> ends when the <em>form</em> is exited.</p>
<p>If no <em>string</em> is provided, then <strong>with-output-from-string</strong> produces a <em>stream</em> that accepts characters and returns a <em>string</em> of the indicated <em>element-type</em>. If <em>string</em> is provided, <strong>with-output-to-string</strong> returns the results of evaluating the last <em>form</em>.</p>
<p>The consequences are undefined if an attempt is made to <em>assign</em> the <em>variable var</em>.</p>
<p><strong>Examples:</strong></p>
<p>(setq fstr (make-array ’(0) <!-- -->:element-type<!-- --> ’base-char</p>
<p>:fill-pointer<!-- --> 0 <!-- -->:adjustable<!-- --> t)) <em>→</em> &quot;&quot;</p>
<p>(with-output-to-string (s fstr)</p>
<p>(format s &quot;here’s some output&quot;)</p>
<p>(input-stream-p s)) <em>→ false</em></p>
<p>fstr <em>→</em> &quot;here’s some output&quot;</p>
<p><strong>Side Effects:</strong></p>
<p>The <em>string</em> is modified.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>The consequences are undefined if destructive modifications are performed directly on the <em>string</em> during the <em>dynamic extent</em> of the call.</p>
<p><strong>See Also:</strong></p>
<p>&lt;b&gt;make-string-output-stream&lt;/b&gt;, &lt;b&gt;vector-push-extend&lt;/b&gt;, Section 3.6 (Traversal Rules and Side Effects) &lt;sup&gt;&lt;i&gt;∗&lt;/i&gt;&lt;b&gt;debug-io&lt;/b&gt;&lt;i&gt;∗&lt;/i&gt;&lt;b&gt;,&lt;/b&gt; &lt;i&gt;∗&lt;/i&gt;&lt;b&gt;error-output&lt;/b&gt;&lt;i&gt;∗&lt;/i&gt;&lt;b&gt;,&lt;/b&gt; &lt;i&gt;∗&lt;/i&gt;&lt;b&gt;query-io&lt;/b&gt;&lt;i&gt;∗&lt;/i&gt;&lt;b&gt;,&lt;/b&gt; &lt;i&gt;∗&lt;/i&gt;&lt;b&gt;standard&lt;/b&gt;&lt;/sup&gt; input&lt;/b&gt;&lt;i&gt;∗&lt;/i&gt;&lt;b&gt;,&lt;/b&gt; &lt;i&gt;∗&lt;/i&gt;&lt;b&gt;standard-output&lt;/b&gt;&lt;i&gt;∗&lt;/i&gt;&lt;b&gt;,&lt;/b&gt; &lt;i&gt;∗&lt;/i&gt;&lt;b&gt;trace-output&lt;/b&gt;&lt;i&gt;∗ Variable&lt;/i&gt;</p>
<p><strong>Value Type:</strong></p>
<p>For <strong>*standard-input*</strong>: an <em>input stream</em></p>
<p>For <strong>*error-output*</strong>, <strong>*standard-output*</strong>, and <strong>*trace-output*</strong>: an <em>output stream</em>.</p>
<p>For <strong>*debug-io*</strong>, <strong>*query-io*</strong>: a <em>bidirectional stream</em>.</p>
<p><strong>Initial Value:</strong></p>
<p><em>implementation-dependent</em>, but it must be an <em>open stream</em> that is not a <em>generalized synonym stream</em> to an <em>I/O customization variables</em> but that might be a <em>generalized synonym stream</em> to the value of some <em>I/O customization variable</em>. The initial value might also be a <em>generalized synonym stream</em> to either the <em>symbol</em> <strong>*terminal-io*</strong> or to the <em>stream</em> that is its <em>value</em>.</p>
<p><strong>Description:</strong></p>
<p>These <em>variables</em> are collectively called the <em>standardized I/O customization variables</em>. They can be <em>bound</em> or <em>assigned</em> in order to change the default destinations for input and/or output used by various <em>standardized operators</em> and facilities.</p>
<p>The <em>value</em> of <strong>*debug-io*</strong>, called <em>debug I/O</em>, is a <em>stream</em> to be used for interactive debugging purposes.</p>
<p>The <em>value</em> of <strong>*error-output*</strong>, called <em>error output</em>, is a <em>stream</em> to which warnings and non-interactive error messages should be sent.</p>
<p>The <em>value</em> of <strong>*query-io*</strong>, called <em>query I/O</em>, is a <em>bidirectional stream</em> to be used when asking questions of the user. The question should be output to this <em>stream</em>, and the answer read from it.</p>
<p>The <em>value</em> of <strong>*standard-input*</strong>, called <em>standard input</em>, is a <em>stream</em> that is used by many <em>operators</em> as a default source of input when no specific <em>input stream</em> is explicitly supplied.</p>
<p>The <em>value</em> of <strong>*standard-output*</strong>, called <em>standard output</em>, is a <em>stream</em> that is used by many <em>operators</em> as a default destination for output when no specific <em>output stream</em> is explicitly supplied.</p>
<p>The <em>value</em> of <strong>*trace-output*</strong>, called <em>trace output</em>, is the <em>stream</em> on which traced functions (see <strong>trace</strong>) and the <strong>time</strong> <em>macro</em> print their output.</p>
<p>Streams <strong>21–57</strong></p>
<p><em>∗</em><strong>debug-io</strong><em>∗</em>**,** <em>∗</em><strong>error-output</strong><em>∗</em>**,** <em>∗</em><strong>query-io</strong><em>∗</em>**,** <em>. . .</em></p>
<p><strong>Examples:</strong></p>
<p>(with-output-to-string (*error-output*)</p>
<p>(warn &quot;this string is sent to *error-output*&quot;))</p>
<p><em>→</em> &quot;Warning: this string is sent to *error-output*</p>
<p>&quot; ;The exact format of this string is <em>implementation-dependent</em>.</p>
<p>(with-input-from-string (*standard-input* &quot;1001&quot;)</p>
<p>(+ 990 (read))) <em>→</em> 1991</p>
<p>(progn (setq out (with-output-to-string (*standard-output*)</p>
<p>(print &quot;print and format t send things to&quot;)</p>
<p>(format t &quot;*standard-output* now going to a string&quot;)))</p>
<p>:done<!-- -->)</p>
<p><em>→</em> <!-- -->:DONE</p>
<p>out</p>
<p><em>→</em> &quot;</p>
<p>&quot;print and format t send things to&quot; *standard-output* now going to a string&quot;</p>
<p>(defun fact (n) (if (&lt; n 2) 1 (* n (fact (- n 1)))))</p>
<p><em>→</em> FACT</p>
<p>(trace fact)</p>
<p><em>→</em> (FACT)</p>
<p>;; Of course, the format of traced output is implementation-dependent.</p>
<p>(with-output-to-string (*trace-output*)</p>
<p>(fact 3))</p>
<p><em>→</em> &quot;</p>
<p>1 Enter FACT 3</p>
<p>| 2 Enter FACT 2</p>
<p>| 3 Enter FACT 1</p>
<p>| 3 Exit FACT 1</p>
<p>| 2 Exit FACT 2</p>
<p>1 Exit FACT 6&quot;</p>
<p><strong>See Also:</strong></p>
<p><strong>*terminal-io*</strong>, <strong>synonym-stream</strong>, <strong>time</strong>, <strong>trace</strong>, Chapter 9 (Conditions), Chapter 23 (Reader), Chapter 22 (Printer)</p>
<p><strong>Notes:</strong></p>
<p>The intent of the constraints on the initial <em>value</em> of the <em>I/O customization variables</em> is to ensure that it is always safe to <em>bind</em> or <em>assign</em> such a <em>variable</em> to the <em>value</em> of another <em>I/O customization</em></p>
<p><em>variable</em>, without unduly restricting <em>implementation</em> flexibility.</p>
<p>It is common for an <em>implementation</em> to make the initial <em>values</em> of <strong>*debug-io*</strong> and <strong>*query-io*</strong> be the <em>same stream</em>, and to make the initial <em>values</em> of <strong>*error-output*</strong> and <strong>*standard-output*</strong> be the <em>same stream</em>.</p>
<p>The functions <strong>y-or-n-p</strong> and <strong>yes-or-no-p</strong> use <em>query I/O</em> for their input and output.</p>
<p>In the normal <em>Lisp read-eval-print loop</em>, input is read from <em>standard input</em>. Many input functions, including <strong>read</strong> and <strong>read-char</strong>, take a <em>stream</em> argument that defaults to <em>standard input</em>.</p>
<p>In the normal <em>Lisp read-eval-print loop</em>, output is sent to <em>standard output</em>. Many output functions, including <strong>print</strong> and <strong>write-char</strong>, take a <em>stream</em> argument that defaults to <em>standard output</em>.</p>
<p>A program that wants, for example, to divert output to a file should do so by <em>binding</em> <strong>*standard-output*</strong>; that way error messages sent to <strong>*error-output*</strong> can still get to the user by going through <strong>*terminal-io*</strong> (if <strong>*error-output*</strong> is bound to <strong>*terminal-io*</strong>), which is usually what is desired.</p>
<p><em>∗</em><strong>terminal-io</strong><em>∗ Variable</em></p>
<p><strong>Value Type:</strong></p>
<p>a <em>bidirectional stream</em>.</p>
<p><strong>Initial Value:</strong></p>
<p><em>implementation-dependent</em>, but it must be an <em>open stream</em> that is not a <em>generalized synonym stream</em> to an <em>I/O customization variables</em> but that might be a <em>generalized synonym stream</em> to the <em>value</em> of some <em>I/O customization variable</em>.</p>
<p><strong>Description:</strong></p>
<p>The <em>value</em> of <strong>*terminal-io*</strong>, called <em>terminal I/O</em>, is ordinarily a <em>bidirectional stream</em> that connects to the user’s console. Typically, writing to this <em>stream</em> would cause the output to appear on a display screen, for example, and reading from the <em>stream</em> would accept input from a keyboard. It is intended that standard input functions such as <strong>read</strong> and <strong>read-char</strong>, when used with this <em>stream</em>, cause echoing of the input into the output side of the <em>stream</em>. The means by which this is accomplished are <em>implementation-dependent</em>.</p>
<p>The effect of changing the <em>value</em> of <strong>*terminal-io*</strong>, either by <em>binding</em> or <em>assignment</em>, is <em>implementation-defined</em>.</p>
<p><strong>Examples:</strong></p>
<p>(progn (prin1 ’foo) (prin1 ’bar *terminal-io*))</p>
<p>Streams <strong>21–59</strong></p>
<p>▷ FOOBAR</p>
<p><em>→</em> BAR</p>
<p>(with-output-to-string (*standard-output*)</p>
<p>(prin1 ’foo)</p>
<p>(prin1 ’bar *terminal-io*))</p>
<p>▷ BAR</p>
<p><em>→</em> &quot;FOO&quot;</p>
<p><strong>See Also:</strong></p>
<p><strong>*debug-io*</strong>, <strong>*error-output*</strong>, <strong>*query-io*</strong>, <strong>*standard-input*</strong>, <strong>*standard-output*</strong>, <strong>*trace-output* stream-error</strong> <em>Condition Type</em></p>
<p><strong>Class Precedence List:</strong></p>
<p><strong>stream-error</strong>, <strong>error</strong>, <strong>serious-condition</strong>, <strong>condition</strong>, <strong>t</strong></p>
<p><strong>Description:</strong></p>
<p>The <em>type</em> <strong>stream-error</strong> consists of error conditions that are related to receiving input from or sending output to a <em>stream</em>. The “offending stream” is initialized by the <!-- -->:stream<!-- --> initialization argument to <strong>make-condition</strong>, and is <em>accessed</em> by the <em>function</em> <strong>stream-error-stream</strong>.</p>
<p><strong>See Also:</strong></p>
<p><strong>stream-error-stream</strong></p>
<p><strong>stream-error-stream</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>stream-error-stream</strong> <em>condition → stream</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>condition</em>—a <em>condition</em> of <em>type</em> <strong>stream-error</strong>.</p>
<p><em>stream</em>—a <em>stream</em>.</p>
<p><strong>Description:</strong></p>
<p>Returns the offending <em>stream</em> of a <em>condition</em> of <em>type</em> <strong>stream-error</strong>.</p>
<p><strong>Examples:</strong></p>
<p>(with-input-from-string (s &quot;(FOO&quot;)</p>
<p>(handler-case (read s)</p>
<p>(end-of-file (c)</p>
<p>(format nil &quot;~&amp;End of file on ~S.&quot; (stream-error-stream c)))))</p>
<p>&quot;End of file on #&lt;String Stream&gt;.&quot;</p>
<p><strong>See Also:</strong></p>
<p><strong>stream-error</strong>, Chapter 9 (Conditions)</p>
<p><strong>end-of-file</strong> <em>Condition Type</em></p>
<p><strong>Class Precedence List:</strong></p>
<p><strong>end-of-file</strong>, <strong>stream-error</strong>, <strong>error</strong>, <strong>serious-condition</strong>, <strong>condition</strong>, <strong>t</strong></p>
<p><strong>Description:</strong></p>
<p>The <em>type</em> <strong>end-of-file</strong> consists of error conditions related to read operations that are done on <em>streams</em> that have no more data.</p>
<p><strong>See Also:</strong></p>
<p><strong>stream-error-stream</strong></p>
<p>Streams <strong>21–61</strong></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/lisp-docs/cl-language-reference/tree/develop/docs/chap-21/cb-b-stream-concepts.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/cl-language-reference/docs/category/21-streams"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">21. Streams</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cl-language-reference/docs/chap-21/intro"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">intro</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#2111-introduction-to-streams" class="table-of-contents__link toc-highlight">21.1.1 Introduction to Streams</a><ul><li><a href="#21111-abstract-classifications-of-streams" class="table-of-contents__link toc-highlight">21.1.1.1 Abstract Classifications of Streams</a><ul><li><a href="#211111-input" class="table-of-contents__link toc-highlight">21.1.1.1.1 Input</a></li><li><a href="#211112-open-and-closed-streams" class="table-of-contents__link toc-highlight">21.1.1.1.2 Open and Closed Streams</a></li><li><a href="#211113-interactive-streams" class="table-of-contents__link toc-highlight">21.1.1.1.3 Interactive Streams</a></li></ul></li><li><a href="#21112-abstract-classifications-of-streams" class="table-of-contents__link toc-highlight">21.1.1.2 Abstract Classifications of Streams</a><ul><li><a href="#211121-file-streams" class="table-of-contents__link toc-highlight">21.1.1.2.1 File Streams</a></li></ul></li><li><a href="#21113-other-subclasses-of-stream" class="table-of-contents__link toc-highlight">21.1.1.3 Other Subclasses of Stream</a></li></ul></li><li><a href="#2112-stream-variables" class="table-of-contents__link toc-highlight">21.1.2 Stream Variables</a></li><li><a href="#2113-stream-arguments-to-standardized-functions" class="table-of-contents__link toc-highlight">21.1.3 Stream Arguments to Standardized Functions</a></li><li><a href="#2114-restrictions-on-composite-streams" class="table-of-contents__link toc-highlight">21.1.4 Restrictions on Composite Streams</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cl-language-reference/docs/intro">Cl Technical Reference</a></li><li class="footer__item"><a href="https://lisp-docs.github.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">CL Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/common-lisp" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/hhk46CE" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.reddit.com/r/common_lisp" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://irclog.tymoon.eu/libera/commonlisp" target="_blank" rel="noopener noreferrer" class="footer__link-item">IRC<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cl-language-reference/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/lisp-docs/cl-language-reference/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 LISP Docs, MIT License. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>