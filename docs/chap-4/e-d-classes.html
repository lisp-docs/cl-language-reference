<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-chap-4/e-d-classes" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">4.3 Classes | Common Lisp (New) Language Reference</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://lisp-docs.github.io/cl-language-reference/img/1024px-Lisp_logo.svg.png"><meta data-rh="true" name="twitter:image" content="https://lisp-docs.github.io/cl-language-reference/img/1024px-Lisp_logo.svg.png"><meta data-rh="true" property="og:url" content="https://lisp-docs.github.io/cl-language-reference/docs/chap-4/e-d-classes"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="google-site-verification" content="Vzaw013_bfdKeUVG89Ch3W1zC9_vH9ID2dPB9Dz0vr0"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="4.3 Classes | Common Lisp (New) Language Reference"><meta data-rh="true" name="description" content="4.3.1 Introduction to Classes"><meta data-rh="true" property="og:description" content="4.3.1 Introduction to Classes"><link data-rh="true" rel="icon" href="/cl-language-reference/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lisp-docs.github.io/cl-language-reference/docs/chap-4/e-d-classes"><link data-rh="true" rel="alternate" href="https://lisp-docs.github.io/cl-language-reference/docs/chap-4/e-d-classes" hreflang="en"><link data-rh="true" rel="alternate" href="https://lisp-docs.github.io/cl-language-reference/docs/chap-4/e-d-classes" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://C1F2Q5VM6X-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/cl-language-reference/blog/rss.xml" title="Common Lisp (New) Language Reference RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cl-language-reference/blog/atom.xml" title="Common Lisp (New) Language Reference Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8TJCE4NSF8"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-8TJCE4NSF8",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Common Lisp (New) Language Reference" href="/cl-language-reference/opensearch.xml"><link rel="stylesheet" href="/cl-language-reference/assets/css/styles.b4b9397a.css">
<script src="/cl-language-reference/assets/js/runtime~main.82d8517b.js" defer="defer"></script>
<script src="/cl-language-reference/assets/js/main.6fef6d3b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cl-language-reference/"><div class="navbar__logo"><img src="/cl-language-reference/img/logo.svg" alt="LISP Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/cl-language-reference/img/logo.svg" alt="LISP Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">CL Technical Reference </b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cl-language-reference/docs/intro">The CL Reference</a><a href="https://lisp-docs.github.io/docs/intro" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">The Tutorial</a><a class="navbar__item navbar__link" href="/cl-language-reference/docs/whylisp">Why Lisp?</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/cl-language-reference/docs/contribute">Contribute!</a><a class="navbar__item navbar__link" href="/cl-language-reference/blog">Blog</a><a href="https://github.com/lisp-docs/cl-language-reference/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cl-language-reference/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/contents-and-figures">Contents and Figures</a><button aria-label="Expand sidebar category &#x27;Contents and Figures&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/1-introduction">1. Introduction</a><button aria-label="Expand sidebar category &#x27;1. Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/2-syntax">2. Syntax</a><button aria-label="Expand sidebar category &#x27;2. Syntax&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/3-evaluation-and-compilation">3. Evaluation and Compilation</a><button aria-label="Expand sidebar category &#x27;3. Evaluation and Compilation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/cl-language-reference/docs/category/4-types-and-classes">4. Types and Classes</a><button aria-label="Collapse sidebar category &#x27;4. Types and Classes&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cl-language-reference/docs/chap-4/e-b-introduction">4.1 Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cl-language-reference/docs/chap-4/e-c-types">4.2 Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cl-language-reference/docs/chap-4/e-d-classes">4.3 Classes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cl-language-reference/docs/category/44-types-and-classes-dictionary">4.4 Types and Classes Dictionary</a><button aria-label="Expand sidebar category &#x27;4.4 Types and Classes Dictionary&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/5-data-and-control-flow">5. Data and Control Flow</a><button aria-label="Expand sidebar category &#x27;5. Data and Control Flow&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/6-iteration">6. Iteration</a><button aria-label="Expand sidebar category &#x27;6. Iteration&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/7-objects">7. Objects</a><button aria-label="Expand sidebar category &#x27;7. Objects&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/8-structures">8. Structures</a><button aria-label="Expand sidebar category &#x27;8. Structures&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/9-conditions">9. Conditions</a><button aria-label="Expand sidebar category &#x27;9. Conditions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/10-symbols">10. Symbols</a><button aria-label="Expand sidebar category &#x27;10. Symbols&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/11-packages">11. Packages</a><button aria-label="Expand sidebar category &#x27;11. Packages&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/12-numbers">12. Numbers</a><button aria-label="Expand sidebar category &#x27;12. Numbers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/13-characters">13. Characters</a><button aria-label="Expand sidebar category &#x27;13. Characters&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/14-conses">14. Conses</a><button aria-label="Expand sidebar category &#x27;14. Conses&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/15-arrays">15. Arrays</a><button aria-label="Expand sidebar category &#x27;15. Arrays&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/16-strings">16. Strings</a><button aria-label="Expand sidebar category &#x27;16. Strings&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/17-sequences">17. Sequences</a><button aria-label="Expand sidebar category &#x27;17. Sequences&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/18-hash-tables">18. Hash Tables</a><button aria-label="Expand sidebar category &#x27;18. Hash Tables&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/19-filenames">19. Filenames</a><button aria-label="Expand sidebar category &#x27;19. Filenames&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/20-files">20. Files</a><button aria-label="Expand sidebar category &#x27;20. Files&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/21-streams">21. Streams</a><button aria-label="Expand sidebar category &#x27;21. Streams&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/22-printer">22. Printer</a><button aria-label="Expand sidebar category &#x27;22. Printer&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/23-reader">23. Reader</a><button aria-label="Expand sidebar category &#x27;23. Reader&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/24-system-construction">24. System Construction</a><button aria-label="Expand sidebar category &#x27;24. System Construction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/25-environment">25. Environment</a><button aria-label="Expand sidebar category &#x27;25. Environment&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/26-glossary">26. Glossary</a><button aria-label="Expand sidebar category &#x27;26. Glossary&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/contribute">Contribute to the CL Technical Reference</a><button aria-label="Expand sidebar category &#x27;Contribute to the CL Technical Reference&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cl-language-reference/docs/dictionary-entries">dictionary-entries</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/whylisp">Introduction</a><button aria-label="Expand sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/cl-language-reference/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cl-language-reference/docs/category/4-types-and-classes"><span itemprop="name">4. Types and Classes</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">4.3 Classes</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>4.3 Classes</h1>
<!-- -->
<p>While the object system is general enough to describe all <em>standardized classes</em> (including, for example, <span><b>number</b></span>, <span><b>hash-table</b></span>, and <span><b>symbol</b></span>), Figure 4–7 contains a list of <em>classes</em> that are especially relevant to understanding the object system.</p>
<p>|<strong>built-in-class method-combination standard-object class standard-class structure-class generic-function standard-generic-function structure-object method standard-method</strong>|</p>
<p>| :- |</p>
<p><strong>Figure 4–7. Object System Classes</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="431-introduction-to-classes">4.3.1 Introduction to Classes<a href="#431-introduction-to-classes" class="hash-link" aria-label="Direct link to 4.3.1 Introduction to Classes" title="Direct link to 4.3.1 Introduction to Classes">​</a></h2>
<!-- -->
<p>A <span><i>class</i></span> is an <span><i>object</i></span> that determines the structure and behavior of a set of other <span><i>objects</i></span>, which are called its <span><i>instances</i></span>.</p>
<p>A <span><i>class</i></span> can inherit structure and behavior from other <em>classes</em>. A <span><i>class</i></span> whose definition refers to other <em>classes</em> for the purpose of inheriting from them is said to be a <span><i>subclass</i></span> of each of those <em>classes</em>. The <em>classes</em> that are designated for purposes of inheritance are said to be <em>superclasses</em> of the inheriting <span><i>class</i></span>.</p>
<p>A <span><i>class</i></span> can have a <span><i>name</i></span>. The <span><i>function</i></span> <span><b>class-name</b></span> takes a <em>class object</em> and returns its <span><i>name</i></span>. The <span><i>name</i></span> of an anonymous <span><i>class</i></span> is <span><b>nil</b></span>. A <span><i>symbol</i></span> can <span><i>name</i></span> a <span><i>class</i></span>. The <span><i>function</i></span> <span><b>find-class</b></span> takes a <span><i>symbol</i></span> and returns the <span><i>class</i></span> that the <span><i>symbol</i></span> names. A <span><i>class</i></span> has a <em>proper name</em> if the <span><i>name</i></span> is a <span><i>symbol</i></span> and if the <span><i>name</i></span> of the <span><i>class</i></span> names that <span><i>class</i></span>. That is, a <em>class C</em> has the <em>proper name S</em> if <em>S</em> = (class-name <em>C</em>) and <em>C</em> = (find-class <em>S</em>). Notice that it is possible for (find-class <em>S</em><sub>1</sub>) = (find-class <em>S</em><sub>2</sub>) and <em>S</em><sub>1</sub> <em>6</em>= <em>S</em><sub>2</sub>. If <em>C</em> = (find-class <em>S</em>), we say that <em>C</em> is the <em>class named S</em>.</p>
<p>A <i>class C</i><sub>1</sub> is a <i>direct superclass</i> of a <i>class C</i><sub>2</sub> if <i>C</i><sub>2</sub> explicitly designates <i>C</i><sub>1</sub> as a <i>superclass</i> in its definition. In this case <i>C</i><sub>2</sub> is a <i>direct subclass</i> of <i>C</i><sub>1</sub>. A <i>class C<sub>n</sub></i> is a <i>superclass</i> of a <i>class C</i><sub>1</sub> if there exists a series of <i>classes C</i><sub>2</sub><i>, . . . , C<sub>n−</sub></i>1 such that <i>C<sub>i</sub></i>+1 is a <i>direct superclass</i> of <i>C<sub>i</sub></i> for 1 <i>≤ i</i> &lt; <i>n</i>. In this case, <i>C</i><sub>1</sub> is a <i>subclass</i> of <i>C<sub>n</sub></i>. A <i>class</i> is considered neither a <i>superclass</i> nor a <i>subclass</i> of</p>
<p>itself. That is, if <em>C</em><sub>1</sub> is a <span><i>superclass</i></span> of <em>C</em><sub>2</sub>, then <em>C</em><sub>1</sub> <em>6</em>= <em>C</em><sub>2</sub>. The set of <em>classes</em> consisting of some given <em>class C</em> along with all of its <em>superclasses</em> is called “<em>C</em> and its superclasses.”</p>
<p>Each <span><i>class</i></span> has a <em>class precedence list</em>, which is a total ordering on the set of the given <span><i>class</i></span> and its <em>superclasses</em>. The total ordering is expressed as a list ordered from most specific to least specific. The <em>class precedence list</em> is used in several ways. In general, more specific <em>classes</em> can <span><i>shadow</i></span><sub>1</sub> features that would otherwise be inherited from less specific <em>classes</em>. The <span><i>method</i></span> selection and combination process uses the <em>class precedence list</em> to order <span><i>methods</i></span> from most specific to least specific.</p>
<p>When a <span><i>class</i></span> is defined, the order in which its direct <em>superclasses</em> are mentioned in the defining</p>
<p>form is important. Each <span><i>class</i></span> has a <em>local precedence order</em>, which is a <span><i>list</i></span> consisting of the <span><i>class</i></span> followed by its <em>direct superclasses</em> in the order mentioned in the defining <span><i>form</i></span>.</p>
<p>A <em>class precedence list</em> is always consistent with the <em>local precedence order</em> of each <span><i>class</i></span> in the list. The <em>classes</em> in each <em>local precedence order</em> appear within the <em>class precedence list</em> in the same order. If the <em>local precedence orders</em> are inconsistent with each other, no <em>class precedence list</em> can be constructed, and an error is signaled. The <em>class precedence list</em> and its computation is discussed in Section 4.3.5 (Determining the Class Precedence List).</p>
<p><em>classes</em> are organized into a directed acyclic graph. There are two distinguished <em>classes</em>, named <span><b>t</b></span> and <span><b>standard-object</b></span>. The <span><i>class</i></span> named <span><b>t</b></span> has no <em>superclasses</em>. It is a <span><i>superclass</i></span> of every <span><i>class</i></span> except itself. The <span><i>class</i></span> named <span><b>standard-object</b></span> is an <span><i>instance</i></span> of the <span><i>class</i></span> <span><b>standard-class</b></span> and is a <span><i>superclass</i></span> of every <span><i>class</i></span> that is an <span><i>instance</i></span> of the <span><i>class</i></span> <span><b>standard-class</b></span> except itself.</p>
<p>There is a mapping from the object system <span><i>class</i></span> space into the <span><i>type</i></span> space. Many of the standard <span><i>types</i></span> specified in this document have a corresponding <span><i>class</i></span> that has the same <span><i>name</i></span> as the <span><i>type</i></span>. Some <span><i>types</i></span> do not have a corresponding <span><i>class</i></span>. The integration of the <span><i>type</i></span> and <span><i>class</i></span> systems is discussed in Section 4.3.7 (Integrating Types and Classes).</p>
<p><em>Classes</em> are represented by <span><i>objects</i></span> that are themselves <span><i>instances</i></span> of <em>classes</em>. The <span><i>class</i></span> of the <span><i>class</i></span> of an <span><i>object</i></span> is termed the <span><i>metaclass</i></span> of that <span><i>object</i></span>. When no misinterpretation is possible, the term <span><i>metaclass</i></span> is used to refer to a <span><i>class</i></span> that has <span><i>instances</i></span> that are themselves <em>classes</em>. The <span><i>metaclass</i></span> determines the form of inheritance used by the <em>classes</em> that are its <span><i>instances</i></span> and the representation of the <span><i>instances</i></span> of those <em>classes</em>. The object system provides a default <span><i>metaclass</i></span>, <span><b>standard-class</b></span>, that is appropriate for most programs.</p>
<p>Except where otherwise specified, all <em>classes</em> mentioned in this standard are <span><i>instances</i></span> of the <span><i>class</i></span> <span><b>standard-class</b></span>, all <em>generic functions</em> are <span><i>instances</i></span> of the <span><i>class</i></span> <span><b>standard-generic-function</b></span>, and all <span><i>methods</i></span> are <span><i>instances</i></span> of the <span><i>class</i></span> <span><b>standard-method</b></span>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4311-standard-metaclasses">4.3.1.1 Standard Metaclasses<a href="#4311-standard-metaclasses" class="hash-link" aria-label="Direct link to 4.3.1.1 Standard Metaclasses" title="Direct link to 4.3.1.1 Standard Metaclasses">​</a></h3>
<!-- -->
<p>The object system provides a number of predefined <em>metaclasses</em>. These include the <em>classes</em> <span><b>standard-class</b></span>, <span><b>built-in-class</b></span>, and <span><b>structure-class</b></span>:</p>
<p><em>•</em> The <span><i>class</i></span> <span><b>standard-class</b></span> is the default <span><i>class</i></span> of <em>classes</em> defined by <span><b>defclass</b></span>.</p>
<p><em>•</em> The <span><i>class</i></span> <span><b>built-in-class</b></span> is the <span><i>class</i></span> whose <span><i>instances</i></span> are <em>classes</em> that have special implementations with restricted capabilities. Any <span><i>class</i></span> that corresponds to a standard <span><i>type</i></span> might be an <span><i>instance</i></span> of <span><b>built-in-class</b></span>. The predefined <span><i>type</i></span> specifiers that are required to have corresponding <em>classes</em> are listed in Figure 4–8. It is <span><i>implementation-dependent</i></span> whether each of these <em>classes</em> is implemented as a <em>built-in class</em>.</p>
<p><em>•</em> All <em>classes</em> defined by means of <span><b>defstruct</b></span> are <span><i>instances</i></span> of the <span><i>class</i></span> <span><b>structure-class</b></span>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="432-defining-classes">4.3.2 Defining Classes<a href="#432-defining-classes" class="hash-link" aria-label="Direct link to 4.3.2 Defining Classes" title="Direct link to 4.3.2 Defining Classes">​</a></h2>
<!-- -->
<p>The macro <span><b>defclass</b></span> is used to define a new named <span><i>class</i></span>.</p>
<p>The definition of a <span><i>class</i></span> includes:</p>
<p><em>•</em> The <span><i>name</i></span> of the new <span><i>class</i></span>. For newly-defined <em>classes</em> this <span><i>name</i></span> is a <em>proper name</em>. <em>•</em> The list of the direct <em>superclasses</em> of the new <span><i>class</i></span>.</p>
<p><em>•</em> A set of <em>slot specifiers</em>. Each <em>slot specifier</em> includes the <span><i>name</i></span> of the <span><i>slot</i></span> and zero or more <span><i>slot</i></span> options. A <span><i>slot</i></span> option pertains only to a single <span><i>slot</i></span>. If a <span><i>class</i></span> definition contains two <em>slot specifiers</em> with the same <span><i>name</i></span>, an error is signaled.</p>
<p><em>•</em> A set of <span><i>class</i></span> options. Each <span><i>class</i></span> option pertains to the <span><i>class</i></span> as a whole.</p>
<p>The <span><i>slot</i></span> options and <span><i>class</i></span> options of the <span><b>defclass</b></span> form provide mechanisms for the following: <em>•</em> Supplying a default initial value <span><i>form</i></span> for a given <span><i>slot</i></span>.</p>
<p><em>•</em> Requesting that <span><i>methods</i></span> for <em>generic functions</em> be automatically generated for reading or writing <span><i>slots</i></span>.</p>
<p><em>•</em> Controlling whether a given <span><i>slot</i></span> is shared by all <span><i>instances</i></span> of the <span><i>class</i></span> or whether each <span><i>instance</i></span> of the <span><i>class</i></span> has its own <span><i>slot</i></span>.</p>
<p><em>•</em> Supplying a set of initialization arguments and initialization argument defaults to be used in <span><i>instance</i></span> creation.</p>
<p><em>•</em> Indicating that the <span><i>metaclass</i></span> is to be other than the default. The <!-- -->:metaclass<!-- --> option is reserved for future use; an implementation can be extended to make use of the <!-- -->:metaclass<!-- --> option.</p>
<p><em>•</em> Indicating the expected <span><i>type</i></span> for the value stored in the <span><i>slot</i></span>.</p>
<p><em>•</em> Indicating the <em>documentation string</em> for the <span><i>slot</i></span>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="433-creating-instances-of-classes">4.3.3 Creating Instances of Classes<a href="#433-creating-instances-of-classes" class="hash-link" aria-label="Direct link to 4.3.3 Creating Instances of Classes" title="Direct link to 4.3.3 Creating Instances of Classes">​</a></h2>
<!-- -->
<p>The generic function <span><b>make-instance</b></span> creates and returns a new <span><i>instance</i></span> of a <span><i>class</i></span>. The object system provides several mechanisms for specifying how a new <span><i>instance</i></span> is to be initialized. For example, it is possible to specify the initial values for <span><i>slots</i></span> in newly created <span><i>instances</i></span> either by giving arguments to <span><b>make-instance</b></span> or by providing default initial values. Further initialization</p>
<p>activities can be performed by <span><i>methods</i></span> written for <em>generic functions</em> that are part of the initialization protocol. The complete initialization protocol is described in Section 7.1 (Object Creation and Initialization).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="434-inheritance">4.3.4 Inheritance<a href="#434-inheritance" class="hash-link" aria-label="Direct link to 4.3.4 Inheritance" title="Direct link to 4.3.4 Inheritance">​</a></h2>
<!-- -->
<p>A <span><i>class</i></span> can inherit <span><i>methods</i></span>, <span><i>slots</i></span>, and some <span><b>defclass</b></span> options from its <em>superclasses</em>. Other sections describe the inheritance of <span><i>methods</i></span>, the inheritance of <span><i>slots</i></span> and <span><i>slot</i></span> options, and the inheritance of <span><i>class</i></span> options.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4341-examples-of-inheritance">4.3.4.1 Examples of Inheritance<a href="#4341-examples-of-inheritance" class="hash-link" aria-label="Direct link to 4.3.4.1 Examples of Inheritance" title="Direct link to 4.3.4.1 Examples of Inheritance">​</a></h3>
<!-- -->
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">defclass</span><span class="token plain"> C1 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">S1</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:initform</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5.4</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:type</span><span class="token plain"> number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">S2</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:allocation</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">defclass</span><span class="token plain"> C2 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">C1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">S1</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:initform</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:type</span><span class="token plain"> integer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">S2</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:allocation</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:instance</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">S3</span><span class="token plain"> </span><span class="token lisp-property property" style="color:#36acaa">:accessor</span><span class="token plain"> C2-S3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*Instances* of the class C1 have a *local slot* named S1, whose default initial value is </span><span class="token number" style="color:#36acaa">5.4</span><span class="token plain"> and whose *value* should always be a *number* </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> The class C1 also has a *shared slot* named S2. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">There is a *local slot* named S1 in *instances* of C2. The default initial value of S1 is </span><span class="token number" style="color:#36acaa">5.</span><span class="token plain"> The value of S1 should always be of type </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">and</span><span class="token plain"> integer number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">. There are also *local slots* named S2 and S3 in *instances* of C2. The class C2 has a *method* for C2-S3 for reading the value of slot S3</span><span class="token comment" style="color:#999988;font-style:italic">; there is also a *method* for (setf C2-S3) that writes the value of S3. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4342-inheritance-of-class-options">4.3.4.2 Inheritance of Class Options<a href="#4342-inheritance-of-class-options" class="hash-link" aria-label="Direct link to 4.3.4.2 Inheritance of Class Options" title="Direct link to 4.3.4.2 Inheritance of Class Options">​</a></h3>
<!-- -->
<p>The <!-- -->:default-initargs<!-- --> class option is inherited. The set of defaulted initialization arguments for a <span><i>class</i></span> is the union of the sets of initialization arguments supplied in the <!-- -->:default-initargs<!-- --> class options of the <span><i>class</i></span> and its <em>superclasses</em>. When more than one default initial value <span><i>form</i></span> is supplied</p>
<p>for a given initialization argument, the default initial value <span><i>form</i></span> that is used is the one supplied by the <span><i>class</i></span> that is most specific according to the <em>class precedence list</em>.</p>
<p>If a given <!-- -->:default-initargs<!-- --> class option specifies an initialization argument of the same <span><i>name</i></span> more than once, an error of <span><i>type</i></span> <span><b>program-error</b></span> is signaled.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="435-determining-the-class-precedence-list">4.3.5 Determining the Class Precedence List<a href="#435-determining-the-class-precedence-list" class="hash-link" aria-label="Direct link to 4.3.5 Determining the Class Precedence List" title="Direct link to 4.3.5 Determining the Class Precedence List">​</a></h2>
<!-- -->
<p>The <span><b>defclass</b></span> form for a <span><i>class</i></span> provides a total ordering on that <span><i>class</i></span> and its direct <em>superclasses</em>. This ordering is called the <em>local precedence order</em>. It is an ordered list of the <span><i>class</i></span> and its direct <em>superclasses</em>. The <em>class precedence list</em> for a class <em>C</em> is a total ordering on <em>C</em> and its <em>superclasses</em> that is consistent with the <em>local precedence orders</em> for each of <em>C</em> and its <em>superclasses</em>.</p>
<p>A <span><i>class</i></span> precedes its direct <em>superclasses</em>, and a direct <span><i>superclass</i></span> precedes all other direct <em>superclasses</em> specified to its right in the <em>superclasses</em> list of the <span><b>defclass</b></span> form. For every class <em>C</em>, define</p>
<p><i>R<sub>C</sub></i> = <i>{</i>(<i>C, C</i><sub>1</sub>)<i>,</i>(<i>C</i><sub>1</sub><i>, C</i><sub>2</sub>)<i>, . . . ,</i>(<i>C<sub>n−</sub></i>1<i>, C<sub>n</sub></i>)<i>}</i></p>
<p>where <i>C</i><sub>1</sub><i>, . . . , C<sub>n</sub></i> are the direct <i>superclasses</i> of <i>C</i> in the order in which they are mentioned in the <b>defclass</b> form. These ordered pairs generate the total ordering on the class <i>C</i> and its direct <i>superclasses</i>.</p>
<p>Let <i>S<sub>C</sub></i> be the set of <i>C</i> and its <i>superclasses</i>. Let <i>R</i> be</p>
<i>R<sub>c</sub></i>
<p>.</p>
<p><sub><i>R</i> =</sub>[ <i>c∈S<sub>C</sub></i></p>
<p>The set <i>R</i> might or might not generate a partial ordering, depending on whether the <i>R<sub>c</sub></i>, <i>c ∈ S<sub>C</sub></i> , are consistent; it is assumed that they are consistent and that <i>R</i> generates a partial ordering. When the <i>R<sub>c</sub></i> are not consistent, it is said that <i>R</i> is inconsistent.</p>
<p>To compute the <i>class precedence list</i> for <i>C</i>, topologically sort the elements of <i>S<sub>C</sub></i> with respect to the partial ordering generated by <i>R</i>. When the topological sort must select a <i>class</i> from a set of two or more <i>classes</i>, none of which are preceded by other <i>classes</i> with respect to <i>R</i>, the <i>class</i> selected is chosen deterministically, as described below.</p>
<p>If <em>R</em> is inconsistent, an error is signaled.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4351-topological-sorting">4.3.5.1 Topological Sorting<a href="#4351-topological-sorting" class="hash-link" aria-label="Direct link to 4.3.5.1 Topological Sorting" title="Direct link to 4.3.5.1 Topological Sorting">​</a></h3>
<!-- -->
<p>Topological sorting proceeds by finding a class <i>C</i> in <i>S<sub>C</sub></i> such that no other <i>class</i> precedes that element according to the elements in <i>R</i>. The class <i>C</i> is placed first in the result. Remove <i>C</i> from <i>S<sub>C</sub></i> , and remove all pairs of the form (<i>C, D</i>), <i>D ∈ S<sub>C</sub></i> , from <i>R</i>. Repeat the process, adding <i>classes</i> with no predecessors to the end of the result. Stop when no element can be found that has no predecessor.</p>
<p>If <i>S<sub>C</sub></i> is not empty and the process has stopped, the set <i>R</i> is inconsistent. If every <i>class</i> in the finite set of <i>classes</i> is preceded by another, then <i>R</i> contains a loop. That is, there is a chain of classes <i>C</i><sub>1</sub><i>, . . . , C<sub>n</sub></i> such that <i>C<sub>i</sub></i> precedes <i>C<sub>i</sub></i>+1, 1 <i>≤ i</i> &lt; <i>n</i>, and <i>C<sub>n</sub></i> precedes <i>C</i><sub>1</sub>.</p>
<p>Sometimes there are several <i>classes</i> from <i>S<sub>C</sub></i> with no predecessors. In this case select the one that has a direct <i>subclass</i> rightmost in the <i>class precedence list</i> computed so far. (If there is no such candidate <i>class</i>, <i>R</i> does not generate a partial ordering—the <i>R<sub>c</sub></i>, <i>c ∈ S<sub>C</sub></i> , are inconsistent.)</p>
<p>In more precise terms, let <i>{N</i><sub>1</sub><i>, . . . , N<sub>m</sub>}</i>, <i>m ≥</i> 2, be the <i>classes</i> from <i>S<sub>C</sub></i> with no predecessors. Let (<i>C</i><sub>1</sub> <i>. . . C<sub>n</sub></i>), <i>n ≥</i> 1, be the <i>class precedence list</i> constructed so far. <i>C</i><sub>1</sub> is the most specific <i>class</i>, and <i>C<sub>n</sub></i> is the least specific. Let 1 <i>≤ j ≤ n</i> be the largest number such that there exists an <i>i</i> where 1 <i>≤ i ≤ m</i> and <i>N<sub>i</sub></i>is a direct <i>superclass</i> of <i>C<sub>j</sub></i> ; <i>N<sub>i</sub></i>is placed next.</p>
<p>The effect of this rule for selecting from a set of <em>classes</em> with no predecessors is that the <em>classes</em> in a simple <span><i>superclass</i></span> chain are adjacent in the <em>class precedence list</em> and that <em>classes</em> in each relatively separated subgraph are adjacent in the <em>class precedence list</em>. For example, let <span><i>T</i></span><sub>1</sub> and <span><i>T</i></span><sub>2</sub> be subgraphs whose only element in common is the class <em>J</em>. Suppose that no superclass of <em>J</em> appears in either <span><i>T</i></span><sub>1</sub> or <span><i>T</i></span><sub>2</sub>, and that <em>J</em> is in the superclass chain of every class in both <span><i>T</i></span><sub>1</sub> and <span><i>T</i></span><sub>2</sub>. Let <em>C</em><sub>1</sub> be the bottom of <span><i>T</i></span><sub>1</sub>; and let <em>C</em><sub>2</sub> be the bottom of <span><i>T</i></span><sub>2</sub>. Suppose <em>C</em> is a <span><i>class</i></span> whose direct <em>superclasses</em> are <em>C</em><sub>1</sub> and <em>C</em><sub>2</sub> in that order, then the <em>class precedence list</em> for <em>C</em> starts with <em>C</em> and is followed by all <em>classes</em> in <span><i>T</i></span><sub>1</sub> except <em>J</em>. All the <em>classes</em> of <span><i>T</i></span><sub>2</sub> are next. The <em>class J</em> and its <em>superclasses</em> appear last.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4352-examples-of-class-precedence-list-determination">4.3.5.2 Examples of Class Precedence List Determination<a href="#4352-examples-of-class-precedence-list-determination" class="hash-link" aria-label="Direct link to 4.3.5.2 Examples of Class Precedence List Determination" title="Direct link to 4.3.5.2 Examples of Class Precedence List Determination">​</a></h3>
<!-- -->
<div class="language-lisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-lisp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">This example determines a *class precedence list* for the class pie. The following *classes* are defined: </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">defclass</span><span class="token plain"> pie </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">apple</span><span class="token plain"> cinnamon</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">defclass</span><span class="token plain"> apple </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">fruit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">defclass</span><span class="token plain"> cinnamon </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">spice</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">defclass</span><span class="token plain"> fruit </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">food</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">defclass</span><span class="token plain"> spice </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">food</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">defclass</span><span class="token plain"> food </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The set &lt;i&gt;S&lt;sub&gt;pie&lt;/sub&gt;&lt;/i&gt; = &lt;i&gt;\&amp;#123</span><span class="token comment" style="color:#999988;font-style:italic">;&lt;/i&gt;pie, apple, cinnamon, fruit, spice, food, standard-object, t&lt;i&gt;\&amp;#125;&lt;/i&gt;. The set &lt;i&gt;R&lt;/i&gt; = &lt;i&gt;\&amp;#123;&lt;/i&gt;(pie, apple), (apple, cinnamon), (apple, fruit), (cinnamon, spice), </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">fruit</span><span class="token plain">, food</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">, </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">spice</span><span class="token plain">, food</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">, </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">food</span><span class="token plain">, standard-object</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">, </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">standard-object</span><span class="token plain">, </span><span class="token boolean" style="color:#36acaa">t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">*\&amp;#125</span><span class="token comment" style="color:#999988;font-style:italic">;*. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The class pie is not preceded by anything, so it comes first</span><span class="token comment" style="color:#999988;font-style:italic">; the result so far is (pie). Remove pie from *S* and pairs mentioning pie from *R* to get *S* = *\&amp;#123;*apple, cinnamon, fruit, spice, food, standard-object, t*\&amp;#125;* and *R* = *\&amp;#123;*(apple, cinnamon), (apple, fruit), (cinnamon, spice), (fruit, food), (spice, food), (food, standard-object), (standard-object, t)*\&amp;#125;*. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The class apple is not preceded by anything, so it is next</span><span class="token comment" style="color:#999988;font-style:italic">; the result is (pie apple). Removing apple and the relevant pairs results in *S* = *\&amp;#123;*cinnamon, fruit, spice, food, standard-object, t*\&amp;#125;* and *R* = *\&amp;#123;*(cinnamon, spice), (fruit, food), (spice, food), (food, standard-object), (standard-object, t)*\&amp;#125;*. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The classes cinnamon and fruit are not preceded by anything, so the one with a direct *subclass* rightmost in the *class precedence list* computed so far goes next. The class apple is a direct *subclass*  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">of fruit, and the class pie is a direct *subclass* of cinnamon. Because apple appears to the right of pie in the *class precedence list*, fruit goes next, and the result so far is </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">pie</span><span class="token plain"> apple fruit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">. *S* = *\&amp;#123</span><span class="token comment" style="color:#999988;font-style:italic">;*cinnamon, spice, food, standard-object, t*\&amp;#125;*; *R* = *\&amp;#123;*(cinnamon, spice), (spice, food), (food, standard-object), (standard-object, t)*\&amp;#125;*. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The class cinnamon is next, giving the result so far as </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">pie</span><span class="token plain"> apple fruit cinnamon</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">. At this point *S* = *\&amp;#123</span><span class="token comment" style="color:#999988;font-style:italic">;*spice, food, standard-object, t*\&amp;#125;*; *R* = *\&amp;#123;*(spice, food), (food, standard-object), (standard-object, t)*\&amp;#125;*. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The classes spice, food, **standard-object**, and **t** are added in that order, and the *class precedence list* is </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">pie</span><span class="token plain"> apple fruit cinnamon spice food standard-object </span><span class="token boolean" style="color:#36acaa">t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">It is possible to write a set of *class* definitions that cannot be ordered. For example: </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">defclass</span><span class="token plain"> new-class </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">fruit</span><span class="token plain"> apple</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">defclass</span><span class="token plain"> apple </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">fruit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The class fruit must precede apple because the local ordering of *superclasses* must be preserved. The class apple must precede fruit because a *class* always precedes its own *superclasses*. When this situation occurs, an error is signaled, as happens here when the system tries to compute the *class precedence list* of new-class. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The following might appear to be a conflicting set of definitions: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">defclass</span><span class="token plain"> pie </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">apple</span><span class="token plain"> cinnamon</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">defclass</span><span class="token plain"> pastry </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">cinnamon</span><span class="token plain"> apple</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">defclass</span><span class="token plain"> apple </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">defclass</span><span class="token plain"> cinnamon </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The *class precedence list* for pie is </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">pie</span><span class="token plain"> apple cinnamon standard-object </span><span class="token boolean" style="color:#36acaa">t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The *class precedence list* for pastry is </span><span class="token punctuation" style="color:#393A34">(</span><span class="token car">pastry</span><span class="token plain"> cinnamon apple standard-object </span><span class="token boolean" style="color:#36acaa">t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">It is not a problem for apple to precede cinnamon in the ordering of the *superclasses* of pie but not in the ordering for pastry. However, it is not possible to build a new *class* that has both pie and pastry as *superclasses*. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="436-redefining-classes">4.3.6 Redefining Classes<a href="#436-redefining-classes" class="hash-link" aria-label="Direct link to 4.3.6 Redefining Classes" title="Direct link to 4.3.6 Redefining Classes">​</a></h2>
<!-- -->
<p>A <span><i>class</i></span> that is a <em>direct instance</em> of <span><b>standard-class</b></span> can be redefined if the new <span><i>class</i></span> is also a <em>direct instance</em> of <span><b>standard-class</b></span>. Redefining a <span><i>class</i></span> modifies the existing <em>class object</em> to reflect the new <span><i>class</i></span> definition; it does not create a new <em>class object</em> for the <span><i>class</i></span>. Any <em>method object</em> created by a <!-- -->:reader<!-- -->, <!-- -->:writer<!-- -->, or <!-- -->:accessor<!-- --> option specified by the old <span><b>defclass</b></span> form is removed from the corresponding <em>generic function</em>. <em>Methods</em> specified by the new <span><b>defclass</b></span> form are added.</p>
<p>When the class <em>C</em> is redefined, changes are propagated to its <span><i>instances</i></span> and to <span><i>instances</i></span> of any of its <em>subclasses</em>. Updating such an <span><i>instance</i></span> occurs at an <span><i>implementation-dependent</i></span> time, but no later than the next time a <span><i>slot</i></span> of that <span><i>instance</i></span> is read or written. Updating an <span><i>instance</i></span> does not change its identity as defined by the <span><i>function</i></span> <span><b>eq</b></span>. The updating process may change the <span><i>slots</i></span> of that particular <span><i>instance</i></span>, but it does not create a new <span><i>instance</i></span>. Whether updating an <span><i>instance</i></span> consumes storage is <span><i>implementation-dependent</i></span>.</p>
<p>Note that redefining a <span><i>class</i></span> may cause <span><i>slots</i></span> to be added or deleted. If a <span><i>class</i></span> is redefined in a way that changes the set of <em>local slots accessible</em> in <span><i>instances</i></span>, the <span><i>instances</i></span> are updated. It is <span><i>implementation-dependent</i></span> whether <span><i>instances</i></span> are updated if a <span><i>class</i></span> is redefined in a way that does not change the set of <em>local slots accessible</em> in <span><i>instances</i></span>.</p>
<p>The value of a <span><i>slot</i></span> that is specified as shared both in the old <span><i>class</i></span> and in the new <span><i>class</i></span> is retained. If such a <em>shared slot</em> was unbound in the old <span><i>class</i></span>, it is unbound in the new <span><i>class</i></span>. <span><i>Slots</i></span> that were local in the old <span><i>class</i></span> and that are shared in the new <span><i>class</i></span> are initialized. Newly added <em>shared slots</em> are initialized.</p>
<p>Each newly added <em>shared slot</em> is set to the result of evaluating the <em>captured initialization form</em> for the <span><i>slot</i></span> that was specified in the <span><b>defclass</b></span> <span><i>form</i></span> for the new <span><i>class</i></span>. If there was no <em>initialization form</em>, the <span><i>slot</i></span> is unbound.</p>
<p>If a <span><i>class</i></span> is redefined in such a way that the set of <em>local slots accessible</em> in an <span><i>instance</i></span> of the <span><i>class</i></span> is changed, a two-step process of updating the <span><i>instances</i></span> of the <span><i>class</i></span> takes place. The process may be explicitly started by invoking the generic function <span><b>make-instances-obsolete</b></span>. This two-step process can happen in other circumstances in some implementations. For example, in some implementations this two-step process is triggered if the order of <span><i>slots</i></span> in storage is changed.</p>
<p>The first step modifies the structure of the <span><i>instance</i></span> by adding new <em>local slots</em> and discarding <em>local slots</em> that are not defined in the new version of the <span><i>class</i></span>. The second step initializes the newly-added <em>local slots</em> and performs any other user-defined actions. These two steps are further specified in the next two sections.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4361-modifying-the-structure-of-instances">4.3.6.1 Modifying the Structure of Instances<a href="#4361-modifying-the-structure-of-instances" class="hash-link" aria-label="Direct link to 4.3.6.1 Modifying the Structure of Instances" title="Direct link to 4.3.6.1 Modifying the Structure of Instances">​</a></h3>
<!-- -->
<p>The first step modifies the structure of <span><i>instances</i></span> of the redefined <span><i>class</i></span> to conform to its new <span><i>class</i></span> definition. <em>Local slots</em> specified by the new <span><i>class</i></span> definition that are not specified as either local or shared by the old <span><i>class</i></span> are added, and <span><i>slots</i></span> not specified as either local or shared by the new <span><i>class</i></span> definition that are specified as local by the old <span><i>class</i></span> are discarded. The <span><i>names</i></span> of these added and discarded <span><i>slots</i></span> are passed as arguments to <strong>update-instance-for-redefined-class</strong> as described in</p>
<p>the next section.</p>
<p>The values of <em>local slots</em> specified by both the new and old <em>classes</em> are retained. If such a <em>local slot</em> was unbound, it remains unbound.</p>
<p>The value of a <span><i>slot</i></span> that is specified as shared in the old <span><i>class</i></span> and as local in the new <span><i>class</i></span> is retained. If such a <em>shared slot</em> was unbound, the <em>local slot</em> is unbound.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4362-initializing-newly-added-local-slots">4.3.6.2 Initializing Newly Added Local Slots<a href="#4362-initializing-newly-added-local-slots" class="hash-link" aria-label="Direct link to 4.3.6.2 Initializing Newly Added Local Slots" title="Direct link to 4.3.6.2 Initializing Newly Added Local Slots">​</a></h3>
<!-- -->
<p>The second step initializes the newly added <em>local slots</em> and performs any other user-defined actions. This step is implemented by the generic function <strong>update-instance-for-redefined-class</strong>, which is called after completion of the first step of modifying the structure of the <span><i>instance</i></span>.</p>
<p>The generic function <strong>update-instance-for-redefined-class</strong> takes four required arguments: the <span><i>instance</i></span> being updated after it has undergone the first step, a list of the names of <em>local slots</em> that were added, a list of the names of <em>local slots</em> that were discarded, and a property list containing the <span><i>slot</i></span> names and values of <span><i>slots</i></span> that were discarded and had values. Included among the discarded <span><i>slots</i></span> are <span><i>slots</i></span> that were local in the old <span><i>class</i></span> and that are shared in the new <span><i>class</i></span>.</p>
<p>The generic function <strong>update-instance-for-redefined-class</strong> also takes any number of initialization arguments. When it is called by the system to update an <span><i>instance</i></span> whose <span><i>class</i></span> has been redefined, no initialization arguments are provided.</p>
<p>There is a system-supplied primary <span><i>method</i></span> for <strong>update-instance-for-redefined-class</strong> whose <em>parameter specializer</em> for its <span><i>instance</i></span> argument is the <span><i>class</i></span> <span><b>standard-object</b></span>. First this <span><i>method</i></span> checks the validity of initialization arguments and signals an error if an initialization argument is supplied that is not declared as valid. (For more information, see Section 7.1.2 (Declaring the Validity of Initialization Arguments).) Then it calls the generic function <span><b>shared-initialize</b></span> with the following arguments: the <span><i>instance</i></span>, the list of <span><i>names</i></span> of the newly added <span><i>slots</i></span>, and the initialization arguments it received.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4363-customizing-class-redefinition">4.3.6.3 Customizing Class Redefinition<a href="#4363-customizing-class-redefinition" class="hash-link" aria-label="Direct link to 4.3.6.3 Customizing Class Redefinition" title="Direct link to 4.3.6.3 Customizing Class Redefinition">​</a></h3>
<!-- -->
<p><span><i>Methods</i></span> for <strong>update-instance-for-redefined-class</strong> may be defined to specify actions to be taken when an <span><i>instance</i></span> is updated. If only <em>after methods</em> for <strong>update-instance-for-redefined-class</strong> are defined, they will be run after the system-supplied primary <span><i>method</i></span> for initialization and therefore will not interfere with the default behavior of <strong>update-instance-for-redefined-class</strong>. Because no initialization arguments are passed to <strong>update-instance-for-redefined-class</strong> when it is called by the system, the <em>initialization forms</em> for <span><i>slots</i></span> that are filled by <em>before methods</em> for <strong>update-instance-for-redefined-class</strong> will not be evaluated by <span><b>shared-initialize</b></span>.</p>
<p><span><i>Methods</i></span> for <span><b>shared-initialize</b></span> may be defined to customize <span><i>class</i></span> redefinition. For more information, see Section 7.1.5 (Shared-Initialize).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="437-integrating-types-and-classes">4.3.7 Integrating Types and Classes<a href="#437-integrating-types-and-classes" class="hash-link" aria-label="Direct link to 4.3.7 Integrating Types and Classes" title="Direct link to 4.3.7 Integrating Types and Classes">​</a></h2>
<!-- -->
<!-- -->
<p>The object system maps the space of <em>classes</em> into the space of <span><i>types</i></span>. Every <span><i>class</i></span> that has a proper name has a corresponding <span><i>type</i></span> with the same <span><i>name</i></span>.</p>
<p>The proper name of every <span><i>class</i></span> is a valid <em>type specifier</em> . In addition, every <em>class object</em> is a valid <em>type specifier</em> . Thus the expression (typep <em>object class</em>) evaluates to <span><i>true</i></span> if the <span><i>class</i></span> of <span><i>object</i></span> is <span><i>class</i></span> itself or a <span><i>subclass</i></span> of <span><i>class</i></span>. The evaluation of the expression (subtypep class1 class2) returns the values <span><i>true</i></span> and <span><i>true</i></span> if class1 is a subclass of class2 or if they are the same <span><i>class</i></span>; otherwise it returns the values <span><i>false</i></span> and <span><i>true</i></span>. If <em>I</em> is an <span><i>instance</i></span> of some <em>class C</em> named <em>S</em> and <em>C</em></p>
<p>is an <span><i>instance</i></span> of <span><b>standard-class</b></span>, the evaluation of the expression (type-of <em>I</em>) returns <em>S</em> if <em>S</em> is the <em>proper name</em> of <em>C</em>; otherwise, it returns <em>C</em>.</p>
<p>Because the names of <em>classes</em> and <em>class objects</em> are <em>type specifiers</em>, they may be used in the special form <span><b>the</b></span> and in type declarations.</p>
<p>Many but not all of the predefined <em>type specifiers</em> have a corresponding <span><i>class</i></span> with the same proper name as the <span><i>type</i></span>. These type specifiers are listed in Figure 4–8. For example, the <span><i>type</i></span> <span><b>array</b></span> has a corresponding <span><i>class</i></span> named <span><b>array</b></span>. No <em>type specifier</em> that is a list, such as (vector double-float 100), has a corresponding <span><i>class</i></span>. The <span><i>operator</i></span> <span><b>deftype</b></span> does not create any <em>classes</em>.</p>
<p>Each <span><i>class</i></span> that corresponds to a predefined <em>type specifier</em> can be implemented in one of three ways, at the discretion of each implementation. It can be a <em>standard class</em>, a <em>structure class</em>, or a <em>system class</em>.</p>
<p>A <em>built-in class</em> is one whose <em>generalized instances</em> have restricted capabilities or special representations. Attempting to use <span><b>defclass</b></span> to define <em>subclasses</em> of a <span><b>built-in-class</b></span> signals an error. Calling <span><b>make-instance</b></span> to create a <em>generalized instance</em> of a <em>built-in class</em> signals an error. Calling <span><b>slot-value</b></span> on a <em>generalized instance</em> of a <em>built-in class</em> signals an error. Redefining a <em>built-in class</em> or using <span><b>change-class</b></span> to change the <span><i>class</i></span> of an <span><i>object</i></span> to or from a <em>built-in class</em> signals an error. However, <em>built-in classes</em> can be used as <em>parameter specializers</em> in <span><i>methods</i></span>.</p>
<p>It is possible to determine whether a <span><i>class</i></span> is a <em>built-in class</em> by checking the <span><i>metaclass</i></span>. A <em>standard class</em> is an <span><i>instance</i></span> of the <span><i>class</i></span> <span><b>standard-class</b></span>, a <em>built-in class</em> is an <span><i>instance</i></span> of the <span><i>class</i></span> <span><b>built-in-class</b></span>, and a <em>structure class</em> is an <span><i>instance</i></span> of the <span><i>class</i></span> <span><b>structure-class</b></span>.</p>
<p>Each <em>structure type</em> created by <span><b>defstruct</b></span> without using the <!-- -->:type<!-- --> option has a corresponding <span><i>class</i></span>. This <span><i>class</i></span> is a <em>generalized instance</em> of the <span><i>class</i></span> <span><b>structure-class</b></span>. The <!-- -->:include<!-- --> option of <span><b>defstruct</b></span> creates a direct <span><i>subclass</i></span> of the <span><i>class</i></span> that corresponds to the included <em>structure type</em>.</p>
<p>It is <span><i>implementation-dependent</i></span> whether <span><i>slots</i></span> are involved in the operation of <span><i>functions</i></span> defined in this specification on <span><i>instances</i></span> of <em>classes</em> defined in this specification, except when <span><i>slots</i></span> are explicitly defined by this specification.</p>
<p>If in a particular <span><i>implementation</i></span> a <span><i>class</i></span> defined in this specification has <span><i>slots</i></span> that are not defined by this specfication, the names of these <span><i>slots</i></span> must not be <em>external symbols</em> of <span><i>packages</i></span> defined in this specification nor otherwise <span><i>accessible</i></span> in the CL-USER <span><i>package</i></span>.</p>
<p>The purpose of specifying that many of the standard <em>type specifiers</em> have a corresponding <span><i>class</i></span> is to enable users to write <span><i>methods</i></span> that discriminate on these <span><i>types</i></span>. <span><i>Method</i></span> selection requires that a <em>class precedence list</em> can be determined for each <span><i>class</i></span>.</p>
<p>The hierarchical relationships among the <em>type specifiers</em> are mirrored by relationships among the <em>classes</em> corresponding to those <span><i>types</i></span>.</p>
<p>Figure 4–8 lists the set of <em>classes</em> that correspond to predefined <em>type specifiers</em>.</p>
<p>|</p><p><strong>arithmetic-error generic-function simple-error array hash-table simple-type-error bit-vector integer simple-warning broadcast-stream list standard-class built-in-class logical-pathname standard-generic-function cell-error method standard-method character method-combination standard-object class null storage-condition complex number stream</strong> </p><p><strong>concatenated-stream package stream-error condition package-error string</strong> </p><p><strong>cons parse-error string-stream control-error pathname structure-class division-by-zero print-not-readable structure-object echo-stream program-error style-warning end-of-file random-state symbol</strong> </p><p><strong>error ratio synonym-stream file-error rational t</strong> </p><p><strong>file-stream reader-error two-way-stream float readtable type-error floating-point-inexact real unbound-slot floating-point-invalid-operation restart unbound-variable floating-point-overflow sequence undefined-function floating-point-underflow serious-condition vector</strong> </p><p><strong>function simple-condition warning</strong></p>|<p></p>
<p>| :- |</p>
<p><strong>Figure 4–8. Classes that correspond to pre-defined type specifiers</strong></p>
<p>The <em>class precedence list</em> information specified in the entries for each of these <em>classes</em> are those that are required by the object system.</p>
<p>Individual implementations may be extended to define other type specifiers to have a corresponding <span><i>class</i></span>. Individual implementations may be extended to add other <span><i>subclass</i></span> relationships and to add other <span><i>elements</i></span> to the <em>class precedence lists</em> as long as they do not violate the type relationships and disjointness requirements specified by this standard. A standard <span><i>class</i></span> defined with no direct <em>superclasses</em> is guaranteed to be disjoint from all of the <em>classes</em> in the table, except for the class named <span><b>t</b></span>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/lisp-docs/cl-language-reference/tree/develop/docs/chap-4/e-d-classes.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/cl-language-reference/docs/chap-4/e-c-types"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">4.2 Types</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cl-language-reference/docs/category/44-types-and-classes-dictionary"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">4.4 Types and Classes Dictionary</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#431-introduction-to-classes" class="table-of-contents__link toc-highlight">4.3.1 Introduction to Classes</a><ul><li><a href="#4311-standard-metaclasses" class="table-of-contents__link toc-highlight">4.3.1.1 Standard Metaclasses</a></li></ul></li><li><a href="#432-defining-classes" class="table-of-contents__link toc-highlight">4.3.2 Defining Classes</a></li><li><a href="#433-creating-instances-of-classes" class="table-of-contents__link toc-highlight">4.3.3 Creating Instances of Classes</a></li><li><a href="#434-inheritance" class="table-of-contents__link toc-highlight">4.3.4 Inheritance</a><ul><li><a href="#4341-examples-of-inheritance" class="table-of-contents__link toc-highlight">4.3.4.1 Examples of Inheritance</a></li><li><a href="#4342-inheritance-of-class-options" class="table-of-contents__link toc-highlight">4.3.4.2 Inheritance of Class Options</a></li></ul></li><li><a href="#435-determining-the-class-precedence-list" class="table-of-contents__link toc-highlight">4.3.5 Determining the Class Precedence List</a><ul><li><a href="#4351-topological-sorting" class="table-of-contents__link toc-highlight">4.3.5.1 Topological Sorting</a></li><li><a href="#4352-examples-of-class-precedence-list-determination" class="table-of-contents__link toc-highlight">4.3.5.2 Examples of Class Precedence List Determination</a></li></ul></li><li><a href="#436-redefining-classes" class="table-of-contents__link toc-highlight">4.3.6 Redefining Classes</a><ul><li><a href="#4361-modifying-the-structure-of-instances" class="table-of-contents__link toc-highlight">4.3.6.1 Modifying the Structure of Instances</a></li><li><a href="#4362-initializing-newly-added-local-slots" class="table-of-contents__link toc-highlight">4.3.6.2 Initializing Newly Added Local Slots</a></li><li><a href="#4363-customizing-class-redefinition" class="table-of-contents__link toc-highlight">4.3.6.3 Customizing Class Redefinition</a></li></ul></li><li><a href="#437-integrating-types-and-classes" class="table-of-contents__link toc-highlight">4.3.7 Integrating Types and Classes</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cl-language-reference/docs/intro">Cl Technical Reference</a></li><li class="footer__item"><a href="https://lisp-docs.github.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">CL Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/common-lisp" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/hhk46CE" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.reddit.com/r/common_lisp" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://irclog.tymoon.eu/libera/commonlisp" target="_blank" rel="noopener noreferrer" class="footer__link-item">IRC<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cl-language-reference/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/lisp-docs/cl-language-reference/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 LISP Docs, MIT License. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>