 



The **defclass** form for a *class* provides a total ordering on that *class* and its direct *superclasses*. This ordering is called the *local precedence order*. It is an ordered list of the *class* and its direct *superclasses*. The *class precedence list* for a class *C* is a total ordering on *C* and its *superclasses* that is consistent with the *local precedence orders* for each of *C* and its *superclasses*. 



A *class* precedes its direct *superclasses*, and a direct *superclass* precedes all other direct *superclasses* specified to its right in the *superclasses* list of the **defclass** form. For every class *C*, define 



<i>R<sub>C</sub></i> = <i>\{</i>(<i>C, C</i><sub>1</sub>)<i>,</i>(<i>C</i><sub>1</sub><i>, C</i><sub>2</sub>)<i>, . . . ,</i>(<i>C<sub>n−</sub></i>1<i>, C<sub>n</sub></i>)<i>\}</i> 



where <i>C</i><sub>1</sub><i>, . . . , C<sub>n</sub></i> are the direct <i>superclasses</i> of <i>C</i> in the order in which they are mentioned in the <b>defclass</b> form. These ordered pairs generate the total ordering on the class <i>C</i> and its direct <i>superclasses</i>. 



Let <i>S<sub>C</sub></i> be the set of <i>C</i> and its <i>superclasses</i>. Let <i>R</i> be 



<i>R<sub>c</sub></i> 



. 



<sub><i>R</i> =</sub>[ <i>c∈S<sub>C</sub></i> 



The set <i>R</i> might or might not generate a partial ordering, depending on whether the <i>R<sub>c</sub></i>, <i>c ∈ S<sub>C</sub></i> , are consistent; it is assumed that they are consistent and that <i>R</i> generates a partial ordering. When the <i>R<sub>c</sub></i> are not consistent, it is said that <i>R</i> is inconsistent. 



To compute the <i>class precedence list</i> for <i>C</i>, topologically sort the elements of <i>S<sub>C</sub></i> with respect to the partial ordering generated by <i>R</i>. When the topological sort must select a <i>class</i> from a set of two or more <i>classes</i>, none of which are preceded by other <i>classes</i> with respect to <i>R</i>, the <i>class</i> selected is chosen deterministically, as described below. 



If *R* is inconsistent, an error is signaled. 



