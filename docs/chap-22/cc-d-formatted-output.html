<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-chap-22/cc-d-formatted-output" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">22.3 Formatted Output | Common Lisp (New) Language Reference</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://lisp-docs.github.io/cl-language-reference/img/1024px-Lisp_logo.svg.png"><meta data-rh="true" name="twitter:image" content="https://lisp-docs.github.io/cl-language-reference/img/1024px-Lisp_logo.svg.png"><meta data-rh="true" property="og:url" content="https://lisp-docs.github.io/cl-language-reference/docs/chap-22/cc-d-formatted-output"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="google-site-verification" content="Vzaw013_bfdKeUVG89Ch3W1zC9_vH9ID2dPB9Dz0vr0"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="22.3 Formatted Output | Common Lisp (New) Language Reference"><meta data-rh="true" name="description" content="22.3.1 FORMAT Basic Output"><meta data-rh="true" property="og:description" content="22.3.1 FORMAT Basic Output"><link data-rh="true" rel="icon" href="/cl-language-reference/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lisp-docs.github.io/cl-language-reference/docs/chap-22/cc-d-formatted-output"><link data-rh="true" rel="alternate" href="https://lisp-docs.github.io/cl-language-reference/docs/chap-22/cc-d-formatted-output" hreflang="en"><link data-rh="true" rel="alternate" href="https://lisp-docs.github.io/cl-language-reference/docs/chap-22/cc-d-formatted-output" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://C1F2Q5VM6X-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/cl-language-reference/blog/rss.xml" title="Common Lisp (New) Language Reference RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cl-language-reference/blog/atom.xml" title="Common Lisp (New) Language Reference Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Common Lisp (New) Language Reference" href="/cl-language-reference/opensearch.xml"><link rel="stylesheet" href="/cl-language-reference/assets/css/styles.ad20780e.css">
<script src="/cl-language-reference/assets/js/runtime~main.2b2b1193.js" defer="defer"></script>
<script src="/cl-language-reference/assets/js/main.361c78c0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cl-language-reference/"><div class="navbar__logo"><img src="/cl-language-reference/img/logo.svg" alt="LISP Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/cl-language-reference/img/logo.svg" alt="LISP Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">CL Technical Reference </b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cl-language-reference/docs/intro">The CL Reference</a><a href="https://lisp-docs.github.io/docs/intro" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">The Tutorial</a><a class="navbar__item navbar__link" href="/cl-language-reference/docs/whylisp">Why Lisp?</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/cl-language-reference/docs/contribute">Contribute!</a><a class="navbar__item navbar__link" href="/cl-language-reference/blog">Blog</a><a href="https://github.com/lisp-docs/cl-language-reference/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cl-language-reference/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/contents-and-figures">Contents and Figures</a><button aria-label="Expand sidebar category &#x27;Contents and Figures&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/1-introduction">1. Introduction</a><button aria-label="Expand sidebar category &#x27;1. Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/2-syntax">2. Syntax</a><button aria-label="Expand sidebar category &#x27;2. Syntax&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/3-evaluation-and-compilation">3. Evaluation and Compilation</a><button aria-label="Expand sidebar category &#x27;3. Evaluation and Compilation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/4-types-and-classes">4. Types and Classes</a><button aria-label="Expand sidebar category &#x27;4. Types and Classes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/5-data-and-control-flow">5. Data and Control Flow</a><button aria-label="Expand sidebar category &#x27;5. Data and Control Flow&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/6-iteration">6. Iteration</a><button aria-label="Expand sidebar category &#x27;6. Iteration&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/7-objects">7. Objects</a><button aria-label="Expand sidebar category &#x27;7. Objects&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/8-structures">8. Structures</a><button aria-label="Expand sidebar category &#x27;8. Structures&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/9-conditions">9. Conditions</a><button aria-label="Expand sidebar category &#x27;9. Conditions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/10-symbols">10. Symbols</a><button aria-label="Expand sidebar category &#x27;10. Symbols&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/11-packages">11. Packages</a><button aria-label="Expand sidebar category &#x27;11. Packages&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/12-numbers">12. Numbers</a><button aria-label="Expand sidebar category &#x27;12. Numbers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/13-characters">13. Characters</a><button aria-label="Expand sidebar category &#x27;13. Characters&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/14-conses">14. Conses</a><button aria-label="Expand sidebar category &#x27;14. Conses&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/15-arrays">15. Arrays</a><button aria-label="Expand sidebar category &#x27;15. Arrays&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/16-strings">16. Strings</a><button aria-label="Expand sidebar category &#x27;16. Strings&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/17-sequences">17. Sequences</a><button aria-label="Expand sidebar category &#x27;17. Sequences&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/18-hash-tables">18. Hash Tables</a><button aria-label="Expand sidebar category &#x27;18. Hash Tables&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/19-filenames">19. Filenames</a><button aria-label="Expand sidebar category &#x27;19. Filenames&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/20-files">20. Files</a><button aria-label="Expand sidebar category &#x27;20. Files&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/21-streams">21. Streams</a><button aria-label="Expand sidebar category &#x27;21. Streams&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/cl-language-reference/docs/category/22-printer">22. Printer</a><button aria-label="Collapse sidebar category &#x27;22. Printer&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cl-language-reference/docs/chap-22/cc-b-the-lisp-printer">22.1 The Lisp Printer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cl-language-reference/docs/chap-22/cc-c-the-lisp-pretty-printer">22.2 The Lisp Pretty Printer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cl-language-reference/docs/chap-22/cc-d-formatted-output">22.3 Formatted Output</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cl-language-reference/docs/chap-22/intro">intro</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/23-reader">23. Reader</a><button aria-label="Expand sidebar category &#x27;23. Reader&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/24-system-construction">24. System Construction</a><button aria-label="Expand sidebar category &#x27;24. System Construction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/25-environment">25. Environment</a><button aria-label="Expand sidebar category &#x27;25. Environment&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/26-glossary">26. Glossary</a><button aria-label="Expand sidebar category &#x27;26. Glossary&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/category/a-appendix">A. Appendix</a><button aria-label="Expand sidebar category &#x27;A. Appendix&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cl-language-reference/docs/code-blocks-double-slashes">Code Blocks TODO Fixes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cl-language-reference/docs/code-blocks">code-blocks</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/contribute">Contribute to the CL Technical Reference</a><button aria-label="Expand sidebar category &#x27;Contribute to the CL Technical Reference&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cl-language-reference/docs/whylisp">Introduction</a><button aria-label="Expand sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/cl-language-reference/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cl-language-reference/docs/category/22-printer"><span itemprop="name">22. Printer</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">22.3 Formatted Output</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>22.3 Formatted Output</h1>
<!-- -->
<p><strong>format</strong> is useful for producing nicely formatted text, producing good-looking messages, and so on. <strong>format</strong> can generate and return a <em>string</em> or output to <em>destination</em>.</p>
<p>The <em>control-string</em> argument to <strong>format</strong> is actually a <em>format control</em>. That is, it can be either a <em>format string</em> or a <em>function</em>, for example a <em>function</em> returned by the <strong>formatter</strong> <em>macro</em>.</p>
<p>If it is a <em>function</em>, the <em>function</em> is called with the appropriate output stream as its first argument and the data arguments to <strong>format</strong> as its remaining arguments. The function should perform whatever output is necessary and return the unused tail of the arguments (if any).</p>
<p>The compilation process performed by <strong>formatter</strong> produces a <em>function</em> that would do with its <em>arguments</em> as the <strong>format</strong> interpreter would do with those <em>arguments</em>.</p>
<p>The remainder of this section describes what happens if the <em>control-string</em> is a <em>format string</em>. <em>Control-string</em> is composed of simple text (<em>characters</em>) and embedded directives.</p>
<p><strong>format</strong> writes the simple text as is; each embedded directive specifies further text output that is to appear at the corresponding point within the simple text. Most directives use one or more elements of <em>args</em> to create their output.</p>
<p>A directive consists of a <em>tilde</em>, optional prefix parameters separated by commas, optional <em>colon</em> and <em>at-sign</em> modifiers, and a single character indicating what kind of directive this is. There is no required ordering between the <em>at-sign</em> and <em>colon</em> modifier. The <em>case</em> of the directive character is ignored. Prefix parameters are notated as signed (sign is optional) decimal numbers, or as a <em>single-quote</em> followed by a character. For example, ~5,’0d can be used to print an <em>integer</em> in decimal radix in five columns with leading zeros, or ~5,’*d to get leading asterisks.</p>
<p>In place of a prefix parameter to a directive, V (or v) can be used. In this case, <strong>format</strong> takes an argument from <em>args</em> as a parameter to the directive. The argument should be an <em>integer</em> or <em>character</em> . If the <em>arg</em> used by a V parameter is <strong>nil</strong>, the effect is as if the parameter had been</p>
<p>omitted. # can be used in place of a prefix parameter; it represents the number of <em>args</em> remaining to be processed. When used within a recursive format, in the context of ~? or ~{, the # prefix parameter represents the number of <em>format arguments</em> remaining within the recursive call.</p>
<p>Examples of <em>format strings</em>:</p>
<p>|</p><p>&quot;~S&quot; ;This is an S directive with no parameters or modifiers. &quot;~3,-4:@s&quot; ;This is an S directive with two parameters, 3 and -4, ; and both the <em>colon</em> and <em>at-sign</em> flags. </p><p>&quot;~,+4S&quot; ;Here the first prefix parameter is omitted and takes ; on its default value, while the second parameter is 4.</p>|<p></p>
<p>| :-: |</p>
<p><strong>Figure 22–6. Examples of format control strings</strong></p>
<p><strong>format</strong> sends the output to <em>destination</em>. If <em>destination</em> is <strong>nil</strong>, <strong>format</strong> creates and returns a <em>string</em></p>
<p>containing the output from <em>control-string</em>. If <em>destination</em> is <em>non-nil</em>, it must be a <em>string</em> with a <em>fill pointer</em> , a <em>stream</em>, or the symbol <strong>t</strong>. If <em>destination</em> is a <em>string</em> with a <em>fill pointer</em> , the output is added to the end of the <em>string</em>. If <em>destination</em> is a <em>stream</em>, the output is sent to that <em>stream</em>. If <em>destination</em> is <strong>t</strong>, the output is sent to <em>standard output</em>.</p>
<p>In the description of the directives that follows, the term <em>arg</em> in general refers to the next item of the set of <em>args</em> to be processed. The word or phrase at the beginning of each description is a mnemonic for the directive. <strong>format</strong> directives do not bind any of the printer control variables (<strong>*print-...*</strong>) except as specified in the following descriptions. Implementations may specify the binding of new, implementation-specific printer control variables for each <strong>format</strong> directive, but they may neither bind any standard printer control variables not specified in description of a <strong>format</strong> directive nor fail to bind any standard printer control variables as specified in the description.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2231-format-basic-output">22.3.1 FORMAT Basic Output<a href="#2231-format-basic-output" class="hash-link" aria-label="Direct link to 22.3.1 FORMAT Basic Output" title="Direct link to 22.3.1 FORMAT Basic Output">​</a></h2>
<!-- -->
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22311-tilde-c">22.3.1.1 Tilde C<a href="#22311-tilde-c" class="hash-link" aria-label="Direct link to 22.3.1.1 Tilde C" title="Direct link to 22.3.1.1 Tilde C">​</a></h3>
<!-- -->
<p>The next <em>arg</em> should be a <em>character</em> ; it is printed according to the modifier flags.</p>
<p>~C prints the <em>character</em> as if by using <strong>write-char</strong> if it is a <em>simple character</em> . <em>Characters</em> that are not <em>simple</em> are not necessarily printed as if by <strong>write-char</strong>, but are displayed in an <em>implementation-defined</em>, abbreviated format. For example,</p>
<p>(format nil &quot;~C&quot; #\A) → &quot;A&quot;</p>
<p>(format nil &quot;~C&quot; #\Space) → &quot; &quot;</p>
<p>~<!-- -->:C<!-- --> is the same as ~C for <em>printing characters</em>, but other <em>characters</em> are “spelled out.” The intent is that this is a “pretty” format for printing characters. For <em>simple characters</em> that are not <em>printing</em>, what is spelled out is the <em>name</em> of the <em>character</em> (see <strong>char-name</strong>). For <em>characters</em> that are not <em>simple</em> and not <em>printing</em>, what is spelled out is <em>implementation-defined</em>. For example,</p>
<p>(format nil &quot;~<!-- -->:C<!-- -->&quot; #\A) → &quot;A&quot;</p>
<p>(format nil &quot;~<!-- -->:C<!-- -->&quot; #\Space) → &quot;Space&quot;</p>
<p>;; This next example assumes an implementation-defined &quot;Control&quot; attribute.</p>
<p>(format nil &quot;~<!-- -->:C<!-- -->&quot; #\Control-Space)</p>
<p>→ &quot;Control-Space&quot;</p>
<p><i><sup>or</sup>→</i> &quot;c-Space&quot;</p>
<p>~:@C prints what ~<!-- -->:C<!-- --> would, and then if the <em>character</em> requires unusual shift keys on the keyboard to type it, this fact is mentioned. For example,</p>
<p>(format nil &quot;~:@C&quot; #\Control-Partial) → &quot;Control-<em>∂</em> (Top-F)&quot;</p>
<p>This is the format used for telling the user about a key he is expected to type, in prompts, for instance. The precise output may depend not only on the implementation, but on the particular I/O devices in use.</p>
<p>~@C prints the <em>character</em> in a way that the <em>Lisp reader</em> can understand, using #\ syntax. ~@C binds <strong>*print-escape*</strong> to <strong>t</strong>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22312-tilde-percent">22.3.1.2 Tilde Percent<a href="#22312-tilde-percent" class="hash-link" aria-label="Direct link to 22.3.1.2 Tilde Percent" title="Direct link to 22.3.1.2 Tilde Percent">​</a></h3>
<!-- -->
<p>This outputs a #\Newline character, thereby terminating the current output line and beginning a new one. ~<em>n</em>% outputs <em>n</em> newlines. No <em>arg</em> is used.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22313-tilde-ampersand">22.3.1.3 Tilde Ampersand<a href="#22313-tilde-ampersand" class="hash-link" aria-label="Direct link to 22.3.1.3 Tilde Ampersand" title="Direct link to 22.3.1.3 Tilde Ampersand">​</a></h3>
<!-- -->
<p>Unless it can be determined that the output stream is already at the beginning of a line, this outputs a newline. ~<em>n</em>&amp; calls <strong>fresh-line</strong> and then outputs <em>n−</em>1 newlines. ~0&amp; does nothing.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22314-tilde-vertical">22.3.1.4 Tilde Vertical<a href="#22314-tilde-vertical" class="hash-link" aria-label="Direct link to 22.3.1.4 Tilde Vertical" title="Direct link to 22.3.1.4 Tilde Vertical">​</a></h3>
<!-- -->
<p>This outputs a page separator character, if possible. ~<em>n</em>| does this <em>n</em> times.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22315-tilde-tilde">22.3.1.5 Tilde Tilde<a href="#22315-tilde-tilde" class="hash-link" aria-label="Direct link to 22.3.1.5 Tilde Tilde" title="Direct link to 22.3.1.5 Tilde Tilde">​</a></h3>
<!-- -->
<p>This outputs a <em>tilde</em>. ~<em>n</em>~ outputs <em>n</em> tildes.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2232-format-radix-control">22.3.2 FORMAT Radix Control<a href="#2232-format-radix-control" class="hash-link" aria-label="Direct link to 22.3.2 FORMAT Radix Control" title="Direct link to 22.3.2 FORMAT Radix Control">​</a></h2>
<!-- -->
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22321-tilde-r">22.3.2.1 Tilde R<a href="#22321-tilde-r" class="hash-link" aria-label="Direct link to 22.3.2.1 Tilde R" title="Direct link to 22.3.2.1 Tilde R">​</a></h3>
<!-- -->
<p>~<em>n</em>R prints <em>arg</em> in radix <em>n</em>. The modifier flags and any remaining parameters are used as for the ~D directive. ~D is the same as ~10R. The full form is ~<em>radix</em> ,<em>mincol</em>,<em>padchar</em>,<em>commachar</em>,<em>comma-interval</em>R.</p>
<p>If no prefix parameters are given to ~R, then a different interpretation is given. The argument should be an <em>integer</em> . For example, if <em>arg</em> is 4:</p>
<p><em>•</em> ~R prints <em>arg</em> as a cardinal English number: four.</p>
<p><em>•</em> ~<!-- -->:R<!-- --> prints <em>arg</em> as an ordinal English number: fourth.</p>
<p><em>•</em> ~@R prints <em>arg</em> as a Roman numeral: IV.</p>
<p><em>•</em> ~:@R prints <em>arg</em> as an old Roman numeral: IIII.</p>
<p>For example:</p>
<p>(format nil &quot;~„’ ,4<!-- -->:B<!-- -->&quot; 13) → &quot;1101&quot;</p>
<p>(format nil &quot;~„’ ,4<!-- -->:B<!-- -->&quot; 17) → &quot;1 0001&quot;</p>
<p>(format nil &quot;~19,0,’ ,4<!-- -->:B<!-- -->&quot; 3333) → &quot;0000 1101 0000 0101&quot;</p>
<p>(format nil &quot;~3„,’ ,2<!-- -->:R<!-- -->&quot; 17) → &quot;1 22&quot;</p>
<p>(format nil &quot;~„’|,2<!-- -->:D<!-- -->&quot; #xFFFF) → &quot;6|55|35&quot;</p>
<p>If and only if the first parameter, <em>n</em>, is supplied, ~R binds <strong>*print-escape*</strong> to <em>false</em>, <strong>*print-radix*</strong> to <em>false</em>, <strong>*print-base*</strong> to <em>n</em>, and <strong>*print-readably*</strong> to <em>false</em>.</p>
<p>If and only if no parameters are supplied, ~R binds <strong>*print-base*</strong> to 10.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22322-tilde-d">22.3.2.2 Tilde D<a href="#22322-tilde-d" class="hash-link" aria-label="Direct link to 22.3.2.2 Tilde D" title="Direct link to 22.3.2.2 Tilde D">​</a></h3>
<!-- -->
<p>An <em>arg</em>, which should be an <em>integer</em> , is printed in decimal radix. ~D will never put a decimal point after the number.</p>
<p>~<em>mincol</em>D uses a column width of <em>mincol</em>; spaces are inserted on the left if the number requires fewer than <em>mincol</em> columns for its digits and sign. If the number doesn’t fit in <em>mincol</em> columns, additional columns are used as needed.</p>
<p>~<em>mincol</em>,<em>padchar</em>D uses <em>padchar</em> as the pad character instead of space.</p>
<p>If <em>arg</em> is not an <em>integer</em> , it is printed in ~A format and decimal base.</p>
<p>The @ modifier causes the number’s sign to be printed always; the default is to print it only if the number is negative. The : modifier causes commas to be printed between groups of digits; <em>commachar</em> may be used to change the character used as the comma. <em>comma-interval</em> must be an <em>integer</em> and defaults to 3. When the : modifier is given to any of these directives, the <em>commachar</em> is printed between groups of <em>comma-interval</em> digits.</p>
<p>Thus the most general form of ~D is ~<em>mincol</em>,<em>padchar</em>,<em>commachar</em>,<em>comma-interval</em>D.</p>
<p>~D binds <strong>*print-escape*</strong> to <em>false</em>, <strong>*print-radix*</strong> to <em>false</em>, <strong>*print-base*</strong> to 10, and <strong>*print-readably*</strong> to <em>false</em>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22323-tilde-b">22.3.2.3 Tilde B<a href="#22323-tilde-b" class="hash-link" aria-label="Direct link to 22.3.2.3 Tilde B" title="Direct link to 22.3.2.3 Tilde B">​</a></h3>
<!-- -->
<p>This is just like ~D but prints in binary radix (radix 2) instead of decimal. The full form is therefore ~<em>mincol</em>,<em>padchar</em>,<em>commachar</em>,<em>comma-interval</em>B.</p>
<p>~B binds <strong>*print-escape*</strong> to <em>false</em>, <strong>*print-radix*</strong> to <em>false</em>, <strong>*print-base*</strong> to 2, and <strong>*print-readably*</strong> to <em>false</em>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22324-tilde-o">22.3.2.4 Tilde O<a href="#22324-tilde-o" class="hash-link" aria-label="Direct link to 22.3.2.4 Tilde O" title="Direct link to 22.3.2.4 Tilde O">​</a></h3>
<!-- -->
<p>This is just like ~D but prints in octal radix (radix 8) instead of decimal. The full form is therefore ~<em>mincol</em>,<em>padchar</em>,<em>commachar</em>,<em>comma-interval</em>O.</p>
<p>~O binds <strong>*print-escape*</strong> to <em>false</em>, <strong>*print-radix*</strong> to <em>false</em>, <strong>*print-base*</strong> to 8, and <strong>*print-readably*</strong> to <em>false</em>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22325-tilde-x">22.3.2.5 Tilde X<a href="#22325-tilde-x" class="hash-link" aria-label="Direct link to 22.3.2.5 Tilde X" title="Direct link to 22.3.2.5 Tilde X">​</a></h3>
<!-- -->
<p>This is just like ~D but prints in hexadecimal radix (radix 16) instead of decimal. The full form is therefore ~<em>mincol</em>,<em>padchar</em>,<em>commachar</em>,<em>comma-interval</em>X.</p>
<p>~X binds <strong>*print-escape*</strong> to <em>false</em>, <strong>*print-radix*</strong> to <em>false</em>, <strong>*print-base*</strong> to 16, and <strong>*print-readably*</strong> to <em>false</em>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2233-format-floating">22.3.3 FORMAT Floating<a href="#2233-format-floating" class="hash-link" aria-label="Direct link to 22.3.3 FORMAT Floating" title="Direct link to 22.3.3 FORMAT Floating">​</a></h2>
<!-- -->
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22331-tilde-f">22.3.3.1 Tilde F<a href="#22331-tilde-f" class="hash-link" aria-label="Direct link to 22.3.3.1 Tilde F" title="Direct link to 22.3.3.1 Tilde F">​</a></h3>
<!-- -->
<p>The next <em>arg</em> is printed as a <em>float</em>.</p>
<p>The full form is ~<em>w</em>,<em>d</em>,<em>k</em>,<em>overflowchar</em>,<em>padchar</em>F. The parameter <em>w</em> is the width of the field to be printed; <em>d</em> is the number of digits to print after the decimal point; <em>k</em> is a scale factor that defaults to zero.</p>
<p>Exactly <i>w</i> characters will be output. First, leading copies of the character <i>padchar</i> (which defaults to a space) are printed, if necessary, to pad the field on the left. If the <i>arg</i> is negative, then a minus sign is printed; if the <i>arg</i> is not negative, then a plus sign is printed if and only if the @ modifier was supplied. Then a sequence of digits, containing a single embedded decimal point, is printed; this represents the magnitude of the value of <i>arg</i> times 10<i><sup>k</sup></i>, rounded to <i>d</i> fractional digits. When rounding up and rounding down would produce printed values equidistant from the scaled value of <i>arg</i>, then the implementation is free to use either one. For example, printing the argument 6.375 using the format ~4,2F may correctly produce either 6.37 or 6.38. Leading zeros are not permitted, except that a single zero digit is output before the decimal point if the printed value is less than one, and this single zero digit is not output at all if <i>w</i>=<i>d</i>+1.</p>
<p>If it is impossible to print the value in the required format in a field of width <em>w</em>, then one of two actions is taken. If the parameter <em>overflowchar</em> is supplied, then <em>w</em> copies of that parameter are printed instead of the scaled value of <em>arg</em>. If the <em>overflowchar</em> parameter is omitted, then the scaled value is printed using more than <em>w</em> characters, as many more as may be needed.</p>
<p>If the <em>w</em> parameter is omitted, then the field is of variable width. In effect, a value is chosen for <em>w</em> in such a way that no leading pad characters need to be printed and exactly <em>d</em> characters will follow the decimal point. For example, the directive ~,2F will print exactly two digits after the decimal point and as many as necessary before the decimal point.</p>
<p>If the parameter <em>d</em> is omitted, then there is no constraint on the number of digits to appear after the decimal point. A value is chosen for <em>d</em> in such a way that as many digits as possible may be printed subject to the width constraint imposed by the parameter <em>w</em> and the constraint that no</p>
<p>trailing zero digits may appear in the fraction, except that if the fraction to be printed is zero, then a single zero digit should appear after the decimal point if permitted by the width constraint.</p>
<p>If both <i>w</i> and <i>d</i> are omitted, then the effect is to print the value using ordinary free-format output; <strong>prin1</strong> uses this format for any number whose magnitude is either zero or between 10<sup><i>−</i>3</sup>(inclusive) and 10<sup>7</sup>(exclusive).</p>
<p>If <em>w</em> is omitted, then if the magnitude of <em>arg</em> is so large (or, if <em>d</em> is also omitted, so small) that more than 100 digits would have to be printed, then an implementation is free, at its discretion, to print the number using exponential notation instead, as if by the directive ~E (with all parameters to ~E defaulted, not taking their values from the ~F directive).</p>
<p>If <em>arg</em> is a <em>rational</em> number, then it is coerced to be a <em>single float</em> and then printed. Alternatively, an implementation is permitted to process a <em>rational</em> number by any other method that has essentially the same behavior but avoids loss of precision or overflow because of the coercion. If <em>w</em> and <em>d</em> are not supplied and the number has no exact decimal representation, for example 1/3, some precision cutoff must be chosen by the implementation since only a finite number of digits may be printed.</p>
<p>If <em>arg</em> is a <em>complex</em> number or some non-numeric <em>object</em>, then it is printed using the format directive ~<em>w</em>D, thereby printing it in decimal radix and a minimum field width of <em>w</em>.</p>
<p>~F binds <strong>*print-escape*</strong> to <em>false</em> and <strong>*print-readably*</strong> to <em>false</em>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22332-tilde-e">22.3.3.2 Tilde E<a href="#22332-tilde-e" class="hash-link" aria-label="Direct link to 22.3.3.2 Tilde E" title="Direct link to 22.3.3.2 Tilde E">​</a></h3>
<!-- -->
<p>The next <em>arg</em> is printed as a <em>float</em> in exponential notation.</p>
<p>The full form is ~<em>w</em>,<em>d</em>,<em>e</em>,<em>k</em>,<em>overflowchar</em>,<em>padchar</em>,<em>exponentchar</em>E. The parameter <em>w</em> is the width of the field to be printed; <em>d</em> is the number of digits to print after the decimal point; <em>e</em> is the number of digits to use when printing the exponent; <em>k</em> is a scale factor that defaults to one (not zero).</p>
<p>Exactly <em>w</em> characters will be output. First, leading copies of the character <em>padchar</em> (which defaults to a space) are printed, if necessary, to pad the field on the left. If the <em>arg</em> is negative, then a minus sign is printed; if the <em>arg</em> is not negative, then a plus sign is printed if and only if the @ modifier was supplied. Then a sequence of digits containing a single embedded decimal point is printed. The form of this sequence of digits depends on the scale factor <em>k</em>. If <em>k</em> is zero, then <em>d</em> digits are printed after the decimal point, and a single zero digit appears before the decimal point if the total field width will permit it. If <em>k</em> is positive, then it must be strictly less than <em>d</em>+2; <em>k</em> significant digits are printed before the decimal point, and <em>d−k</em>+1 digits are printed after the decimal point. If <em>k</em> is negative, then it must be strictly greater than <em>−d</em>; a single zero digit appears before the decimal point if the total field width will permit it, and after the decimal point are printed first <em>−k</em> zeros and then <em>d</em>+<em>k</em> significant digits. The printed fraction must be properly rounded. When rounding up and rounding down would produce printed values equidistant from the scaled value of <em>arg</em>, then the implementation is free to use either one. For example, printing the argument 637.5 using the format ~8,2E may correctly produce either 6.37E+2 or 6.38E+2.</p>
<p>Following the digit sequence, the exponent is printed. First the character parameter <em>exponentchar</em> is printed; if this parameter is omitted, then the <em>exponent marker</em> that <strong>prin1</strong> would use is printed, as determined from the type of the <em>float</em> and the current value of <strong>*read-default-float-format*</strong>. Next, either a plus sign or a minus sign is printed, followed by <em>e</em> digits representing the power of ten by which the printed fraction must be multiplied to properly represent the rounded value of <em>arg</em>.</p>
<p>If it is impossible to print the value in the required format in a field of width <em>w</em>, possibly because <em>k</em> is too large or too small or because the exponent cannot be printed in <em>e</em> character positions, then one of two actions is taken. If the parameter <em>overflowchar</em> is supplied, then <em>w</em> copies of that parameter are printed instead of the scaled value of <em>arg</em>. If the <em>overflowchar</em> parameter is omitted, then the scaled value is printed using more than <em>w</em> characters, as many more as may be needed; if the problem is that <em>d</em> is too small for the supplied <em>k</em> or that <em>e</em> is too small, then a larger value is used for <em>d</em> or <em>e</em> as may be needed.</p>
<p>If the <em>w</em> parameter is omitted, then the field is of variable width. In effect a value is chosen for <em>w</em> in such a way that no leading pad characters need to be printed.</p>
<p>If the parameter <em>d</em> is omitted, then there is no constraint on the number of digits to appear. A value is chosen for <em>d</em> in such a way that as many digits as possible may be printed subject to the width constraint imposed by the parameter <em>w</em>, the constraint of the scale factor <em>k</em>, and the constraint that no trailing zero digits may appear in the fraction, except that if the fraction to be printed is zero then a single zero digit should appear after the decimal point.</p>
<p>If the parameter <em>e</em> is omitted, then the exponent is printed using the smallest number of digits necessary to represent its value.</p>
<p>If all of <i>w</i>, <i>d</i>, and <i>e</i> are omitted, then the effect is to print the value using ordinary free-format exponential-notation output; <strong>prin1</strong> uses a similar format for any non-zero number whose magnitude is less than 10<sup><i>−</i>3</sup> or greater than or equal to 10<sup>7</sup>. The only difference is that the ~E directive always prints a plus or minus sign in front of the exponent, while <strong>prin1</strong> omits the plus sign if the exponent is non-negative.</p>
<p>If <em>arg</em> is a <em>rational</em> number, then it is coerced to be a <em>single float</em> and then printed. Alternatively, an implementation is permitted to process a <em>rational</em> number by any other method that has essentially the same behavior but avoids loss of precision or overflow because of the coercion. If <em>w</em> and <em>d</em> are unsupplied and the number has no exact decimal representation, for example 1/3, some precision cutoff must be chosen by the implementation since only a finite number of digits may be printed.</p>
<p>If <em>arg</em> is a <em>complex</em> number or some non-numeric <em>object</em>, then it is printed using the format directive ~<em>w</em>D, thereby printing it in decimal radix and a minimum field width of <em>w</em>.</p>
<p>~E binds <strong>*print-escape*</strong> to <em>false</em> and <strong>*print-readably*</strong> to <em>false</em>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22333-tilde-g">22.3.3.3 Tilde G<a href="#22333-tilde-g" class="hash-link" aria-label="Direct link to 22.3.3.3 Tilde G" title="Direct link to 22.3.3.3 Tilde G">​</a></h3>
<!-- -->
<p>The next <em>arg</em> is printed as a <em>float</em> in either fixed-format or exponential notation as appropriate.</p>
<p>The full form is ~<i>w</i>,<i>d</i>,<i>e</i>,<i>k</i>,<i>overflowchar</i>,<i>padchar</i>,<i>exponentchar</i>G. The format in which to print <i>arg</i> depends on the magnitude (absolute value) of the <i>arg</i>. Let <i>n</i> be an integer such that 10<sup><i>n−</i>1</sup> <i>≤ |arg|</i> &lt; 10<i><sup>n</sup></i>. Let <i>ee</i> equal <i>e</i>+2, or 4 if <i>e</i> is omitted. Let <i>ww</i> equal <i>w−ee</i>, or <strong>nil</strong> if <i>w</i> is omitted. If <i>d</i> is omitted, first let <i>q</i> be the number of digits needed to print <i>arg</i> with no loss of information and without leading or trailing zeros; then let <i>d</i> equal (max <i>q</i> (min <i>n</i> 7)). Let <i>dd</i> equal <i>d−n</i>.</p>
<p>If 0 <em>≤ dd ≤ d</em>, then <em>arg</em> is printed as if by the format directives</p>
<p>~<em>ww</em>,<em>dd</em>„<em>overflowchar</em>,<em>padchar</em>F~<em>ee</em>@T</p>
<p>Note that the scale factor <em>k</em> is not passed to the ~F directive. For all other values of <em>dd</em>, <em>arg</em> is printed as if by the format directive</p>
<p>~<em>w</em>,<em>d</em>,<em>e</em>,<em>k</em>,<em>overflowchar</em>,<em>padchar</em>,<em>exponentchar</em>E</p>
<p>In either case, an @ modifier is supplied to the ~F or ~E directive if and only if one was supplied to the ~G directive.</p>
<p>~G binds <strong>*print-escape*</strong> to <em>false</em> and <strong>*print-readably*</strong> to <em>false</em>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22334-tilde-dollarsign">22.3.3.4 Tilde Dollarsign<a href="#22334-tilde-dollarsign" class="hash-link" aria-label="Direct link to 22.3.3.4 Tilde Dollarsign" title="Direct link to 22.3.3.4 Tilde Dollarsign">​</a></h3>
<!-- -->
<p>The next <em>arg</em> is printed as a <em>float</em> in fixed-format notation.</p>
<p>The full form is ~<em>d</em>,<em>n</em>,<em>w</em>,<em>padchar</em>$. The parameter <em>d</em> is the number of digits to print after the decimal point (default value 2); <em>n</em> is the minimum number of digits to print before the decimal point (default value 1); <em>w</em> is the minimum total width of the field to be printed (default value 0).</p>
<p>First padding and the sign are output. If the <em>arg</em> is negative, then a minus sign is printed; if the <em>arg</em> is not negative, then a plus sign is printed if and only if the @ modifier was supplied. If the : modifier is used, the sign appears before any padding, and otherwise after the padding. If <em>w</em> is supplied and the number of other characters to be output is less than <em>w</em>, then copies of <em>padchar</em> (which defaults to a space) are output to make the total field width equal <em>w</em>. Then <em>n</em> digits are printed for the integer part of <em>arg</em>, with leading zeros if necessary; then a decimal point; then <em>d</em> digits of fraction, properly rounded.</p>
<p>If the magnitude of <em>arg</em> is so large that more than <em>m</em> digits would have to be printed, where <em>m</em> is the larger of <em>w</em> and 100, then an implementation is free, at its discretion, to print the number using exponential notation instead, as if by the directive ~<em>w</em>,<em>q</em>„„<em>padchar</em>E, where <em>w</em> and <em>padchar</em></p>
<p>are present or omitted according to whether they were present or omitted in the ~$ directive, and where <em>q</em>=<em>d</em>+<em>n−</em>1, where <em>d</em> and <em>n</em> are the (possibly default) values given to the ~$ directive.</p>
<p>If <em>arg</em> is a <em>rational</em> number, then it is coerced to be a <em>single float</em> and then printed. Alternatively, an implementation is permitted to process a <em>rational</em> number by any other method that has essentially the same behavior but avoids loss of precision or overflow because of the coercion.</p>
<p>If <em>arg</em> is a <em>complex</em> number or some non-numeric <em>object</em>, then it is printed using the format directive ~<em>w</em>D, thereby printing it in decimal radix and a minimum field width of <em>w</em>.</p>
<p>~$ binds <strong>*print-escape*</strong> to <em>false</em> and <strong>*print-readably*</strong> to <em>false</em>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2234-format-printer-operations">22.3.4 FORMAT Printer Operations<a href="#2234-format-printer-operations" class="hash-link" aria-label="Direct link to 22.3.4 FORMAT Printer Operations" title="Direct link to 22.3.4 FORMAT Printer Operations">​</a></h2>
<!-- -->
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22341-tilde-a">22.3.4.1 Tilde A<a href="#22341-tilde-a" class="hash-link" aria-label="Direct link to 22.3.4.1 Tilde A" title="Direct link to 22.3.4.1 Tilde A">​</a></h3>
<!-- -->
<p>An <em>arg</em>, any <em>object</em>, is printed without escape characters (as by <strong>princ</strong>). If <em>arg</em> is a <em>string</em>, its <em>characters</em> will be output verbatim. If <em>arg</em> is <strong>nil</strong> it will be printed as <strong>nil</strong>; the <em>colon</em> modifier (~<!-- -->:A<!-- -->) will cause an <em>arg</em> of <strong>nil</strong> to be printed as (), but if <em>arg</em> is a composite structure, such as a <em>list</em> or <em>vector</em> , any contained occurrences of <strong>nil</strong> will still be printed as <strong>nil</strong>.</p>
<p>~<em>mincol</em>A inserts spaces on the right, if necessary, to make the width at least <em>mincol</em> columns. The @ modifier causes the spaces to be inserted on the left rather than the right.</p>
<p>~<em>mincol</em>,<em>colinc</em>,<em>minpad</em>,<em>padchar</em>A is the full form of ~A, which allows control of the padding. The <em>string</em> is padded on the right (or on the left if the @ modifier is used) with at least <em>minpad</em> copies of <em>padchar</em> ; padding characters are then inserted <em>colinc</em> characters at a time until the total width is at least <em>mincol</em>. The defaults are 0 for <em>mincol</em> and <em>minpad</em>, 1 for <em>colinc</em>, and the space character</p>
<p>for <em>padchar</em> .</p>
<p>~A binds <strong>*print-escape*</strong> to <em>false</em>, and <strong>*print-readably*</strong> to <em>false</em>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22342-tilde-s">22.3.4.2 Tilde S<a href="#22342-tilde-s" class="hash-link" aria-label="Direct link to 22.3.4.2 Tilde S" title="Direct link to 22.3.4.2 Tilde S">​</a></h3>
<!-- -->
<p>This is just like ~A, but <em>arg</em> is printed with escape characters (as by <strong>prin1</strong> rather than princ). The output is therefore suitable for input to <strong>read</strong>. ~S accepts all the arguments and modifiers that ~A does.</p>
<p>~S binds <strong>*print-escape*</strong> to <strong>t</strong>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22343-tilde-w">22.3.4.3 Tilde W<a href="#22343-tilde-w" class="hash-link" aria-label="Direct link to 22.3.4.3 Tilde W" title="Direct link to 22.3.4.3 Tilde W">​</a></h3>
<!-- -->
<p>An argument, any <em>object</em>, is printed obeying every printer control variable (as by <strong>write</strong>). In addition, ~W interacts correctly with depth abbreviation, by not resetting the depth counter to zero. ~W does not accept parameters. If given the <em>colon</em> modifier, ~W binds <strong>*print-pretty*</strong> to <em>true</em>. If given the <em>at-sign</em> modifier, ~W binds <strong>*print-level*</strong> and <strong>*print-length*</strong> to <strong>nil</strong>.</p>
<p>~W provides automatic support for the detection of circularity and sharing. If the <em>value</em> of <strong>*print-circle*</strong> is not <strong>nil</strong> and ~W is applied to an argument that is a circular (or shared) reference, an appropriate #<em>n</em># marker is inserted in the output instead of printing the argument.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2235-format-pretty-printer-operations">22.3.5 FORMAT Pretty Printer Operations<a href="#2235-format-pretty-printer-operations" class="hash-link" aria-label="Direct link to 22.3.5 FORMAT Pretty Printer Operations" title="Direct link to 22.3.5 FORMAT Pretty Printer Operations">​</a></h2>
<!-- -->
<p>The following constructs provide access to the <em>pretty printer</em> :</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22351-tilde-underscore">22.3.5.1 Tilde Underscore<a href="#22351-tilde-underscore" class="hash-link" aria-label="Direct link to 22.3.5.1 Tilde Underscore" title="Direct link to 22.3.5.1 Tilde Underscore">​</a></h3>
<!-- -->
<p>Without any modifiers, ~ is the same as (pprint-newline <!-- -->:linear<!-- -->). ~@ is the same as (pprint-newline <!-- -->:miser<!-- -->). ~: is the same as (pprint-newline <!-- -->:fill<!-- -->). ~:@ is the same as (pprint-newline <!-- -->:mandatory<!-- -->).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22352-tilde-less">22.3.5.2 Tilde Less<a href="#22352-tilde-less" class="hash-link" aria-label="Direct link to 22.3.5.2 Tilde Less" title="Direct link to 22.3.5.2 Tilde Less">​</a></h3>
<!-- -->
<p>~&lt;...~:&gt;</p>
<p>If ~:&gt; is used to terminate a ~&lt;...~&gt;, the directive is equivalent to a call to <strong>pprint-logical-block</strong>. The argument corresponding to the ~&lt;...~:&gt; directive is treated in the same way as the <em>list</em> argument to <strong>pprint-logical-block</strong>, thereby providing automatic support for non-<em>list</em> arguments and the detection of circularity, sharing, and depth abbreviation. The portion of the <em>control-string</em> nested within the ~&lt;...~:&gt; specifies the <!-- -->:prefix<!-- --> (or <!-- -->:per-line-prefix<!-- -->), <!-- -->:suffix<!-- -->, and body of the <strong>pprint-logical-block</strong>.</p>
<p>The <em>control-string</em> portion enclosed by ~&lt;...~:&gt; can be divided into segments ~&lt;<em>prefix</em>~;<em>body</em>~;<em>suffix</em>~:&gt; by ~; directives. If the first section is terminated by ~@;, it speci fies a per-line prefix rather than a simple prefix. The <em>prefix</em> and <em>suffix</em> cannot contain format directives. An error is signaled if either the prefix or suffix fails to be a constant string or if the enclosed portion is divided into more than three segments.</p>
<p>If the enclosed portion is divided into only two segments, the <em>suffix</em> defaults to the null string. If the enclosed portion consists of only a single segment, both the <em>prefix</em> and the <em>suffix</em> default to the null string. If the <em>colon</em> modifier is used (<em>i.e.</em>, ~:&lt;...~:&gt;), the <em>prefix</em> and <em>suffix</em> default to &quot;(&quot; and &quot;)&quot; (respectively) instead of the null string.</p>
<p>The body segment can be any arbitrary <i>format string</i>. This <i>format string</i> is applied to the elements of the list corresponding to the ~&lt;...~:&gt; directive as a whole. Elements are extracted from this list using <strong>pprint-pop</strong>, thereby providing automatic support for malformed lists, and the detection of circularity, sharing, and length abbreviation. Within the body segment, ~<i><sup>^</sup></i> acts like <strong>pprint-exit-if-list-exhausted</strong>.</p>
<p>~&lt;...~:&gt; supports a feature not supported by <strong>pprint-logical-block</strong>. If ~:@&gt; is used to terminate the directive (<em>i.e.</em>, ~&lt;...~:@&gt;), then a fill-style conditional newline is automatically inserted after each group of blanks immediately contained in the body (except for blanks after a <em>hNewlinei</em> directive). This makes it easy to achieve the equivalent of paragraph filling.</p>
<p>If the <em>at-sign</em> modifier is used with ~&lt;...~:&gt;, the entire remaining argument list is passed to the directive as its argument. All of the remaining arguments are always consumed by ~@&lt;...~:&gt;, even if they are not all used by the <em>format string</em> nested in the directive. Other than the difference in its argument, ~@&lt;...~:&gt; is exactly the same as ~&lt;...~:&gt; except that circularity detection is not applied if ~@&lt;...~:&gt; is encountered at top level in a <em>format string</em>. This ensures that circularity detection is applied only to data lists, not to <em>format argument lists</em>.</p>
<p>&quot; . #<em>n</em>#&quot; is printed if circularity or sharing has to be indicated for its argument as a whole.</p>
<p>To a considerable extent, the basic form of the directive ~&lt;...~&gt; is incompatible with the dynamic control of the arrangement of output by ~W, ~ , ~&lt;...~:&gt;, ~I, and ~<!-- -->:T<!-- -->. As a result, an error is signaled if any of these directives is nested within ~&lt;...~&gt;. Beyond this, an error is also signaled if the ~&lt;...~:;...~&gt; form of ~&lt;...~&gt; is used in the same <em>format string</em> with ~W, ~ , ~&lt;...~:&gt;, ~I, or ~<!-- -->:T<!-- -->.</p>
<p>See also Section 22.3.6.2 (Tilde Less-Than-Sign: Justification).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22353-tilde-i">22.3.5.3 Tilde I<a href="#22353-tilde-i" class="hash-link" aria-label="Direct link to 22.3.5.3 Tilde I" title="Direct link to 22.3.5.3 Tilde I">​</a></h3>
<!-- -->
<p>~<em>n</em>I is the same as (pprint-indent <!-- -->:block<!-- --> n).</p>
<p>~<em>n</em>:I<!-- --> is the same as (pprint-indent <!-- -->:current<!-- --> n). In both cases, <em>n</em> defaults to zero, if it is omitted.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22354-tilde-slash">22.3.5.4 Tilde Slash<a href="#22354-tilde-slash" class="hash-link" aria-label="Direct link to 22.3.5.4 Tilde Slash" title="Direct link to 22.3.5.4 Tilde Slash">​</a></h3>
<!-- -->
<p>~/<em>name</em>/</p>
<p>User defined functions can be called from within a format string by using the directive ~/<em>name</em>/. The <em>colon</em> modifier, the <em>at-sign</em> modifier, and arbitrarily many parameters can be specified with the ~/<em>name</em>/ directive. <em>name</em> can be any arbitrary string that does not contain a ”/”. All of the characters in <em>name</em> are treated as if they were upper case. If <em>name</em> contains a single <em>colon</em> (:) or double <em>colon</em> (::), then everything up to but not including the first &quot;:&quot; or &quot;::&quot; is taken to be a <em>string</em> that names a <em>package</em>. Everything after the first &quot;:&quot; or &quot;::&quot; (if any) is taken to be a <em>string</em></p>
<p>that names a symbol. The function corresponding to a ~/name/ directive is obtained by looking up the <em>symbol</em> that has the indicated name in the indicated <em>package</em>. If <em>name</em> does not contain a &quot;:&quot; or &quot;::&quot;, then the whole <em>name</em> string is looked up in the COMMON-LISP-USER <em>package</em>.</p>
<p>When a ~/name/ directive is encountered, the indicated function is called with four or more arguments. The first four arguments are: the output stream, the <em>format argument</em> corresponding to the directive, a <em>generalized boolean</em> that is <em>true</em> if the <em>colon</em> modifier was used, and a <em>generalized boolean</em> that is <em>true</em> if the <em>at-sign</em> modifier was used. The remaining arguments consist of any parameters specified with the directive. The function should print the argument appropriately. Any values returned by the function are ignored.</p>
<p>The three <em>functions</em> <strong>pprint-linear</strong>, <strong>pprint-fill</strong>, and <strong>pprint-tabular</strong> are specifically designed so that they can be called by ~/.../ (<em>i.e.</em>, ~/pprint-linear/, ~/pprint-fill/, and ~/pprint-tabular/). In particular they take <em>colon</em> and <em>at-sign</em> arguments.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2236-format-layout-control">22.3.6 FORMAT Layout Control<a href="#2236-format-layout-control" class="hash-link" aria-label="Direct link to 22.3.6 FORMAT Layout Control" title="Direct link to 22.3.6 FORMAT Layout Control">​</a></h2>
<!-- -->
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22361-tilde-t">22.3.6.1 Tilde T<a href="#22361-tilde-t" class="hash-link" aria-label="Direct link to 22.3.6.1 Tilde T" title="Direct link to 22.3.6.1 Tilde T">​</a></h3>
<!-- -->
<p>This spaces over to a given column. ~<em>colnum</em>,<em>colinc</em>T will output sufficient spaces to move the cursor to column <em>colnum</em>. If the cursor is already at or beyond column <em>colnum</em>, it will output spaces to move it to column <em>colnum</em>+<em>k</em>*<em>colinc</em> for the smallest positive integer <em>k</em> possible, unless <em>colinc</em> is zero, in which case no spaces are output if the cursor is already at or beyond column <em>colnum</em>. <em>colnum</em> and <em>colinc</em> default to 1.</p>
<p>If for some reason the current absolute column position cannot be determined by direct inquiry, <strong>format</strong> may be able to deduce the current column position by noting that certain directives (such as ~%, or ~&amp;, or ~A with the argument being a string containing a newline) cause the column position to be reset to zero, and counting the number of characters emitted since that point. If that fails, <strong>format</strong> may attempt a similar deduction on the riskier assumption that the destination was at column zero when <strong>format</strong> was invoked. If even this heuristic fails or is implementationally inconvenient, at worst the ~T operation will simply output two spaces.</p>
<p>~@T performs relative tabulation. ~<em>colrel</em>,<em>colinc</em>@T outputs <em>colrel</em> spaces and then outputs the smallest non-negative number of additional spaces necessary to move the cursor to a column that is a multiple of <em>colinc</em>. For example, the directive ~3,8@T outputs three spaces and then moves the cursor to a “standard multiple-of-eight tab stop” if not at one already. If the current output column cannot be determined, however, then <em>colinc</em> is ignored, and exactly <em>colrel</em> spaces are output.</p>
<p>If the <em>colon</em> modifier is used with the ~T directive, the tabbing computation is done relative to the horizontal position where the section immediately containing the directive begins, rather than with respect to a horizontal position of zero. The numerical parameters are both interpreted as being in units of <em>ems</em> and both default to 1. ~<em>n</em>,<em>m</em>:T<!-- --> is the same as (pprint-tab <!-- -->:section<!-- --> <em>n m</em>). ~<em>n</em>,<em>m</em>:@T</p>
<p>is the same as (pprint-tab <!-- -->:section-relative<!-- --> <em>n m</em>).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22362-tilde-less">22.3.6.2 Tilde Less<a href="#22362-tilde-less" class="hash-link" aria-label="Direct link to 22.3.6.2 Tilde Less" title="Direct link to 22.3.6.2 Tilde Less">​</a></h3>
<!-- -->
<p>~<em>mincol</em>,<em>colinc</em>,<em>minpad</em>,<em>padchar</em>&lt;<em>str</em>~&gt;</p>
<p>This justifies the text produced by processing <em>str</em> within a field at least <em>mincol</em> columns wide. <em>str</em> may be divided up into segments with ~;, in which case the spacing is evenly divided between the text segments.</p>
<p>With no modifiers, the leftmost text segment is left justified in the field, and the rightmost text segment is right justified. If there is only one text element, as a special case, it is right justified. The : modifier causes spacing to be introduced before the first text segment; the @ modifier causes spacing to be added after the last. The <em>minpad</em> parameter (default 0) is the minimum number of padding characters to be output between each segment. The padding character is supplied by <em>padchar</em> , which defaults to the space character. If the total width needed to satisfy these constraints is greater than <em>mincol</em>, then the width used is <em>mincol</em>+<em>k</em>*<em>colinc</em> for the smallest possible non-negative integer value <em>k</em>. <em>colinc</em> defaults to 1, and <em>mincol</em> defaults to 0.</p>
<p>Note that <em>str</em> may include <strong>format</strong> directives. All the clauses in <em>str</em> are processed in order; it is the resulting pieces of text that are justified.</p>
<p>The ~<i><sup>^</sup></i> directive may be used to terminate processing of the clauses prematurely, in which case only the completely processed clauses are justified.</p>
<p>If the first clause of a ~&lt; is terminated with ~:; instead of ~;, then it is used in a special way. All of the clauses are processed (subject to ~<i><sup>^</sup></i>, of course), but the first one is not used in performing the spacing and padding. When the padded result has been determined, then if it will fit on the current line of output, it is output, and the text for the first clause is discarded. If, however, the</p>
<p>padded text will not fit on the current line, then the text segment for the first clause is output before the padded text. The first clause ought to contain a newline (such as a ~% directive). The first clause is always processed, and so any arguments it refers to will be used; the decision is whether to use the resulting segment of text, not whether to process the first clause. If the ~:; has a prefix parameter <em>n</em>, then the padded text must fit on the current line with <em>n</em> character positions to spare to avoid outputting the first clause’s text. For example, the control string</p>
<p>&quot;~%;; ~{~&lt;~%;; ~1:; ~S~&gt;~<i><sup>^</sup></i>,~}.~%&quot;</p>
<p>can be used to print a list of items separated by commas without breaking items over line boundaries, beginning each line with ;; . The prefix parameter 1 in ~1:; accounts for the width of the comma that will follow the justified item if it is not the last element in the list, or the period if it is. If ~:; has a second prefix parameter, then it is used as the width of the line, thus overriding the natural line width of the output stream. To make the preceding example use a line width of 50, one would write</p>
<p>&quot;~%;; ~{~&lt;~%;; ~1,50:; ~S~&gt;~<i><sup>^</sup></i>,~} .~%&quot;</p>
<p>If the second argument is not supplied, then <strong>format</strong> uses the line width of the <em>destination</em> output stream. If this cannot be determined (for example, when producing a <em>string</em> result), then <strong>format</strong> uses 72 as the line length.</p>
<p>See also Section 22.3.5.2 (Tilde Less-Than-Sign: Logical Block).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22363-tilde-greater">22.3.6.3 Tilde Greater<a href="#22363-tilde-greater" class="hash-link" aria-label="Direct link to 22.3.6.3 Tilde Greater" title="Direct link to 22.3.6.3 Tilde Greater">​</a></h3>
<!-- -->
<p>~&gt; terminates a ~&lt;. The consequences of using it elsewhere are undefined.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2237-format-control">22.3.7 FORMAT Control<a href="#2237-format-control" class="hash-link" aria-label="Direct link to 22.3.7 FORMAT Control" title="Direct link to 22.3.7 FORMAT Control">​</a></h2>
<!-- -->
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22371-tilde-asterisk">22.3.7.1 Tilde Asterisk<a href="#22371-tilde-asterisk" class="hash-link" aria-label="Direct link to 22.3.7.1 Tilde Asterisk" title="Direct link to 22.3.7.1 Tilde Asterisk">​</a></h3>
<!-- -->
<p>The next <em>arg</em> is ignored. ~<em>n</em>* ignores the next <em>n</em> arguments.</p>
<p>~:* backs up in the list of arguments so that the argument last processed will be processed again. ~<em>n</em>:* backs up <em>n</em> arguments.</p>
<p>When within a ~{ construct (see below), the ignoring (in either direction) is relative to the list of arguments being processed by the iteration.</p>
<p>~<em>n</em>@* goes to the <em>n</em>th <em>arg</em>, where 0 means the first one; <em>n</em> defaults to 0, so ~@* goes back to the first <em>arg</em>. Directives after a ~<em>n</em>@* will take arguments in sequence beginning with the one gone to. When within a ~{ construct, the “goto” is relative to the list of arguments being processed by the iteration.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22372-tilde-left">22.3.7.2 Tilde Left<a href="#22372-tilde-left" class="hash-link" aria-label="Direct link to 22.3.7.2 Tilde Left" title="Direct link to 22.3.7.2 Tilde Left">​</a></h3>
<!-- -->
<p>~[<em>str0</em> ~;<em>str1</em> ~;<em>...</em>~;<em>strn</em>~]</p>
<p>This is a set of control strings, called <em>clauses</em>, one of which is chosen and used. The clauses are separated by ~; and the construct is terminated by ~]. For example,</p>
<p>&quot;~[Siamese~;Manx~;Persian~] Cat&quot;</p>
<p>The <em>arg</em>th clause is selected, where the first clause is number 0. If a prefix parameter is given (as ~<em>n</em>[), then the parameter is used instead of an argument. If <em>arg</em> is out of range then no clause is selected and no error is signaled. After the selected alternative has been processed, the control string continues after the ~].</p>
<p>~[<em>str0</em> ~;<em>str1</em> ~;<em>...</em>~;<em>strn</em>~:;<em>default</em>~] has a default case. If the <em>last</em> ~; used to separate clauses is ~:; instead, then the last clause is an else clause that is performed if no other clause is selected. For example:</p>
<p>&quot;~[Siamese~;Manx~;Persian~:;Alley~] Cat&quot;</p>
<p>~:[<em>alternative</em>~;<em>consequent</em>~] selects the <em>alternative</em> control string if <em>arg</em> is <em>false</em>, and selects the <em>consequent</em> control string otherwise.</p>
<p>~@[<em>consequent</em>~] tests the argument. If it is <em>true</em>, then the argument is not used up by the ~[ command but remains as the next one to be processed, and the one clause <em>consequent</em> is processed. If the <em>arg</em> is <em>false</em>, then the argument is used up, and the clause is not processed. The clause therefore should normally use exactly one argument, and may expect it to be <em>non-nil</em>. For example:</p>
<p>(setq *print-level* nil *print-length* 5)</p>
<p>(format nil</p>
<p>&quot;~@[ print level = ~D~]~@[ print length = ~D~]&quot;</p>
<p>*print-level* *print-length*)</p>
<p>→ &quot; print length = 5&quot;</p>
<p>Note also that</p>
<p>(format <em>stream</em> &quot;...~@[<em>str</em>~]...&quot; ...)</p>
<p><em>≡</em> (format <em>stream</em> &quot;...~:[~;~:*<em>str</em>~]...&quot; ...)</p>
<p>The combination of ~[ and # is useful, for example, for dealing with English conventions for printing lists:</p>
<p>(setq foo &quot;Items:~#[ none~; ~S~; ~S and ~S~</p>
<p>~:;~@{~#[~; and~] ~S~<i><sup>^</sup></i>,~}~].&quot;)</p>
<p>(format nil foo) → &quot;Items: none.&quot;</p>
<p>(format nil foo ’foo) → &quot;Items: FOO.&quot;</p>
<p>(format nil foo ’foo ’bar) → &quot;Items: FOO and BAR.&quot;</p>
<p>(format nil foo ’foo ’bar ’baz) → &quot;Items: FOO, BAR, and BAZ.&quot;</p>
<p>(format nil foo ’foo ’bar ’baz ’quux) → &quot;Items: FOO, BAR, BAZ, and QUUX.&quot;</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22373-tilde-right">22.3.7.3 Tilde Right<a href="#22373-tilde-right" class="hash-link" aria-label="Direct link to 22.3.7.3 Tilde Right" title="Direct link to 22.3.7.3 Tilde Right">​</a></h3>
<!-- -->
<p>~] terminates a ~[. The consequences of using it elsewhere are undefined.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22374-tilde-left">22.3.7.4 Tilde Left<a href="#22374-tilde-left" class="hash-link" aria-label="Direct link to 22.3.7.4 Tilde Left" title="Direct link to 22.3.7.4 Tilde Left">​</a></h3>
<!-- -->
<p>~{<em>str</em>~}</p>
<p>This is an iteration construct. The argument should be a <i>list</i>, which is used as a set of arguments as if for a recursive call to <strong>format</strong>. The <i>string str</i> is used repeatedly as the control string. Each iteration can absorb as many elements of the <i>list</i> as it likes as arguments; if <i>str</i> uses up two arguments by itself, then two elements of the <i>list</i> will get used up each time around the loop. If before any iteration step the <i>list</i> is empty, then the iteration is terminated. Also, if a prefix parameter <i>n</i> is given, then there will be at most <i>n</i> repetitions of processing of <i>str</i> . Finally, the ~<i><sup>^</sup></i> directive can be used to terminate the iteration prematurely.</p>
<p>For example:</p>
<p>(format nil &quot;The winners are:~{ ~S~}.&quot;</p>
<p>’(fred harry jill))</p>
<p>→ &quot;The winners are: FRED HARRY JILL.&quot;</p>
<p>(format nil &quot;Pairs:~{ &lt;~S,~S&gt;~}.&quot;</p>
<p>’(a 1 b 2 c 3))</p>
<p>→ &quot;Pairs: &lt;A,1&gt; &lt;B,2&gt; &lt;C,3&gt;.&quot;</p>
<p>~:{<em>str</em>~} is similar, but the argument should be a <em>list</em> of sublists. At each repetition step, one sublist is used as the set of arguments for processing <em>str</em> ; on the next repetition, a new sublist is used, whether or not all of the last sublist had been processed. For example:</p>
<p>(format nil &quot;Pairs:~:{ &lt;~S,~S&gt;~}.&quot;</p>
<p>’((a 1) (b 2) (c 3)))</p>
<p>→ &quot;Pairs: &lt;A,1&gt; &lt;B,2&gt; &lt;C,3&gt;.&quot;</p>
<p>~@{<em>str</em>~} is similar to ~{<em>str</em>~}, but instead of using one argument that is a list, all the remaining arguments are used as the list of arguments for the iteration. Example:</p>
<p>(format nil &quot;Pairs:~@{ &lt;~S,~S&gt;~}.&quot; ’a 1 ’b 2 ’c 3)</p>
<p>→ &quot;Pairs: &lt;A,1&gt; &lt;B,2&gt; &lt;C,3&gt;.&quot;</p>
<p>If the iteration is terminated before all the remaining arguments are consumed, then any arguments not processed by the iteration remain to be processed by any directives following the iteration construct.</p>
<p>~:@{<em>str</em>~} combines the features of ~:{<em>str</em>~} and ~@{<em>str</em>~}. All the remaining arguments are used, and each one must be a <em>list</em>. On each iteration, the next argument is used as a <em>list</em> of arguments to <em>str</em> . Example:</p>
<p>(format nil &quot;Pairs:~:@{ &lt;~S,~S&gt;~}.&quot;</p>
<p>’(a 1) ’(b 2) ’(c 3))</p>
<p>→ &quot;Pairs: &lt;A,1&gt; &lt;B,2&gt; &lt;C,3&gt;.&quot;</p>
<p>Terminating the repetition construct with ~:} instead of ~} forces <em>str</em> to be processed at least once, even if the initial list of arguments is null. However, this will not override an explicit prefix parameter of zero.</p>
<p>If <em>str</em> is empty, then an argument is used as <em>str</em> . It must be a <em>format control</em> and precede any arguments processed by the iteration. As an example, the following are equivalent:</p>
<p>(apply #’format stream string arguments)</p>
<p><em>≡</em> (format stream &quot;~1{~:}&quot; string arguments)</p>
<p>This will use string as a formatting string. The ~1{ says it will be processed at most once, and the ~:} says it will be processed at least once. Therefore it is processed exactly once, using arguments as the arguments. This case may be handled more clearly by the ~? directive, but this general feature of ~{ is more powerful than ~?.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22375-tilde-right">22.3.7.5 Tilde Right<a href="#22375-tilde-right" class="hash-link" aria-label="Direct link to 22.3.7.5 Tilde Right" title="Direct link to 22.3.7.5 Tilde Right">​</a></h3>
<!-- -->
<p>~} terminates a ~{. The consequences of using it elsewhere are undefined.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22376-tilde-question">22.3.7.6 Tilde Question<a href="#22376-tilde-question" class="hash-link" aria-label="Direct link to 22.3.7.6 Tilde Question" title="Direct link to 22.3.7.6 Tilde Question">​</a></h3>
<!-- -->
<p>The next <em>arg</em> must be a <em>format control</em>, and the one after it a <em>list</em>; both are consumed by the ~? directive. The two are processed as a <em>control-string</em>, with the elements of the <em>list</em> as the arguments. Once the recursive processing has been finished, the processing of the control string containing the ~? directive is resumed. Example:</p>
<p>(format nil &quot;~? ~D&quot; &quot;&lt;~A ~D&gt;&quot; ’(&quot;Foo&quot; 5) 7) → &quot;&lt;foo 5=&quot;&quot;&gt; 7&quot;</p>
<p>(format nil &quot;~? ~D&quot; &quot;&lt;~A ~D&gt;&quot; ’(&quot;Foo&quot; 5 14) 7) → &quot;&lt;foo 5=&quot;&quot;&gt; 7&quot;</p>
<p>Note that in the second example three arguments are supplied to the <em>format string</em> &quot;&lt;~A ~D&gt;&quot;, but only two are processed and the third is therefore ignored.</p>
<p>With the @ modifier, only one <em>arg</em> is directly consumed. The <em>arg</em> must be a <em>string</em>; it is processed as part of the control string as if it had appeared in place of the ~@? construct, and any directives in the recursively processed control string may consume arguments of the control string containing the ~@? directive. Example:</p>
<p>(format nil &quot;~@? ~D&quot; &quot;&lt;~A ~D&gt;&quot; &quot;Foo&quot; 5 7) → &quot;&lt;foo 5=&quot;&quot;&gt; 7&quot;</p>
<p>(format nil &quot;~@? ~D&quot; &quot;&lt;~A ~D&gt;&quot; &quot;Foo&quot; 5 14 7) → &quot;&lt;foo 5=&quot;&quot;&gt; 14&quot;</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2238-format-miscellaneous-operations">22.3.8 FORMAT Miscellaneous Operations<a href="#2238-format-miscellaneous-operations" class="hash-link" aria-label="Direct link to 22.3.8 FORMAT Miscellaneous Operations" title="Direct link to 22.3.8 FORMAT Miscellaneous Operations">​</a></h2>
<!-- -->
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22381-tilde-left">22.3.8.1 Tilde Left<a href="#22381-tilde-left" class="hash-link" aria-label="Direct link to 22.3.8.1 Tilde Left" title="Direct link to 22.3.8.1 Tilde Left">​</a></h3>
<!-- -->
<p>~(<em>str</em>~)</p>
<p>The contained control string <em>str</em> is processed, and what it produces is subject to case conversion. With no flags, every <em>uppercase character</em> is converted to the corresponding <em>lowercase character</em> . ~:( capitalizes all words, as if by <strong>string-capitalize</strong>.</p>
<p>~@( capitalizes just the first word and forces the rest to lower case.</p>
<p>~:@( converts every lowercase character to the corresponding uppercase character.</p>
<p>In this example ~@( is used to cause the first word produced by ~@R to be capitalized:</p>
<p>(format nil &quot;~@R ~(~@R~)&quot; 14 14)</p>
<p>→ &quot;XIV xiv&quot;</p>
<p>(defun f (n) (format nil &quot;~@(~R~) error~<!-- -->:P<!-- --> detected.&quot; n)) → F</p>
<p>(f 0) → &quot;Zero errors detected.&quot;</p>
<p>(f 1) → &quot;One error detected.&quot;</p>
<p>(f 23) → &quot;Twenty-three errors detected.&quot;</p>
<p>When case conversions appear nested, the outer conversion dominates, as illustrated in the following example:</p>
<p>(format nil &quot;~@(how is ~:(BOB SMITH~)?~)&quot;)</p>
<p>→ &quot;How is bob smith?&quot;</p>
<p><i><sup>not</sup> →</i> &quot;How is Bob Smith?&quot;</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22382-tilde-right">22.3.8.2 Tilde Right<a href="#22382-tilde-right" class="hash-link" aria-label="Direct link to 22.3.8.2 Tilde Right" title="Direct link to 22.3.8.2 Tilde Right">​</a></h3>
<!-- -->
<p>~) terminates a ~(. The consequences of using it elsewhere are undefined.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22383-tilde-p">22.3.8.3 Tilde P<a href="#22383-tilde-p" class="hash-link" aria-label="Direct link to 22.3.8.3 Tilde P" title="Direct link to 22.3.8.3 Tilde P">​</a></h3>
<!-- -->
<p>If <em>arg</em> is not <strong>eql</strong> to the integer 1, a lowercase s is printed; if <em>arg</em> is <strong>eql</strong> to 1, nothing is printed. If <em>arg</em> is a floating-point 1.0, the s is printed.</p>
<p>~<!-- -->:P<!-- --> does the same thing, after doing a ~:* to back up one argument; that is, it prints a lowercase s if the previous argument was not 1.</p>
<p>~@P prints y if the argument is 1, or ies if it is not. ~:@P does the same thing, but backs up first.</p>
<p>(format nil &quot;~D tr~:@P/~D win~<!-- -->:P<!-- -->&quot; 7 1) → &quot;7 tries/1 win&quot;</p>
<p>(format nil &quot;~D tr~:@P/~D win~<!-- -->:P<!-- -->&quot; 1 0) → &quot;1 try/0 wins&quot;</p>
<p>(format nil &quot;~D tr~:@P/~D win~<!-- -->:P<!-- -->&quot; 1 3) → &quot;1 try/3 wins&quot;</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2239-format-miscellaneous-pseudo">22.3.9 FORMAT Miscellaneous Pseudo<a href="#2239-format-miscellaneous-pseudo" class="hash-link" aria-label="Direct link to 22.3.9 FORMAT Miscellaneous Pseudo" title="Direct link to 22.3.9 FORMAT Miscellaneous Pseudo">​</a></h2>
<!-- -->
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22391-tilde-semicolon">22.3.9.1 Tilde Semicolon<a href="#22391-tilde-semicolon" class="hash-link" aria-label="Direct link to 22.3.9.1 Tilde Semicolon" title="Direct link to 22.3.9.1 Tilde Semicolon">​</a></h3>
<!-- -->
<p>This separates clauses in ~[ and ~&lt; constructs. The consequences of using it elsewhere are undefined.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22392-tilde-circumflex">22.3.9.2 Tilde Circumflex<a href="#22392-tilde-circumflex" class="hash-link" aria-label="Direct link to 22.3.9.2 Tilde Circumflex" title="Direct link to 22.3.9.2 Tilde Circumflex">​</a></h3>
<!-- -->
<p>~<i><sup>^</sup></i></p>
<p>This is an escape construct. If there are no more arguments remaining to be processed, then the immediately enclosing ~{ or ~&lt; construct is terminated. If there is no such enclosing construct, then the entire formatting operation is terminated. In the ~&lt; case, the formatting is performed,</p>
<p>but no more segments are processed before doing the justification. ~<i><sup>^</sup></i> may appear anywhere in a ~{ construct.</p>
<p>(setq donestr &quot;Done.~<i><sup>^</sup></i> ~D warning~<!-- -->:P<!-- -->.~<i><sup>^</sup></i> ~D error~<!-- -->:P<!-- -->.&quot;)</p>
<p><i>→</i> &quot;Done.~<i><sup>^</sup></i> ~D warning~<!-- -->:P<!-- -->.~<i><sup>^</sup></i> ~D error~<!-- -->:P<!-- -->.&quot;</p>
<p>(format nil donestr) → &quot;Done.&quot;</p>
<p>(format nil donestr 3) → &quot;Done. 3 warnings.&quot;</p>
<p>(format nil donestr 1 5) → &quot;Done. 1 warning. 5 errors.&quot;</p>
<p>If a prefix parameter is given, then termination occurs if the parameter is zero. (Hence ~<i><sup>^</sup></i> is equivalent to ~#<i><sup>^</sup></i>.) If two parameters are given, termination occurs if they are equal. If three parameters are given, termination occurs if the first is less than or equal to the second and the second is less than or equal to the third. Of course, this is useless if all the prefix parameters are constants; at least one of them should be a # or a V parameter.</p>
<p>If ~<i><sup>^</sup></i> is used within a ~:{ construct, then it terminates the current iteration step because in the standard case it tests for remaining arguments of the current step only; the next iteration step commences immediately. ~:<i><sup>^</sup></i> is used to terminate the iteration process. ~:<i><sup>^</sup></i> may be used only if the command it would terminate is ~:{ or ~:@{. The entire iteration process is terminated if and only if the sublist that is supplying the arguments for the current iteration step is the last sublist in the case of ~:{, or the last <strong>format</strong> argument in the case of ~:@{. ~:<i><sup>^</sup></i> is not equivalent to ~#:<i><sup>^</sup></i>; the latter terminates the entire iteration if and only if no arguments remain for the current iteration step. For example:</p>
<p>(format nil &quot;~:{~@?~:<i><sup>^</sup></i>...~}&quot; ’((&quot;a&quot;) (&quot;b&quot;))) <i>→</i> &quot;a...b&quot;</p>
<p>If ~<i><sup>^</sup></i> appears within a control string being processed under the control of a ~? directive, but not within any ~{ or ~&lt; construct within that string, then the string being processed will be terminated, thereby ending processing of the ~? directive. Processing then continues within the string containing the ~? directive at the point following that directive.</p>
<p>If ~<i><sup>^</sup></i> appears within a ~[ or ~( construct, then all the commands up to the ~<i><sup>^</sup></i> are properly selected or case-converted, the ~[ or ~( processing is terminated, and the outward search continues for a ~{ or ~&lt; construct to be terminated. For example:</p>
<p>(setq tellstr &quot;~@(~@[~R~]~<i><sup>^</sup></i> ~A!~)&quot;)</p>
<p><i>→</i> &quot;~@(~@[~R~]~<i><sup>^</sup></i> ~A!~)&quot;</p>
<p>(format nil tellstr 23) → &quot;Twenty-three!&quot;</p>
<p>(format nil tellstr nil &quot;losers&quot;) → &quot; Losers!&quot;</p>
<p>(format nil tellstr 23 &quot;losers&quot;) → &quot;Twenty-three losers!&quot;</p>
<p>Following are examples of the use of ~<i><sup>^</sup></i> within a ~&lt; construct.</p>
<p>(format nil &quot;~15&lt;~S~;~<i><sup>^</sup></i>~S~;~<i><sup>^</sup></i>~S~&gt;&quot; ’foo)</p>
<p>→ &quot; FOO&quot;</p>
<p>(format nil &quot;~15&lt;~S~;~<i><sup>^</sup></i>~S~;~<i><sup>^</sup></i>~S~&gt;&quot; ’foo ’bar)</p>
<p>→ &quot;FOO BAR&quot;</p>
<p>(format nil &quot;~15&lt;~S~;~<i><sup>^</sup></i>~S~;~<i><sup>^</sup></i>~S~&gt;&quot; ’foo ’bar ’baz)</p>
<p>→ &quot;FOO BAR BAZ&quot;</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22393-tilde-newline">22.3.9.3 Tilde Newline<a href="#22393-tilde-newline" class="hash-link" aria-label="Direct link to 22.3.9.3 Tilde Newline" title="Direct link to 22.3.9.3 Tilde Newline">​</a></h3>
<!-- -->
<p><em>Tilde</em> immediately followed by a <em>newline</em> ignores the <em>newline</em> and any following non-newline <em>whitespace</em><sub>1</sub> characters. With a :, the <em>newline</em> is ignored, but any following <em>whitespace</em><sub>1</sub> is left in place. With an @, the <em>newline</em> is left in place, but any following <em>whitespace</em><sub>1</sub> is ignored. For example:</p>
<p>(defun type-clash-error (fn nargs argnum right-type wrong-type)</p>
<p>(format *error-output*</p>
<p>&quot;~&amp;~S requires its ~:[~<!-- -->:R<!-- -->~;~*~]~</p>
<p>argument to be of type ~S,~%but it was called ~</p>
<p>with an argument of type ~S.~%&quot;</p>
<p>fn (eql nargs 1) argnum right-type wrong-type))</p>
<p>(type-clash-error ’aref nil 2 ’integer ’vector) prints:</p>
<p>AREF requires its second argument to be of type INTEGER,</p>
<p>but it was called with an argument of type VECTOR.</p>
<p>NIL</p>
<p>(type-clash-error ’car 1 1 ’list ’short-float) prints:</p>
<p>CAR requires its argument to be of type LIST,</p>
<p>but it was called with an argument of type SHORT-FLOAT.</p>
<p>NIL</p>
<p>Note that in this example newlines appear in the output only as specified by the ~&amp; and ~% directives; the actual newline characters in the control string are suppressed because each is preceded by a tilde.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="22310-additional-information-about-format-operations">22.3.10 Additional Information about FORMAT Operations<a href="#22310-additional-information-about-format-operations" class="hash-link" aria-label="Direct link to 22.3.10 Additional Information about FORMAT Operations" title="Direct link to 22.3.10 Additional Information about FORMAT Operations">​</a></h2>
<!-- -->
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="223101-nesting-of-format-operations">22.3.10.1 Nesting of FORMAT Operations<a href="#223101-nesting-of-format-operations" class="hash-link" aria-label="Direct link to 22.3.10.1 Nesting of FORMAT Operations" title="Direct link to 22.3.10.1 Nesting of FORMAT Operations">​</a></h3>
<!-- -->
<p>The case-conversion, conditional, iteration, and justification constructs can contain other formatting constructs by bracketing them. These constructs must nest properly with respect to each other. For example, it is not legitimate to put the start of a case-conversion construct in each arm of a conditional and the end of the case-conversion construct outside the conditional:</p>
<p>(format nil &quot;~:[abc~:@(def~;ghi~</p>
<p>:@(jkl~]mno~)&quot; x) ;Invalid!</p>
<p>This notation is invalid because the ~[...~;...~] and ~(...~) constructs are not properly nested.</p>
<p>The processing indirection caused by the ~? directive is also a kind of nesting for the purposes of this rule of proper nesting. It is not permitted to start a bracketing construct within a string processed under control of a ~? directive and end the construct at some point after the ~? construct in the string containing that construct, or vice versa. For example, this situation is invalid:</p>
<p>(format nil &quot;~@?ghi~)&quot; &quot;abc~@(def&quot;) ;Invalid!</p>
<p>This notation is invalid because the ~? and ~(...~) constructs are not properly nested.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="223102-missing-and-additional-format-arguments">22.3.10.2 Missing and Additional FORMAT Arguments<a href="#223102-missing-and-additional-format-arguments" class="hash-link" aria-label="Direct link to 22.3.10.2 Missing and Additional FORMAT Arguments" title="Direct link to 22.3.10.2 Missing and Additional FORMAT Arguments">​</a></h3>
<!-- -->
<p>The consequences are undefined if no <em>arg</em> remains for a directive requiring an argument. However, it is permissible for one or more <em>args</em> to remain unprocessed by a directive; such <em>args</em> are ignored.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="223103-additional-format-parameters">22.3.10.3 Additional FORMAT Parameters<a href="#223103-additional-format-parameters" class="hash-link" aria-label="Direct link to 22.3.10.3 Additional FORMAT Parameters" title="Direct link to 22.3.10.3 Additional FORMAT Parameters">​</a></h3>
<!-- -->
<p>The consequences are undefined if a format directive is given more parameters than it is described here as accepting.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="223104-undefined-format-modifier-combinations">22.3.10.4 Undefined FORMAT Modifier Combinations<a href="#223104-undefined-format-modifier-combinations" class="hash-link" aria-label="Direct link to 22.3.10.4 Undefined FORMAT Modifier Combinations" title="Direct link to 22.3.10.4 Undefined FORMAT Modifier Combinations">​</a></h3>
<!-- -->
<p>The consequences are undefined if <em>colon</em> or <em>at-sign</em> modifiers are given to a directive in a combination not specifically described here as being meaningful.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="22311-examples-of-format">22.3.11 Examples of FORMAT<a href="#22311-examples-of-format" class="hash-link" aria-label="Direct link to 22.3.11 Examples of FORMAT" title="Direct link to 22.3.11 Examples of FORMAT">​</a></h2>
<!-- -->
<p>(format nil &quot;foo&quot;) → &quot;foo&quot;</p>
<p>(setq x 5) → 5</p>
<p>(format nil &quot;The answer is ~D.&quot; x) → &quot;The answer is 5.&quot;</p>
<p>(format nil &quot;The answer is ~3D.&quot; x) → &quot;The answer is 5.&quot;</p>
<p>(format nil &quot;The answer is ~3,’0D.&quot; x) → &quot;The answer is 005.&quot;</p>
<p>(format nil &quot;The answer is ~<!-- -->:D<!-- -->.&quot; (expt 47 x))</p>
<p>→ &quot;The answer is 229,345,007.&quot;</p>
<p>(setq y &quot;elephant&quot;) → &quot;elephant&quot;</p>
<p>(format nil &quot;Look at the ~A!&quot; y) → &quot;Look at the elephant!&quot;</p>
<p>(setq n 3) → 3</p>
<p>(format nil &quot;~D item~<!-- -->:P<!-- --> found.&quot; n) → &quot;3 items found.&quot;</p>
<p>(format nil &quot;~R dog~:[s are~; is~] here.&quot; n (= n 1))</p>
<p>→ &quot;three dogs are here.&quot;</p>
<p>(format nil &quot;~R dog~:*~[s are~; is~:;s are~] here.&quot; n)</p>
<p>→ &quot;three dogs are here.&quot;</p>
<p>(format nil &quot;Here ~[are~;is~:;are~] ~:*~R pupp~:@P.&quot; n)</p>
<p>→ &quot;Here are three puppies.&quot;</p>
<p>(defun foo (x)</p>
<p>(format nil &quot;~6,2F|~6,2,1,’*F|~6,2„’?F|~6F|~,2F|~F&quot;</p>
<p>x x x x x x)) → FOO</p>
<p>(foo 3.14159) → &quot; 3.14| 31.42| 3.14|3.1416|3.14|3.14159&quot;</p>
<p>(foo -3.14159) → &quot; -3.14|-31.42| -3.14|-3.142|-3.14|-3.14159&quot;</p>
<p>(foo 100.0) → &quot;100.00|******|100.00| 100.0|100.00|100.0&quot;</p>
<p>(foo 1234.0) → &quot;1234.00|******|??????|1234.0|1234.00|1234.0&quot;</p>
<p>(foo 0.006) → &quot; 0.01| 0.06| 0.01| 0.006|0.01|0.006&quot;</p>
<p>(defun foo (x)</p>
<p>(format nil</p>
<p>&quot;~9,2,1„’*E|~10,3,2,2,’?„’$E|~</p>
<p>~9,3,2,-2,’%@E|~9,2E&quot;</p>
<p>x x x x))</p>
<p>(foo 3.14159) → &quot; 3.14E+0| 31.42$-01|+.003E+03| 3.14E+0&quot;</p>
<p>(foo -3.14159) → &quot; -3.14E+0|-31.42$-01|-.003E+03| -3.14E+0&quot;</p>
<p>(foo 1100.0) → &quot; 1.10E+3| 11.00$+02|+.001E+06| 1.10E+3&quot;</p>
<p>(foo 1100.0L0) → &quot; 1.10L+3| 11.00$+02|+.001L+06| 1.10L+3&quot;</p>
<p>(foo 1.1E13) → &quot;*********| 11.00$+12|+.001E+16| 1.10E+13&quot;</p>
<p>(foo 1.1L120) → &quot;*********|??????????|%%%%%%%%%|1.10L+120&quot;</p>
<p>(foo 1.1L1200) → &quot;*********|??????????|%%%%%%%%%|1.10L+1200&quot;</p>
<p>As an example of the effects of varying the scale factor, the code</p>
<p>(dotimes (k 13)</p>
<p>(format t &quot;~%Scale factor ~2D: |~13,6,2,VE|&quot;</p>
<p>(- k 5) (- k 5) 3.14159))</p>
<p>produces the following output:</p>
<p>Scale factor -5: | 0.000003E+06|</p>
<p>Scale factor -4: | 0.000031E+05|</p>
<p>Scale factor -3: | 0.000314E+04|</p>
<p>Scale factor -2: | 0.003142E+03|</p>
<p>Scale factor -1: | 0.031416E+02|</p>
<p>Scale factor 0: | 0.314159E+01|</p>
<p>Scale factor 1: | 3.141590E+00|</p>
<p>Scale factor 2: | 31.41590E-01|</p>
<p>Scale factor 3: | 314.1590E-02|</p>
<p>Scale factor 4: | 3141.590E-03|</p>
<p>Scale factor 5: | 31415.90E-04|</p>
<p>Scale factor 6: | 314159.0E-05|</p>
<p>Scale factor 7: | 3141590.E-06|</p>
<p>(defun foo (x)</p>
<p>(format nil &quot;~9,2,1„’*G|~9,3,2,3,’?„’$G|~9,3,2,0,’%G|~9,2G&quot; x x x x))</p>
<p>(foo 0.0314159) → &quot; 3.14E-2|314.2$-04|0.314E-01| 3.14E-2&quot; (foo 0.314159) → &quot; 0.31 |0.314 |0.314 | 0.31 &quot; (foo 3.14159) → &quot; 3.1 | 3.14 | 3.14 | 3.1 &quot; (foo 31.4159) → &quot; 31. | 31.4 | 31.4 | 31. &quot; (foo 314.159) → &quot; 3.14E+2| 314. | 314. | 3.14E+2&quot; (foo 3141.59) → &quot; 3.14E+3|314.2$+01|0.314E+04| 3.14E+3&quot; (foo 3141.59L0) → &quot; 3.14L+3|314.2$+01|0.314L+04| 3.14L+3&quot; (foo 3.14E12) → &quot;*********|314.0$+10|0.314E+13| 3.14E+12&quot; (foo 3.14L120) → &quot;*********|?????????|%%%%%%%%%|3.14L+120&quot; (foo 3.14L1200) → &quot;*********|?????????|%%%%%%%%%|3.14L+1200&quot;</p>
<p>(format nil &quot;~10&lt;foo~;bar~&gt;&quot;) → &quot;foo bar&quot;</p>
<p>(format nil &quot;~10:&lt;foo~;bar~&gt;&quot;) → &quot; foo bar&quot;</p>
<p>(format nil &quot;~10&lt;foobar~&gt;&quot;) → &quot; foobar&quot;</p>
<p>(format nil &quot;~10:&lt;foobar~&gt;&quot;) → &quot; foobar&quot;</p>
<p>(format nil &quot;~10:@&lt;foo~;bar~&gt;&quot;) → &quot; foo bar &quot;</p>
<p>(format nil &quot;~10@&lt;foobar~&gt;&quot;) → &quot;foobar &quot;</p>
<p>(format nil &quot;~10:@&lt;foobar~&gt;&quot;) → &quot; foobar &quot;</p>
<p>(FORMAT NIL &quot;Written to ~A.&quot; #P&quot;foo.bin&quot;)</p>
<p>→ &quot;Written to foo.bin.&quot;</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="22312-notes-about-format">22.3.12 Notes about FORMAT<a href="#22312-notes-about-format" class="hash-link" aria-label="Direct link to 22.3.12 Notes about FORMAT" title="Direct link to 22.3.12 Notes about FORMAT">​</a></h2>
<!-- -->
<!-- -->
<p>Formatted output is performed not only by <strong>format</strong>, but by certain other functions that accept a <em>format control</em> the way <strong>format</strong> does. For example, error-signaling functions such as <strong>cerror</strong> accept <em>format controls</em>.</p>
<p>Note that the meaning of <strong>nil</strong> and <strong>t</strong> as destinations to <strong>format</strong> are different than those of <strong>nil</strong> and <strong>t</strong> as <em>stream designators</em>.</p>
<p>The ~<i><sup>^</sup></i> should appear only at the beginning of a ~&lt; clause, because it aborts the entire clause in which it appears (as well as all following clauses).</p>
<p><strong>copy-pprint-dispatch</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>copy-pprint-dispatch</strong> &amp;optional <em>table → new-table</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>table</em>—a <em>pprint dispatch table</em>, or <strong>nil</strong>.</p>
<p><em>new-table</em>—a <em>fresh pprint dispatch table</em>.</p>
<p><strong>Description:</strong></p>
<p>Creates and returns a copy of the specified <em>table</em>, or of the <em>value</em> of <strong>*print-pprint-dispatch*</strong> if no <em>table</em> is specified, or of the initial <em>value</em> of <strong>*print-pprint-dispatch*</strong> if <strong>nil</strong> is specified.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>Should signal an error of <em>type</em> <strong>type-error</strong> if <em>table</em> is not a <em>pprint dispatch table</em>.</p>
<p><strong>formatter</strong> <em>Macro</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>formatter</strong> <em>control-string → function</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>control-string</em>—a <em>format string</em>; not evaluated.</p>
<p><em>function</em>—a <em>function</em>.</p>
<p><strong>Description:</strong></p>
<p>Returns a <em>function</em> which has behavior equivalent to:</p>
<p>#’(lambda (*standard-output* &amp;rest arguments)</p>
<p>(apply #’format t <em>control-string</em> arguments)</p>
<p><em>arguments-tail</em>)</p>
<p>where <em>arguments-tail</em> is either the tail of <em>arguments</em> which has as its <em>car</em> the argument that would be processed next if there were more format directives in the <em>control-string</em>, or else <strong>nil</strong> if no more <em>arguments</em> follow the most recently processed argument.</p>
<p><strong>Examples:</strong></p>
<p>(funcall (formatter &quot;~&amp;~A~A&quot;) *standard-output* ’a ’b ’c)</p>
<p>▷ AB</p>
<p>→ (C)</p>
<p>(format t (formatter &quot;~&amp;~A~A&quot;) ’a ’b ’c)</p>
<p>▷ AB</p>
<p>→ NIL</p>
<p><strong>Exceptional Situations:</strong></p>
<p>Might signal an error (at macro expansion time or at run time) if the argument is not a valid <em>format string</em>.</p>
<p><strong>See Also:</strong></p>
<p><strong>format</strong></p>
<p><strong>pprint-dispatch</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>pprint-dispatch</strong> <em>object</em> &amp;optional <em>table → function, found-p</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>object</em>—an <em>object</em>.</p>
<p><em>table</em>—a <em>pprint dispatch table</em>, or <strong>nil</strong>. The default is the <em>value</em> of <strong>*print-pprint-dispatch*</strong>. <em>function</em>—a <em>function designator</em> .</p>
<p><em>found-p</em>—a <em>generalized boolean</em>.</p>
<p><strong>Description:</strong></p>
<p>Retrieves the highest priority function in <em>table</em> that is associated with a <em>type specifier</em> that matches <em>object</em>. The function is chosen by finding all of the <em>type specifiers</em> in <em>table</em> that match the <em>object</em> and selecting the highest priority function associated with any of these <em>type specifiers</em>. If there is more than one highest priority function, an arbitrary choice is made. If no <em>type specifiers</em> match the <em>object</em>, a function is returned that prints <em>object</em> using <strong>print-object</strong>.</p>
<p>The <em>secondary value</em>, <em>found-p</em>, is <em>true</em> if a matching <em>type specifier</em> was found in <em>table</em>, or <em>false</em> otherwise.</p>
<p>If <em>table</em> is <strong>nil</strong>, retrieval is done in the <em>initial pprint dispatch table</em>.</p>
<p><strong>Affected By:</strong></p>
<p>The state of the <em>table</em>.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>Should signal an error of <em>type</em> <strong>type-error</strong> if <em>table</em> is neither a <em>pprint-dispatch-table</em> nor <strong>nil</strong>.</p>
<p><strong>Notes:</strong></p>
<p>(let ((*print-pretty* t))</p>
<p>(write object <!-- -->:stream<!-- --> s))</p>
<p><em>≡</em> (funcall (pprint-dispatch object) s object)</p>
<p><strong>pprint-exit-if-list-exhausted</strong> <em>Local Macro</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>pprint-exit-if-list-exhausted</strong> ⟨<em>no arguments</em>⟩ →* <strong>nil</strong></p>
<p><strong>Description:</strong></p>
<p>Tests whether or not the <em>list</em> passed to the <em>lexically current logical block</em> has been exhausted; see Section 22.2.1.1 (Dynamic Control of the Arrangement of Output). If this <em>list</em> has been reduced to <strong>nil</strong>, <strong>pprint-exit-if-list-exhausted</strong> terminates the execution of the <em>lexically current logical block</em> except for the printing of the suffix. Otherwise <strong>pprint-exit-if-list-exhausted</strong> returns <strong>nil</strong>.</p>
<p>Whether or not <strong>pprint-exit-if-list-exhausted</strong> is <em>fbound</em> in the <em>global environment</em> is <em>implementation dependent</em>; however, the restrictions on redefinition and <em>shadowing</em> of <strong>pprint-exit-if-list-exhausted</strong> are the same as for <em>symbols</em> in the COMMON-LISP <em>package</em> which are <em>fbound</em> in the <em>global environment</em>. The consequences of attempting to use <strong>pprint-exit-if-list-exhausted</strong> outside of <strong>pprint-logical-block</strong> are undefined.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>An error is signaled (at macro expansion time or at run time) if <strong>pprint-exit-if-list-exhausted</strong> is used anywhere other than lexically within a call on <strong>pprint-logical-block</strong>. Also, the consequences of executing <strong>pprint-if-list-exhausted</strong> outside of the dynamic extent of the <strong>pprint-logical-block</strong> which lexically contains it are undefined.</p>
<p><strong>See Also:</strong></p>
<p><strong>pprint-logical-block</strong>, <strong>pprint-pop</strong>.</p>
<p><strong>pprint-fill, pprint-linear, pprint-tabular</strong></p>
<p><strong>pprint-fill, pprint-linear, pprint-tabular</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>pprint-fill</strong> <em>stream object</em> &amp;optional <em>colon-p at-sign-p →</em> <strong>nil</strong></p>
<p><strong>pprint-linear</strong> <em>stream object</em> &amp;optional <em>colon-p at-sign-p →</em> <strong>nil</strong></p>
<p><strong>pprint-tabular</strong> <em>stream object</em> &amp;optional <em>colon-p at-sign-p tabsize →</em> <strong>nil</strong></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>stream</em>—an <em>output stream designator</em> .</p>
<p><em>object</em>—an <em>object</em>.</p>
<p><em>colon-p</em>—a <em>generalized boolean</em>. The default is <em>true</em>.</p>
<p><em>at-sign-p</em>—a <em>generalized boolean</em>. The default is <em>implementation-dependent</em>.</p>
<p><em>tabsize</em>—a non-negative <em>integer</em> . The default is 16.</p>
<p><strong>Description:</strong></p>
<p>The functions <strong>pprint-fill</strong>, <strong>pprint-linear</strong>, and <strong>pprint-tabular</strong> specify particular ways of <em>pretty printing</em> a <em>list</em> to <em>stream</em>. Each function prints parentheses around the output if and only if <em>colon-p</em> is <em>true</em>. Each function ignores its <em>at-sign-p</em> argument. (Both arguments are included even though only one is needed so that these functions can be used via ~/.../ and as <strong>set-pprint-dispatch</strong> functions, as well as directly.) Each function handles abbreviation and the detection of circularity and sharing correctly, and uses <strong>write</strong> to print <em>object</em> when it is a <em>non-list</em>.</p>
<p>If <em>object</em> is a <em>list</em> and if the <em>value</em> of <strong>*print-pretty*</strong> is <em>false</em>, each of these functions prints <em>object</em> using a minimum of <em>whitespace</em>, as described in Section 22.1.3.5 (Printing Lists and Conses). Otherwise (if <em>object</em> is a <em>list</em> and if the <em>value</em> of <strong>*print-pretty*</strong> is <em>true</em>):</p>
<p><em>•</em> The <em>function</em> <strong>pprint-linear</strong> prints a <em>list</em> either all on one line, or with each <em>element</em> on a separate line.</p>
<p><em>•</em> The <em>function</em> <strong>pprint-fill</strong> prints a <em>list</em> with as many <em>elements</em> as possible on each line.</p>
<p><em>•</em> The <em>function</em> <strong>pprint-tabular</strong> is the same as <strong>pprint-fill</strong> except that it prints the <em>elements</em> so that they line up in columns. The <em>tabsize</em> specifies the column spacing in <em>ems</em>, which is the total spacing from the leading edge of one column to the leading edge of the next.</p>
<p><strong>Examples:</strong></p>
<p>Evaluating the following with a line length of 25 produces the output shown.</p>
<p>(progn (princ &quot;Roads &quot;)</p>
<p>(pprint-tabular *standard-output* ’(elm main maple center) nil nil 8))</p>
<p>Roads ELM MAIN</p>
<p>MAPLE CENTER</p>
<p><strong>Side Effects:</strong></p>
<p>Performs output to the indicated <em>stream</em>.</p>
<p><strong>Affected By:</strong></p>
<p>The cursor position on the indicated <em>stream</em>, if it can be determined.</p>
<p><strong>Notes:</strong></p>
<p>The <em>function</em> <strong>pprint-tabular</strong> could be defined as follows:</p>
<p>(defun pprint-tabular (s list &amp;optional (colon-p t) at-sign-p (tabsize nil))</p>
<p>(declare (ignore at-sign-p))</p>
<p>(when (null tabsize) (setq tabsize 16))</p>
<p>(pprint-logical-block (s list <!-- -->:prefix<!-- --> (if colon-p &quot;(&quot; &quot;&quot;)</p>
<p>:suffix<!-- --> (if colon-p &quot;)&quot; &quot;&quot;))</p>
<p>(pprint-exit-if-list-exhausted)</p>
<p>(loop (write (pprint-pop) <!-- -->:stream<!-- --> s)</p>
<p>(pprint-exit-if-list-exhausted)</p>
<p>(write-char #\Space s)</p>
<p>(pprint-tab <!-- -->:section-relative<!-- --> 0 tabsize s)</p>
<p>(pprint-newline <!-- -->:fill<!-- --> s))))</p>
<p>Note that it would have been inconvenient to specify this function using <strong>format</strong>, because of the need to pass its <em>tabsize</em> argument through to a ~<!-- -->:T<!-- --> format directive nested within an iteration over a list.</p>
<p><strong>pprint-indent</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>pprint-indent</strong> <em>relative-to n</em> &amp;optional <em>stream →</em> <strong>nil</strong></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>relative-to</em>—either <!-- -->:block<!-- --> or <!-- -->:current<!-- -->.</p>
<p><em>n</em>—a <em>real</em>.</p>
<p><em>stream</em>—an <em>output stream designator</em> . The default is <em>standard output</em>.</p>
<p><strong>Description:</strong></p>
<p><strong>pprint-indent</strong> specifies the indentation to use in a logical block on <em>stream</em>. If <em>stream</em> is a <em>pretty printing stream</em> and the <em>value</em> of <strong>*print-pretty*</strong> is <em>true</em>, <strong>pprint-indent</strong> sets the indentation in the innermost dynamically enclosing logical block; otherwise, <strong>pprint-indent</strong> has no effect.</p>
<p><em>N</em> specifies the indentation in <em>ems</em>. If <em>relative-to</em> is <!-- -->:block<!-- -->, the indentation is set to the horizontal position of the first character in the <em>dynamically current logical block</em> plus <em>n ems</em>. If <em>relative-to</em> is <!-- -->:current<!-- -->, the indentation is set to the current output position plus <em>n ems</em>. (For robustness in the face of variable-width fonts, it is advisable to use <!-- -->:current<!-- --> with an <em>n</em> of zero whenever possible.)</p>
<p><em>N</em> can be negative; however, the total indentation cannot be moved left of the beginning of the line or left of the end of the rightmost per-line prefix—an attempt to move beyond one of these limits is treated the same as an attempt to move to that limit. Changes in indentation caused by <em>pprint-indent</em> do not take effect until after the next line break. In addition, in miser mode all calls to <strong>pprint-indent</strong> are ignored, forcing the lines corresponding to the logical block to line up under the first character in the block.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>An error is signaled if <em>relative-to</em> is any <em>object</em> other than <!-- -->:block<!-- --> or <!-- -->:current<!-- -->.</p>
<p><strong>See Also:</strong></p>
<p>Section 22.3.5.3 (Tilde I: Indent)</p>
<p><strong>pprint-logical-block</strong> <em>Macro</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>pprint-logical-block</strong> (<em>stream-symbol object</em> &amp;key <em>prefix per-line-prefix suffix</em>)</p>
<p><em>{declaration}</em>* <em>{form}</em>*</p>
<p>→ <strong>nil</strong></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>stream-symbol</em>—a <em>stream variable designator</em> .</p>
<p><em>object</em>—an <em>object</em>; evaluated.</p>
<p>:prefix<!-- -->—a <em>string</em>; evaluated. Complicated defaulting behavior; see below.</p>
<p>:per-line-prefix<!-- -->—a <em>string</em>; evaluated. Complicated defaulting behavior; see below. <!-- -->:suffix<!-- -->—a <em>string</em>; evaluated. The default is the <em>null string</em>.</p>
<p><em>declaration</em>—a <strong>declare</strong> <em>expression</em>; not evaluated.</p>
<p><em>forms</em>—an <em>implicit progn</em>.</p>
<p><strong>pprint-logical-block</strong></p>
<p><strong>Description:</strong></p>
<p>Causes printing to be grouped into a logical block.</p>
<p>The logical block is printed to the <em>stream</em> that is the <em>value</em> of the <em>variable</em> denoted by <em>stream-symbol</em>. During the execution of the <em>forms</em>, that <em>variable</em> is <em>bound</em> to a <em>pretty printing stream</em> that supports decisions about the arrangement of output and then forwards the output to the destination stream. All the standard printing functions (<em>e.g.</em>, <strong>write</strong>, <strong>princ</strong>, and <strong>terpri</strong>) can be used to print output to the <em>pretty printing stream</em>. All and only the output sent to this <em>pretty printing stream</em> is treated as being in the logical block.</p>
<p>The <em>prefix</em> specifies a prefix to be printed before the beginning of the logical block. The <em>per-line-prefix</em> specifies a prefix that is printed before the block and at the beginning of each new line in the block. The <!-- -->:prefix<!-- --> and <!-- -->:pre-line-prefix<!-- --> <em>arguments</em> are mutually exclusive. If neither <!-- -->:prefix<!-- --> nor <!-- -->:per-line-prefix<!-- --> is specified, a <em>prefix</em> of the <em>null string</em> is assumed.</p>
<p>The <em>suffix</em> specifies a suffix that is printed just after the logical block.</p>
<p>The <em>object</em> is normally a <em>list</em> that the body <em>forms</em> are responsible for printing. If <em>object</em> is not a <em>list</em>, it is printed using <strong>write</strong>. (This makes it easier to write printing functions that are robust in the face of malformed arguments.) If <strong>*print-circle*</strong> is <em>non-nil</em> and <em>object</em> is a circular (or shared) reference to a <em>cons</em>, then an appropriate “#<em>n</em>#” marker is printed. (This makes it easy to write printing</p>
<p>functions that provide full support for circularity and sharing abbreviation.) If <strong>*print-level*</strong> is not <strong>nil</strong> and the logical block is at a dynamic nesting depth of greater than <strong>*print-level*</strong> in logical blocks, “#” is printed. (This makes easy to write printing functions that provide full support for depth abbreviation.)</p>
<p>If either of the three conditions above occurs, the indicated output is printed on <em>stream-symbol</em> and the body <em>forms</em> are skipped along with the printing of the <!-- -->:prefix<!-- --> and <!-- -->:suffix<!-- -->. (If the body <em>forms</em> are not to be responsible for printing a list, then the first two tests above can be turned off by supplying <strong>nil</strong> for the <em>object</em> argument.)</p>
<p>In addition to the <em>object</em> argument of <strong>pprint-logical-block</strong>, the arguments of the standard printing functions (such as <strong>write</strong>, <strong>print</strong>, <strong>prin1</strong>, and <strong>pprint</strong>, as well as the arguments of the standard <em>format directives</em> such as ~A, ~S, (and ~W) are all checked (when necessary) for circularity and sharing. However, such checking is not applied to the arguments of the functions <strong>write-line</strong>, <strong>write-string</strong>, and <strong>write-char</strong> or to the literal text output by <strong>format</strong>. A consequence of this is that you must use one of the latter functions if you want to print some literal text in the output that is not supposed to be checked for circularity or sharing.</p>
<p>The body <em>forms</em> of a <strong>pprint-logical-block</strong> <em>form</em> must not perform any side-effects on the surrounding environment; for example, no <em>variables</em> must be assigned which have not been <em>bound</em> within its scope.</p>
<p>The <strong>pprint-logical-block</strong> <em>macro</em> may be used regardless of the <em>value</em> of <strong>*print-pretty*</strong>.</p>
<p><strong>Affected By:</strong></p>
<p><strong>*print-circle*</strong>, <strong>*print-level*</strong>.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>An error of <em>type</em> <strong>type-error</strong> is signaled if any of the <!-- -->:suffix<!-- -->, <!-- -->:prefix<!-- -->, or <!-- -->:per-line-prefix<!-- --> is supplied but does not evaluate to a <em>string</em>.</p>
<p>An error is signaled if <!-- -->:prefix<!-- --> and <!-- -->:pre-line-prefix<!-- --> are both used.</p>
<p><strong>pprint-logical-block</strong> and the <em>pretty printing stream</em> it creates have <em>dynamic extent</em>. The consequences are undefined if, outside of this extent, output is attempted to the <em>pretty printing stream</em> it creates.</p>
<p>It is also unspecified what happens if, within this extent, any output is sent directly to the underlying destination stream.</p>
<p><strong>See Also:</strong></p>
<p><strong>pprint-pop</strong>, <strong>pprint-exit-if-list-exhausted</strong>, Section 22.3.5.2 (Tilde Less-Than-Sign: Logical Block)</p>
<p><strong>Notes:</strong></p>
<p>One reason for using the <strong>pprint-logical-block</strong> <em>macro</em> when the <em>value</em> of <strong>*print-pretty*</strong> is <strong>nil</strong> would be to allow it to perform checking for <em>dotted lists</em>, as well as (in conjunction with <strong>pprint-pop</strong>) checking for <strong>*print-level*</strong> or <strong>*print-length*</strong> being exceeded.</p>
<p>Detection of circularity and sharing is supported by the <em>pretty printer</em> by in essence performing requested output twice. On the first pass, circularities and sharing are detected and the actual outputting of characters is suppressed. On the second pass, the appropriate “#<em>n</em>=” and “#<em>n</em>#” markers are inserted and characters are output. This is why the restriction on side-effects is necessary. Obeying this restriction is facilitated by using <strong>pprint-pop</strong>, instead of an ordinary <strong>pop</strong> when traversing a list being printed by the body <em>forms</em> of the <strong>pprint-logical-block</strong> <em>form</em>.)</p>
<p><strong>pprint-newline</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>pprint-newline</strong> <em>kind</em> &amp;optional <em>stream →</em> <strong>nil</strong></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>kind</em>—one of <!-- -->:linear<!-- -->, <!-- -->:fill<!-- -->, <!-- -->:miser<!-- -->, or <!-- -->:mandatory<!-- -->.</p>
<p><em>stream</em>—a <em>stream designator</em> . The default is <em>standard output</em>.</p>
<p><strong>Description:</strong></p>
<p>If <em>stream</em> is a <em>pretty printing stream</em> and the <em>value</em> of <strong>*print-pretty*</strong> is <em>true</em>, a line break is inserted in the output when the appropriate condition below is satisfied; otherwise, <strong>pprint-newline</strong> has no effect.</p>
<p><em>Kind</em> specifies the style of conditional newline. This <em>parameter</em> is treated as follows:</p>
<p><strong>pprint-newline</strong></p>
<p>:linear</p>
<p>This specifies a “linear-style” <em>conditional newline</em>. A line break is inserted if and only if the immediately containing <em>section</em> cannot be printed on one line. The effect of this is that line breaks are either inserted at every linear-style conditional newline in a logical block or at none of them.</p>
<p>:miser</p>
<p>This specifies a “miser-style” <em>conditional newline</em>. A line break is inserted if and only if the immediately containing <em>section</em> cannot be printed on one line and miser style is in effect in the immediately containing logical block. The effect of this is that miser-style conditional newlines act like linear-style conditional newlines, but only when miser style is in effect. Miser style is in effect for a logical block if and only if the starting position of the logical block is less than or equal to <strong>*print-miser-width*</strong> <em>ems</em> from the right margin.</p>
<p>:fill</p>
<p>This specifies a “fill-style” <em>conditional newline</em>. A line break is inserted if and only if either (a) the following <em>section</em> cannot be printed on the end of the current line, (b) the preceding <em>section</em> was not printed on a single line, or (c) the immediately containing <em>section</em> cannot be printed on one line and miser style is in effect in the immediately containing logical block. If a logical block is broken up into a number of subsections by fill-style conditional newlines, the basic effect is that the logical block is printed with as many subsections as possible on each line. However, if miser style is in effect, fill-style conditional newlines act like linear-style conditional newlines.</p>
<p>:mandatory</p>
<p>This specifies a “mandatory-style” <em>conditional newline</em>. A line break is always inserted. This implies that none of the containing <em>sections</em> can be printed on a single line and will therefore trigger the insertion of line breaks at linear-style conditional newlines in these <em>sections</em>.</p>
<p>When a line break is inserted by any type of conditional newline, any blanks that immediately precede the conditional newline are omitted from the output and indentation is introduced at the beginning of the next line. By default, the indentation causes the following line to begin in the same horizontal position as the first character in the immediately containing logical block. (The indentation can be changed via <strong>pprint-indent</strong>.)</p>
<p>There are a variety of ways unconditional newlines can be introduced into the output (<em>i.e.</em>, via <strong>terpri</strong> or by printing a string containing a newline character). As with mandatory conditional newlines, this prevents any of the containing <em>sections</em> from being printed on one line. In general, when an unconditional newline is encountered, it is printed out without suppression of the preceding blanks and without any indentation following it. However, if a per-line prefix has been specified (see <strong>pprint-logical-block</strong>), this prefix will always be printed no matter how a newline originates.</p>
<p><strong>Examples:</strong></p>
<p>See Section 22.2.2 (Examples of using the Pretty Printer).</p>
<p><strong>Side Effects:</strong></p>
<p>Output to <em>stream</em>.</p>
<p><strong>Affected By:</strong></p>
<p><strong>*print-pretty*</strong>, <strong>*print-miser*</strong>. The presence of containing logical blocks. The placement of newlines and conditional newlines.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>An error of <em>type</em> <strong>type-error</strong> is signaled if <em>kind</em> is not one of <!-- -->:linear<!-- -->, <!-- -->:fill<!-- -->, <!-- -->:miser<!-- -->, or <!-- -->:mandatory<!-- -->.</p>
<p><strong>See Also:</strong></p>
<p>Section 22.3.5.1 (Tilde Underscore: Conditional Newline), Section 22.2.2 (Examples of using the Pretty Printer)</p>
<p><strong>pprint-pop</strong> <em>Local Macro</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>pprint-pop</strong> ⟨<em>no arguments</em>⟩ → object*</p>
<p><strong>Arguments and Values:</strong></p>
<p><em>object</em>—an <em>element</em> of the <em>list</em> being printed in the <em>lexically current logical block</em> , or <strong>nil</strong>.</p>
<p><strong>Description:</strong></p>
<p>Pops one <em>element</em> from the <em>list</em> being printed in the <em>lexically current logical block</em> , obeying <strong>*print-length*</strong> and <strong>*print-circle*</strong> as described below.</p>
<p>Each time <strong>pprint-pop</strong> is called, it pops the next value off the <em>list</em> passed to the <em>lexically current logical block</em> and returns it. However, before doing this, it performs three tests:</p>
<p><em>•</em> If the remaining ‘list’ is not a <em>list</em>, “. ” is printed followed by the remaining ‘list.’ (This makes it easier to write printing functions that are robust in the face of malformed arguments.)</p>
<p><em>•</em> If <strong>*print-length*</strong> is <em>non-nil</em>, and <strong>pprint-pop</strong> has already been called <strong>*print-length*</strong> times within the immediately containing logical block, “...” is printed. (This makes it easy to write printing functions that properly handle <strong>*print-length*</strong>.)</p>
<p><em>•</em> If <strong>*print-circle*</strong> is <em>non-nil</em>, and the remaining list is a circular (or shared) reference, then “. ” is printed followed by an appropriate “#<em>n</em>#” marker. (This catches instances of <em>cdr</em> circularity and sharing in lists.)</p>
<p>If either of the three conditions above occurs, the indicated output is printed on the <em>pretty printing stream</em> created by the immediately containing <strong>pprint-logical-block</strong> and the execution of the immediately containing <strong>pprint-logical-block</strong> is terminated except for the printing of the suffix.</p>
<p>If <strong>pprint-logical-block</strong> is given a ‘list’ argument of <strong>nil</strong>—because it is not processing a list— <strong>pprint-pop</strong> can still be used to obtain support for <strong>*print-length*</strong>. In this situation, the first and third tests above are disabled and <strong>pprint-pop</strong> always returns <strong>nil</strong>. See Section 22.2.2 (Examples of using the Pretty Printer)—specifically, the <strong>pprint-vector</strong> example.</p>
<p>Whether or not <strong>pprint-pop</strong> is <em>fbound</em> in the <em>global environment</em> is <em>implementation-dependent</em>; however, the restrictions on redefinition and <em>shadowing</em> of <strong>pprint-pop</strong> are the same as for <em>symbols</em> in the COMMON-LISP <em>package</em> which are <em>fbound</em> in the <em>global environment</em>. The consequences of attempting to use <strong>pprint-pop</strong> outside of <strong>pprint-logical-block</strong> are undefined.</p>
<p><strong>Side Effects:</strong></p>
<p>Might cause output to the <em>pretty printing stream</em> associated with the lexically current logical block.</p>
<p><strong>Affected By:</strong></p>
<p><strong>*print-length*</strong>, <strong>*print-circle*</strong>.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>An error is signaled (either at macro expansion time or at run time) if a usage of <strong>pprint-pop</strong> occurs where there is no lexically containing <strong>pprint-logical-block</strong> <em>form</em>.</p>
<p>The consequences are undefined if <strong>pprint-pop</strong> is executed outside of the <em>dynamic extent</em> of this <strong>pprint-logical-block</strong>.</p>
<p><strong>See Also:</strong></p>
<p><strong>pprint-exit-if-list-exhausted</strong>, <strong>pprint-logical-block</strong>.</p>
<p><strong>Notes:</strong></p>
<p>It is frequently a good idea to call <strong>pprint-exit-if-list-exhausted</strong> before calling <strong>pprint-pop</strong>. <strong>pprint-tab</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>pprint-tab</strong> <em>kind colnum colinc</em> &amp;optional <em>stream →</em> <strong>nil</strong></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>kind</em>—one of <!-- -->:line<!-- -->, <!-- -->:section<!-- -->, <!-- -->:line-relative<!-- -->, or <!-- -->:section-relative<!-- -->.</p>
<p><em>colnum</em>—a non-negative <em>integer</em> .</p>
<p><em>colinc</em>—a non-negative <em>integer</em> .</p>
<p><em>stream</em>—an <em>output stream designator</em> .</p>
<p><strong>Description:</strong></p>
<p>Specifies tabbing to <em>stream</em> as performed by the standard ~T format directive. If <em>stream</em> is a <em>pretty printing stream</em> and the <em>value</em> of <strong>*print-pretty*</strong> is <em>true</em>, tabbing is performed; otherwise, <strong>pprint-tab</strong> has no effect.</p>
<p>The arguments <em>colnum</em> and <em>colinc</em> correspond to the two <em>parameters</em> to ~T and are in terms of <em>ems</em>. The <em>kind</em> argument specifies the style of tabbing. It must be one of <!-- -->:line<!-- --> (tab as by ~T), <!-- -->:section<!-- --> (tab as by ~<!-- -->:T<!-- -->, but measuring horizontal positions relative to the start of the dynamically enclosing section), <!-- -->:line-relative<!-- --> (tab as by ~@T), or <!-- -->:section-relative<!-- --> (tab as by ~:@T, but measuring</p>
<p>horizontal positions relative to the start of the dynamically enclosing section).</p>
<p><strong>Exceptional Situations:</strong></p>
<p>An error is signaled if <em>kind</em> is not one of <!-- -->:line<!-- -->, <!-- -->:section<!-- -->, <!-- -->:line-relative<!-- -->, or <!-- -->:section-relative<!-- -->.</p>
<p><strong>See Also:</strong></p>
<p><strong>pprint-logical-block</strong></p>
<p><strong>print-object</strong> <em>Standard Generic Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>print-object</strong> <em>object stream → object</em></p>
<p><strong>Method Signatures:</strong></p>
<p><strong>print-object</strong> (<em>object standard-object</em>) <em>stream</em></p>
<p><strong>print-object</strong> (<em>object structure-object</em>) <em>stream</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>object</em>—an <em>object</em>.</p>
<p><em>stream</em>—a <em>stream</em>.</p>
<p><strong>print-object</strong></p>
<p><strong>Description:</strong></p>
<p>The <em>generic function</em> <strong>print-object</strong> writes the printed representation of <em>object</em> to <em>stream</em>. The <em>function</em> <strong>print-object</strong> is called by the <em>Lisp printer</em> ; it should not be called by the user.</p>
<p>Each implementation is required to provide a <em>method</em> on the <em>class</em> <strong>standard-object</strong> and on the <em>class</em> <strong>structure-object</strong>. In addition, each <em>implementation</em> must provide <em>methods</em> on enough other <em>classes</em> so as to ensure that there is always an applicable <em>method</em>. Implementations are free to add <em>methods</em> for other <em>classes</em>. Users may write <em>methods</em> for <strong>print-object</strong> for their own <em>classes</em> if they do not wish to inherit an <em>implementation-dependent method</em>.</p>
<p>The <em>method</em> on the <em>class</em> <strong>structure-object</strong> prints the object in the default #S notation; see Section 22.1.3.12 (Printing Structures).</p>
<p><em>Methods</em> on <strong>print-object</strong> are responsible for implementing their part of the semantics of the <em>printer control variables</em>, as follows:</p>
<p><strong>*print-readably*</strong></p>
<p>All methods for <strong>print-object</strong> must obey <strong>*print-readably*</strong>. This includes both user-defined methods and <em>implementation-defined</em> methods. Readable printing of <em>structures</em> and <em>standard objects</em> is controlled by their <strong>print-object</strong> method, not by their <strong>make-load-form</strong> <em>method</em>. <em>Similarity</em> for these <em>objects</em> is application dependent and hence is defined to be whatever these <em>methods</em> do; see Section 3.2.4.2 (Similarity of Literal Objects).</p>
<p><strong>*print-escape*</strong></p>
<p>Each <em>method</em> must implement <strong>*print-escape*</strong>.</p>
<p><strong>*print-pretty*</strong></p>
<p>The <em>method</em> may wish to perform specialized line breaking or other output conditional on the <em>value</em> of <strong>*print-pretty*</strong>. For further information, see (for example) the <em>macro</em> <strong>pprint-fill</strong>. See also Section 22.2.1.4 (Pretty Print Dispatch Tables) and Section 22.2.2 (Examples of using the Pretty Printer).</p>
<p><strong>*print-length*</strong></p>
<p><em>Methods</em> that produce output of indefinite length must obey <strong>*print-length*</strong>. For further information, see (for example) the <em>macros</em> <strong>pprint-logical-block</strong> and <strong>pprint-pop</strong>. See also Section 22.2.1.4 (Pretty Print Dispatch Tables) and Section 22.2.2 (Examples of using the Pretty Printer).</p>
<p><strong>*print-level*</strong></p>
<p>The printer takes care of <strong>*print-level*</strong> automatically, provided that each <em>method</em> handles exactly one level of structure and calls <strong>write</strong> (or an equivalent <em>function</em>) recursively if there are more structural levels. The printer’s decision of whether an <em>object</em> has components (and</p>
<p>therefore should not be printed when the printing depth is not less than <strong>*print-level*</strong>) is <em>implementation-dependent</em>. In some implementations its <strong>print-object</strong> <em>method</em> is not called; in others the <em>method</em> is called, and the determination that the <em>object</em> has components is based on what it tries to write to the <em>stream</em>.</p>
<p><strong>*print-circle*</strong></p>
<p>When the <em>value</em> of <strong>*print-circle*</strong> is <em>true</em>, a user-defined <strong>print-object</strong> <em>method</em> can print <em>objects</em> to the supplied <em>stream</em> using <strong>write</strong>, <strong>prin1</strong>, <strong>princ</strong>, or <strong>format</strong> and expect circularities to be detected and printed using the #<em>n</em># syntax. If a user-defined <strong>print-object</strong> <em>method</em> prints to a <em>stream</em> other than the one that was supplied, then circularity detection starts over for that <em>stream</em>. See <strong>*print-circle*</strong>.</p>
<p><strong>*print-base*</strong>, <strong>*print-radix*</strong>, <strong>*print-case*</strong>, <strong>*print-gensym*</strong>, and <strong>*print-array*</strong></p>
<p>These <em>printer control variables</em> apply to specific types of <em>objects</em> and are handled by the <em>methods</em> for those <em>objects</em>.</p>
<p>If these rules are not obeyed, the results are undefined.</p>
<p>In general, the printer and the <strong>print-object</strong> methods should not rebind the print control variables as they operate recursively through the structure, but this is <em>implementation-dependent</em>.</p>
<p>In some implementations the <em>stream</em> argument passed to a <strong>print-object</strong> <em>method</em> is not the original <em>stream</em>, but is an intermediate <em>stream</em> that implements part of the printer. <em>methods</em> should therefore not depend on the identity of this <em>stream</em>.</p>
<p><strong>See Also:</strong></p>
<p><strong>pprint-fill</strong>, <strong>pprint-logical-block</strong>, <strong>pprint-pop</strong>, <strong>write</strong>, <strong>*print-readably*</strong>, <strong>*print-escape*</strong>, <strong>*print-pretty*</strong>, <strong>*print-length*</strong>, Section 22.1.3 (Default Print-Object Methods), Section 22.1.3.12 (Printing Structures), Section 22.2.1.4 (Pretty Print Dispatch Tables), Section 22.2.2 (Examples of using the Pretty Printer)</p>
<p><strong>print-unreadable-object</strong> <em>Macro</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>print-unreadable-object</strong> (<em>object stream</em> &amp;key <em>type identity</em>) <em>{form}</em>* → <strong>nil</strong></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>object</em>—an <em>object</em>; evaluated.</p>
<p><em>stream</em>—a <em>stream designator</em> ; evaluated.</p>
<p><em>type</em>—a <em>generalized boolean</em>; evaluated.</p>
<p><em>identity</em>—a <em>generalized boolean</em>; evaluated.</p>
<p><em>forms</em>—an <em>implicit progn</em>.</p>
<p><strong>Description:</strong></p>
<p>Outputs a printed representation of <em>object</em> on <em>stream</em>, beginning with “#&lt;” and ending with “&gt;”. Everything output to <em>stream</em> by the body <em>forms</em> is enclosed in the the angle brackets. If <em>type</em> is <em>true</em>, the output from <em>forms</em> is preceded by a brief description of the <em>object</em>’s <em>type</em> and a space character. If <em>identity</em> is <em>true</em>, the output from <em>forms</em> is followed by a space character and a representation of the <em>object</em>’s identity, typically a storage address.</p>
<p>If either <em>type</em> or <em>identity</em> is not supplied, its value is <em>false</em>. It is valid to omit the body <em>forms</em>. If <em>type</em> and <em>identity</em> are both true and there are no body <em>forms</em>, only one space character separates the type and the identity.</p>
<p><strong>Examples:</strong></p>
<p>;; Note that in this example, the precise form of the output ;; is <em>implementation-dependent</em>.</p>
<p>(defmethod print-object ((obj airplane) stream)</p>
<p>(print-unreadable-object (obj stream <!-- -->:type<!-- --> t <!-- -->:identity<!-- --> t)</p>
<p>(princ (tail-number obj) stream)))</p>
<p>(prin1-to-string my-airplane)</p>
<p>→ &quot;#&lt;Airplane NW0773 36000123135&gt;&quot;</p>
<p><i><sup>or</sup>→</i> &quot;#&lt;FAA<!-- -->:AIRPLANE<!-- --> NW0773 17&gt;&quot;</p>
<p><strong>Exceptional Situations:</strong></p>
<p>If <strong>*print-readably*</strong> is <em>true</em>, <strong>print-unreadable-object</strong> signals an error of <em>type</em> <strong>print-not-readable</strong> without printing anything.</p>
<p><strong>set-pprint-dispatch</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>set-pprint-dispatch</strong> <em>type-specifier function</em> &amp;optional <em>priority table →</em> <strong>nil</strong></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>type-specifier</em>—a <em>type specifier</em> .</p>
<p><em>function</em>—a <em>function</em>, a <em>function name</em>, or <strong>nil</strong>.</p>
<p><em>priority</em>—a <em>real</em>. The default is 0.</p>
<p><em>table</em>—a <em>pprint dispatch table</em>. The default is the <em>value</em> of <strong>*print-pprint-dispatch*</strong>.</p>
<p><strong>Description:</strong></p>
<p>Installs an entry into the <em>pprint dispatch table</em> which is <em>table</em>.</p>
<p><em>Type-specifier</em> is the <em>key</em> of the entry. The first action of <strong>set-pprint-dispatch</strong> is to remove any pre-existing entry associated with <em>type-specifier</em>. This guarantees that there will never be two entries associated with the same <em>type specifier</em> in a given <em>pprint dispatch table</em>. Equality of <em>type specifiers</em> is tested by <strong>equal</strong>.</p>
<p>Two values are associated with each <em>type specifier</em> in a <em>pprint dispatch table</em>: a <em>function</em> and a <em>priority</em>. The <em>function</em> must accept two arguments: the <em>stream</em> to which output is sent and the <em>object</em> to be printed. The <em>function</em> should <em>pretty print</em> the <em>object</em> to the <em>stream</em>. The <em>function</em> can assume that object satisfies the <em>type</em> given by <em>type-specifier</em> . The <em>function</em> must obey <strong>*print-readably*</strong>. Any values returned by the <em>function</em> are ignored.</p>
<p><em>Priority</em> is a priority to resolve conflicts when an object matches more than one entry.</p>
<p>It is permissible for <em>function</em> to be <strong>nil</strong>. In this situation, there will be no <em>type-specifier</em> entry in <em>table</em> after <strong>set-pprint-dispatch</strong> returns.</p>
<p><strong>Exceptional Situations:</strong></p>
<p>An error is signaled if <em>priority</em> is not a <em>real</em>.</p>
<p><strong>Notes:</strong></p>
<p>Since <em>pprint dispatch tables</em> are often used to control the pretty printing of Lisp code, it is common for the <em>type-specifier</em> to be an <em>expression</em> of the form</p>
<p>(cons <em>car-type cdr-type</em>)</p>
<p>This signifies that the corresponding object must be a cons cell whose <em>car</em> matches the <em>type specifier car-type</em> and whose <em>cdr</em> matches the <em>type specifier cdr-type</em>. The <em>cdr-type</em> can be omitted in which case it defaults to <strong>t</strong>.</p>
<p><strong>write, prin1, print, pprint, princ</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>write</strong> <em>object</em> &amp;key <em>array base case circle escape gensym</em></p>
<p><em>length level lines miser-width pprint-dispatch</em></p>
<p><em>pretty radix readably right-margin stream</em></p>
<p>→ object</p>
<p><strong>prin1</strong> <em>object</em> &amp;optional <em>output-stream → object</em></p>
<p><strong>princ</strong> <em>object</em> &amp;optional <em>output-stream → object</em></p>
<p><strong>write, prin1, print, pprint, princ</strong></p>
<p><strong>print</strong> <em>object</em> &amp;optional <em>output-stream → object</em></p>
<p><strong>pprint</strong> <em>object</em> &amp;optional <em>output-stream → hno valuesi</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>object</em>—an <em>object</em>.</p>
<p><em>output-stream</em>—an <em>output stream designator</em> . The default is <em>standard output</em>.</p>
<p><em>array</em>—a <em>generalized boolean</em>.</p>
<p><em>base</em>—a <em>radix</em> .</p>
<p><em>case</em>—a <em>symbol</em> of <em>type</em> (member <!-- -->:upcase<!-- --> <!-- -->:downcase<!-- --> <!-- -->:capitalize<!-- -->).</p>
<p><em>circle</em>—a <em>generalized boolean</em>.</p>
<p><em>escape</em>—a <em>generalized boolean</em>.</p>
<p><em>gensym</em>—a <em>generalized boolean</em>.</p>
<p><em>length</em>—a non-negative <em>integer</em> , or <strong>nil</strong>.</p>
<p><em>level</em>—a non-negative <em>integer</em> , or <strong>nil</strong>.</p>
<p><em>lines</em>—a non-negative <em>integer</em> , or <strong>nil</strong>.</p>
<p><em>miser-width</em>—a non-negative <em>integer</em> , or <strong>nil</strong>.</p>
<p><em>pprint-dispatch</em>—a <em>pprint dispatch table</em>.</p>
<p><em>pretty</em>—a <em>generalized boolean</em>.</p>
<p><em>radix</em>—a <em>generalized boolean</em>.</p>
<p><em>readably</em>—a <em>generalized boolean</em>.</p>
<p><em>right-margin</em>—a non-negative <em>integer</em> , or <strong>nil</strong>.</p>
<p><em>stream</em>—an <em>output stream designator</em> . The default is <em>standard output</em>.</p>
<p><strong>Description:</strong></p>
<p><strong>write</strong>, <strong>prin1</strong>, <strong>princ</strong>, <strong>print</strong>, and <strong>pprint</strong> write the printed representation of <em>object</em> to <em>output-stream</em>.</p>
<p><strong>write</strong> is the general entry point to the <em>Lisp printer</em> . For each explicitly supplied <em>keyword parameter</em> named in Figure 22–7, the corresponding <em>printer control variable</em> is dynamically bound to its <em>value</em> while printing goes on; for each <em>keyword parameter</em> in Figure 22–7 that is not explicitly supplied, the value of the corresponding <em>printer control variable</em> is the same as it was at the time <strong>write</strong> was invoked. Once the appropriate <em>bindings</em> are <em>established</em>, the <em>object</em> is output by the <em>Lisp printer</em> .</p>
<p><strong>write, prin1, print, pprint, princ</strong></p>
<p>|<strong>Parameter Corresponding Dynamic Variable</strong>|</p>
<p>| :- |</p>
<p>|</p><p><em>array</em> <strong>*print-array*</strong> </p><p><em>base</em> <strong>*print-base*</strong> </p><p><em>case</em> <strong>*print-case*</strong> </p><p><em>circle</em> <strong>*print-circle*</strong> </p><p><em>escape</em> <strong>*print-escape*</strong> </p><p><em>gensym</em> <strong>*print-gensym*</strong> </p><p><em>length</em> <strong>*print-length*</strong> </p><p><em>level</em> <strong>*print-level*</strong> </p><p><em>lines</em> <strong>*print-lines*</strong> </p><p><em>miser-width</em> <strong>*print-miser-width*</strong> </p><p><em>pprint-dispatch</em> <strong>*print-pprint-dispatch*</strong> </p><p><em>pretty</em> <strong>*print-pretty*</strong> </p><p><em>radix</em> <strong>*print-radix*</strong> </p><p><em>readably</em> <strong>*print-readably*</strong> </p><p><em>right-margin</em> <strong>*print-right-margin*</strong></p>|<p></p>
<p><strong>Figure 22–7. Argument correspondences for the WRITE function.</strong></p>
<p><strong>prin1</strong>, <strong>princ</strong>, <strong>print</strong>, and <strong>pprint</strong> implicitly <em>bind</em> certain print parameters to particu lar values. The remaining parameter values are taken from <strong>*print-array*</strong>, <strong>*print-base*</strong>, <strong>*print-case*</strong>, <strong>*print-circle*</strong>, <strong>*print-escape*</strong>, <strong>*print-gensym*</strong>, <strong>*print-length*</strong>, <strong>*print-level*</strong>, <strong>*print-lines*</strong>, <strong>*print-miser-width*</strong>, <strong>*print-pprint-dispatch*</strong>, <strong>*print-pretty*</strong>, <strong>*print-radix*</strong>, and <strong>*print-right-margin*</strong>.</p>
<p><strong>prin1</strong> produces output suitable for input to <strong>read</strong>. It binds <strong>*print-escape*</strong> to <em>true</em>.</p>
<p><strong>princ</strong> is just like <strong>prin1</strong> except that the output has no <em>escape characters</em>. It binds <strong>*print-escape*</strong> to <em>false</em> and <strong>*print-readably*</strong> to <em>false</em>. The general rule is that output from <strong>princ</strong> is intended to look good to people, while output from <strong>prin1</strong> is intended to be acceptable to <strong>read</strong>.</p>
<p><strong>print</strong> is just like <strong>prin1</strong> except that the printed representation of <em>object</em> is preceded by a newline and followed by a space.</p>
<p><strong>pprint</strong> is just like <strong>print</strong> except that the trailing space is omitted and <em>object</em> is printed with the <strong>*print-pretty*</strong> flag <em>non-nil</em> to produce pretty output.</p>
<p><em>Output-stream</em> specifies the <em>stream</em> to which output is to be sent.</p>
<p><strong>Affected By:</strong></p>
<p><strong>*standard-output*</strong>, <strong>*terminal-io*</strong>, <strong>*print-escape*</strong>, <strong>*print-radix*</strong>, <strong>*print-base*</strong>, <strong>*print-circle*</strong>, <strong>*print-pretty*</strong>, <strong>*print-level*</strong>, <strong>*print-length*</strong>, <strong>*print-case*</strong>, <strong>*print-gensym*</strong>, <strong>*print-array*</strong>, <strong>*read-default-float-format*</strong>.</p>
<p><strong>See Also:</strong></p>
<p><strong>readtable-case</strong>, Section 22.3.4 (FORMAT Printer Operations)</p>
<p><strong>Notes:</strong></p>
<p>The <em>functions</em> <strong>prin1</strong> and <strong>print</strong> do not bind <strong>*print-readably*</strong>.</p>
<p>(prin1 object output-stream)</p>
<p><em>≡</em> (write object <!-- -->:stream<!-- --> output-stream <!-- -->:escape<!-- --> t)</p>
<p>(princ object output-stream)</p>
<p><em>≡</em> (write object stream output-stream <!-- -->:escape<!-- --> nil <!-- -->:readably<!-- --> nil)</p>
<p>(print object output-stream)</p>
<p><em>≡</em> (progn (terpri output-stream)</p>
<p>(write object <!-- -->:stream<!-- --> output-stream</p>
<p>:escape<!-- --> t)</p>
<p>(write-char #\space output-stream))</p>
<p>(pprint object output-stream)</p>
<p><em>≡</em> (write object <!-- -->:stream<!-- --> output-stream <!-- -->:escape<!-- --> t <!-- -->:pretty<!-- --> t)</p>
<p><strong>write-to-string, prin1-to-string, princ-to-string</strong> <em>Function</em></p>
<p><strong>Syntax:</strong></p>
<p><strong>write-to-string</strong> <em>object</em> &amp;key <em>array base case circle escape gensym</em></p>
<p><em>length level lines miser-width pprint-dispatch</em></p>
<p><em>pretty radix readably right-margin</em></p>
<p>→ string</p>
<p><strong>prin1-to-string</strong> <em>object → string</em></p>
<p><strong>princ-to-string</strong> <em>object → string</em></p>
<p><strong>Arguments and Values:</strong></p>
<p><em>object</em>—an <em>object</em>.</p>
<p><em>array</em>—a <em>generalized boolean</em>.</p>
<p><em>base</em>—a <em>radix</em> .</p>
<p><strong>write-to-string, prin1-to-string, princ-to-string</strong></p>
<p><em>case</em>—a <em>symbol</em> of <em>type</em> (member <!-- -->:upcase<!-- --> <!-- -->:downcase<!-- --> <!-- -->:capitalize<!-- -->).</p>
<p><em>circle</em>—a <em>generalized boolean</em>.</p>
<p><em>escape</em>—a <em>generalized boolean</em>.</p>
<p><em>gensym</em>—a <em>generalized boolean</em>.</p>
<p><em>length</em>—a non-negative <em>integer</em> , or <strong>nil</strong>.</p>
<p><em>level</em>—a non-negative <em>integer</em> , or <strong>nil</strong>.</p>
<p><em>lines</em>—a non-negative <em>integer</em> , or <strong>nil</strong>.</p>
<p><em>miser-width</em>—a non-negative <em>integer</em> , or <strong>nil</strong>.</p>
<p><em>pprint-dispatch</em>—a <em>pprint dispatch table</em>.</p>
<p><em>pretty</em>—a <em>generalized boolean</em>.</p>
<p><em>radix</em>—a <em>generalized boolean</em>.</p>
<p><em>readably</em>—a <em>generalized boolean</em>.</p>
<p><em>right-margin</em>—a non-negative <em>integer</em> , or <strong>nil</strong>.</p>
<p><em>string</em>—a <em>string</em>.</p>
<p><strong>Description:</strong></p>
<p><strong>write-to-string</strong>, <strong>prin1-to-string</strong>, and <strong>princ-to-string</strong> are used to create a <em>string</em> consisting of the printed representation of <em>object</em>. <em>Object</em> is effectively printed as if by <strong>write</strong>, <strong>prin1</strong>, or <strong>princ</strong>, respectively, and the <em>characters</em> that would be output are made into a <em>string</em>.</p>
<p><strong>write-to-string</strong> is the general output function. It has the ability to specify all the parameters applicable to the printing of <em>object</em>.</p>
<p><strong>prin1-to-string</strong> acts like <strong>write-to-string</strong> with <!-- -->:escape<!-- --> t, that is, escape characters are written where appropriate.</p>
<p><strong>princ-to-string</strong> acts like <strong>write-to-string</strong> with <!-- -->:escape<!-- --> nil <!-- -->:readably<!-- --> nil. Thus no <em>escape characters</em> are written.</p>
<p>All other keywords that would be specified to <strong>write-to-string</strong> are default values when <strong>prin1-to-string</strong> or <strong>princ-to-string</strong> is invoked.</p>
<p>The meanings and defaults for the keyword arguments to <strong>write-to-string</strong> are the same as those for <strong>write</strong>.</p>
<p><strong>Examples:</strong></p>
<p>(prin1-to-string &quot;abc&quot;) → &quot;&quot;abc&quot;&quot;</p>
<p>(princ-to-string &quot;abc&quot;) → &quot;abc&quot;</p>
<p><strong>Affected By:</strong></p>
<p><strong>*print-escape*</strong>, <strong>*print-radix*</strong>, <strong>*print-base*</strong>, <strong>*print-circle*</strong>, <strong>*print-pretty*</strong>, <strong>*print-level*</strong>, <strong>*print-length*</strong>, <strong>*print-case*</strong>, <strong>*print-gensym*</strong>, <strong>*print-array*</strong>, <strong>*read-default-float-format*</strong>.</p>
<p><strong>See Also:</strong></p>
<p><strong>write</strong></p>
<p><strong>Notes:</strong></p>
<p>(write-to-string <em>object &amp;#123;key argument&amp;#125;</em>*)</p>
<p><em>≡</em> (with-output-to-string (#1=#<!-- -->:string-stream<!-- -->)</p>
<p>(write object <!-- -->:stream<!-- --> #1# <em>&amp;#123;key argument&amp;#125;</em>*))</p>
<p>(princ-to-string <em>object</em>)</p>
<p><em>≡</em> (with-output-to-string (string-stream)</p>
<p>(princ <em>object</em> string-stream))</p>
<p>(prin1-to-string <em>object</em>)</p>
<p><em>≡</em> (with-output-to-string (string-stream)</p>
<p>(prin1 <em>object</em> string-stream))</p>
<p><em>∗</em><strong>print-array</strong><em>∗ Variable</em></p>
<p><strong>Value Type:</strong></p>
<p>a <em>generalized boolean</em>.</p>
<p><strong>Initial Value:</strong></p>
<p><em>implementation-dependent</em>.</p>
<p><strong>Description:</strong></p>
<p>Controls the format in which <em>arrays</em> are printed. If it is <em>false</em>, the contents of <em>arrays</em> other than <em>strings</em> are never printed. Instead, <em>arrays</em> are printed in a concise form using #&lt; that gives enough information for the user to be able to identify the <em>array</em>, but does not include the entire <em>array</em> contents. If it is <em>true</em>, non-<em>string arrays</em> are printed using #(...), #*, or #nA syntax.</p>
<p><strong>Affected By:</strong></p>
<p>The <em>implementation</em>.</p>
<p><strong>See Also:</strong></p>
<p>Section 2.4.8.3 (Sharpsign Left-Parenthesis), Section 2.4.8.20 (Sharpsign Less-Than-Sign) <em>∗</em><strong>print-base</strong><em>∗</em>**,** <em>∗</em><strong>print-radix</strong><em>∗ Variable</em></p>
<p><strong>Value Type:</strong></p>
<p><strong>*print-base*</strong>—a <em>radix</em> . <strong>*print-radix*</strong>—a <em>generalized boolean</em>.</p>
<p><strong>Initial Value:</strong></p>
<p>The initial <em>value</em> of <strong>*print-base*</strong> is 10. The initial <em>value</em> of <strong>*print-radix*</strong> is <em>false</em>.</p>
<p><strong>Description:</strong></p>
<p><strong>*print-base*</strong> and <strong>*print-radix*</strong> control the printing of <em>rationals</em>. The <em>value</em> of <strong>*print-base*</strong> is called the <em>current output base</em>.</p>
<p>The <em>value</em> of <strong>*print-base*</strong> is the <em>radix</em> in which the printer will print <em>rationals</em>. For radices above 10, letters of the alphabet are used to represent digits above 9.</p>
<p>If the <em>value</em> of <strong>*print-radix*</strong> is <em>true</em>, the printer will print a radix specifier to indicate the <em>radix</em> in which it is printing a <em>rational</em> number. The radix specifier is always printed using lowercase letters. If <strong>*print-base*</strong> is 2, 8, or 16, then the radix specifier used is #b, #o, or #x, respectively. For <em>integers</em>, base ten is indicated by a trailing decimal point instead of a leading radix specifier; for <em>ratios</em>, #10r is used.</p>
<p><strong>Examples:</strong></p>
<p>(let ((*print-base* 24.) (*print-radix* t))</p>
<p>(print 23.))</p>
<p>▷ #24rN</p>
<p>→ 23</p>
<p>(setq *print-base* 10) → 10</p>
<p>(setq *print-radix* nil) → NIL</p>
<p>(dotimes (i 35)</p>
<p>(let ((*print-base* (+ i 2))) ;print the decimal number 40</p>
<p>(write 40) ;in each base from 2 to 36</p>
<p>(if (zerop (mod i 10)) (terpri) (format t &quot; &quot;))))</p>
<p>▷ 101000</p>
<p>▷ 1111 220 130 104 55 50 44 40 37 34</p>
<p>▷ 31 2C 2A 28 26 24 22 20 1J 1I</p>
<p>▷ 1H 1G 1F 1E 1D 1C 1B 1A 19 18</p>
<p>▷ 17 16 15 14</p>
<p>→ NIL</p>
<p>(dolist (pb ’(2 3 8 10 16))</p>
<p>(let ((*print-radix* t) ;print the integer 10 and</p>
<p>(*print-base* pb)) ;the ratio 1/10 in bases 2,</p>
<p>(format t &quot;~&amp;~S <del>S</del>%&quot; 10 1/10))) ;3, 8, 10, 16</p>
<p>▷ #b1010 #b1/1010</p>
<p>▷ #3r101 #3r1/101</p>
<p>▷ #o12 #o1/12</p>
<p>▷ 10. #10r1/10</p>
<p>▷ #xA #x1/A</p>
<p>→ NIL</p>
<p><strong>Affected By:</strong></p>
<p>Might be <em>bound</em> by <strong>format</strong>, and <strong>write</strong>, <strong>write-to-string</strong>.</p>
<p><strong>See Also:</strong></p>
<p><strong>format</strong>, <strong>write</strong>, <strong>write-to-string</strong></p>
<p><em>∗</em><strong>print-case</strong><em>∗ Variable</em></p>
<p><strong>Value Type:</strong></p>
<p>One of the <em>symbols</em> <!-- -->:upcase<!-- -->, <!-- -->:downcase<!-- -->, or <!-- -->:capitalize<!-- -->.</p>
<p><strong>Initial Value:</strong></p>
<p>The <em>symbol</em> <!-- -->:upcase<!-- -->.</p>
<p><strong>Description:</strong></p>
<p>The <em>value</em> of <strong>*print-case*</strong> controls the case (upper, lower, or mixed) in which to print any uppercase characters in the names of <em>symbols</em> when vertical-bar syntax is not used.</p>
<p><strong>*print-case*</strong> has an effect at all times when the <em>value</em> of <strong>*print-escape*</strong> is <em>false</em>. <strong>*print-case*</strong> also has an effect when the <em>value</em> of <strong>*print-escape*</strong> is <em>true</em> unless inside an escape context (<em>i.e.</em>, unless between <em>vertical-bars</em> or after a <em>slash</em>).</p>
<p><strong>Examples:</strong></p>
<p>(defun test-print-case ()</p>
<p>(dolist (*print-case* ’(<!-- -->:upcase<!-- --> <!-- -->:downcase<!-- --> <!-- -->:capitalize<!-- -->))</p>
<p>(format t &quot;~&amp;~S <del>S</del>%&quot; ’this-and-that ’|And-something-elSE|)))</p>
<p>→ TEST-PC</p>
<p>;; Although the choice of which characters to escape is specified by</p>
<p>;; *PRINT-CASE*, the choice of how to escape those characters</p>
<p>;; (i.e., whether single escapes or multiple escapes are used)</p>
<p>;; is implementation-dependent. The examples here show two of the</p>
<p>;; many valid ways in which escaping might appear.</p>
<p>(test-print-case) ;Implementation A</p>
<p>▷ THIS-AND-THAT |And-something-elSE|</p>
<p>▷ this-and-that a\n\d-\s\o\m\e\t\h\i\n\g-\e\lse</p>
<p>▷ This-And-That A\n\d-\s\o\m\e\t\h\i\n\g-\e\lse</p>
<p>→ NIL</p>
<p>(test-print-case) ;Implementation B</p>
<p>▷ THIS-AND-THAT |And-something-elSE|</p>
<p>▷ this-and-that a|nd-something-el|se</p>
<p>▷ This-And-That A|nd-something-el|se</p>
<p>→ NIL</p>
<p><strong>See Also:</strong></p>
<p><strong>write</strong></p>
<p><strong>Notes:</strong></p>
<p><strong>read</strong> normally converts lowercase characters appearing in <em>symbols</em> to corresponding uppercase characters, so that internally print names normally contain only uppercase characters.</p>
<p>If <strong>*print-escape*</strong> is <em>true</em>, lowercase characters in the <em>name</em> of a <em>symbol</em> are always printed in lowercase, and are preceded by a single escape character or enclosed by multiple escape characters; uppercase characters in the <em>name</em> of a <em>symbol</em> are printed in upper case, in lower case, or in mixed case so as to capitalize words, according to the value of <strong>*print-case*</strong>. The convention for what constitutes a “word” is the same as for <strong>string-capitalize</strong>.</p>
<p><em>∗</em><strong>print-circle</strong><em>∗ Variable</em></p>
<p><strong>Value Type:</strong></p>
<p>a <em>generalized boolean</em>.</p>
<p><strong>Initial Value:</strong></p>
<p><em>false</em>.</p>
<p><strong>Description:</strong></p>
<p>Controls the attempt to detect circularity and sharing in an <em>object</em> being printed.</p>
<p>If <em>false</em>, the printing process merely proceeds by recursive descent without attempting to detect circularity and sharing.</p>
<p>If <em>true</em>, the printer will endeavor to detect cycles and sharing in the structure to be printed, and to use #<em>n</em>= and #<em>n</em># syntax to indicate the circularities or shared components.</p>
<p>If <em>true</em>, a user-defined <strong>print-object</strong> <em>method</em> can print <em>objects</em> to the supplied <em>stream</em> using <strong>write</strong>, <strong>prin1</strong>, <strong>princ</strong>, or <strong>format</strong> and expect circularities and sharing to be detected and printed using the</p>
<p>#<em>n</em># syntax. If a user-defined <strong>print-object</strong> <em>method</em> prints to a <em>stream</em> other than the one that was supplied, then circularity detection starts over for that <em>stream</em>.</p>
<p>Note that implementations should not use #<em>n</em># notation when the <em>Lisp reader</em> would automatically assure sharing without it (<em>e.g.</em>, as happens with <em>interned symbols</em>).</p>
<p><strong>Examples:</strong></p>
<p>(let ((a (list 1 2 3)))</p>
<p>(setf (cdddr a) a)</p>
<p>(let ((*print-circle* t))</p>
<p>(write a)</p>
<p>:done<!-- -->))</p>
<p>▷ #1=(1 2 3 . #1#)</p>
<p>→ <!-- -->:DONE</p>
<p><strong>See Also:</strong></p>
<p><strong>write</strong></p>
<p><strong>Notes:</strong></p>
<p>An attempt to print a circular structure with <strong>*print-circle*</strong> set to <strong>nil</strong> may lead to looping behavior and failure to terminate.</p>
<p><em>∗</em><strong>print-escape</strong><em>∗ Variable</em></p>
<p><strong>Value Type:</strong></p>
<p>a <em>generalized boolean</em>.</p>
<p><strong>Initial Value:</strong></p>
<p><em>true</em>.</p>
<p><strong>Description:</strong></p>
<p>If <em>false</em>, escape characters and <em>package prefixes</em> are not output when an expression is printed.</p>
<p>If <em>true</em>, an attempt is made to print an <em>expression</em> in such a way that it can be read again to produce an <strong>equal</strong> <em>expression</em>. (This is only a guideline; not a requirement. See <strong>*print-readably*</strong>.)</p>
<p>For more specific details of how the <em>value</em> of <strong>*print-escape*</strong> affects the printing of certain <em>types</em>, see Section 22.1.3 (Default Print-Object Methods).</p>
<p><strong>Examples:</strong></p>
<p>(let ((*print-escape* t)) (write #\a))</p>
<p>▷ #\a</p>
<p>→ #\a</p>
<p>(let ((*print-escape* nil)) (write #\a))</p>
<p>▷ a</p>
<p>→ #\a</p>
<p><strong>Affected By:</strong></p>
<p><strong>princ</strong>, <strong>prin1</strong>, <strong>format</strong></p>
<p><strong>See Also:</strong></p>
<p><strong>write</strong>, <strong>readtable-case</strong></p>
<p><strong>Notes:</strong></p>
<p><strong>princ</strong> effectively binds <strong>*print-escape*</strong> to <em>false</em>. <strong>prin1</strong> effectively binds <strong>*print-escape*</strong> to <em>true</em>. <em>∗</em><strong>print-gensym</strong><em> ∗ Variable</em></p>
<p><strong>Value Type:</strong></p>
<p>a <em>generalized boolean</em>.</p>
<p><strong>Initial Value:</strong></p>
<p><em>true</em>.</p>
<p><strong>Description:</strong></p>
<p>Controls whether the prefix “#:” is printed before <em>apparently uninterned symbols</em>. The prefix is printed before such <em>symbols</em> if and only if the <em>value</em> of <strong>*print-gensym*</strong> is <em>true</em>.</p>
<p><strong>Examples:</strong></p>
<p>(let ((*print-gensym* nil))</p>
<p>(print (gensym)))</p>
<p>▷ G6040</p>
<p>→ #<!-- -->:G6040</p>
<p><strong>See Also:</strong></p>
<p><strong>write</strong>, <strong>*print-escape*</strong></p>
<p><em>∗</em><strong>print-level</strong><em>∗</em>**,** <em>∗</em><strong>print-length</strong><em>∗</em></p>
<p><em>∗</em><strong>print-level</strong><em>∗</em>**,** <em>∗</em><strong>print-length</strong><em>∗ Variable</em></p>
<p><strong>Value Type:</strong></p>
<p>a non-negative <em>integer</em> , or <strong>nil</strong>.</p>
<p><strong>Initial Value:</strong></p>
<p><strong>nil</strong>.</p>
<p><strong>Description:</strong></p>
<p><strong>*print-level*</strong> controls how many levels deep a nested <em>object</em> will print. If it is <em>false</em>, then no control is exercised. Otherwise, it is an <em>integer</em> indicating the maximum level to be printed. An <em>object</em> to be printed is at level 0; its components (as of a <em>list</em> or <em>vector</em> ) are at level 1; and so on. If an <em>object</em></p>
<p>to be recursively printed has components and is at a level equal to or greater than the <em>value</em> of <strong>*print-level*</strong>, then the <em>object</em> is printed as “#”.</p>
<p><strong>*print-length*</strong> controls how many elements at a given level are printed. If it is <em>false</em>, there is no limit to the number of components printed. Otherwise, it is an <em>integer</em> indicating the maximum number of <em>elements</em> of an <em>object</em> to be printed. If exceeded, the printer will print  “...” in place of the other <em>elements</em>. In the case of a <em>dotted list</em>, if the <em>list</em> contains exactly as many <em>elements</em> as the <em>value</em> of <strong>*print-length*</strong>, the terminating <em>atom</em> is printed rather than printing “...”</p>
<p><strong>*print-level*</strong> and <strong>*print-length*</strong> affect the printing of an any <em>object</em> printed with a list-like syntax. They do not affect the printing of <em>symbols</em>, <em>strings</em>, and <em>bit vectors</em>.</p>
<p><strong>Examples:</strong></p>
<p>(setq a ’(1 (2 (3 (4 (5 (6))))))) → (1 (2 (3 (4 (5 (6))))))</p>
<p>(dotimes (i 8)</p>
<p>(let ((*print-level* i))</p>
<p>(format t &quot;~&amp;~D – <del>S</del>%&quot; i a)))</p>
<p>▷ 0 – #</p>
<p>▷ 1 – (1 #)</p>
<p>▷ 2 – (1 (2 #))</p>
<p>▷ 3 – (1 (2 (3 #)))</p>
<p>▷ 4 – (1 (2 (3 (4 #))))</p>
<p>▷ 5 – (1 (2 (3 (4 (5 #)))))</p>
<p>▷ 6 – (1 (2 (3 (4 (5 (6))))))</p>
<p>▷ 7 – (1 (2 (3 (4 (5 (6))))))</p>
<p>→ NIL</p>
<p>(setq a ’(1 2 3 4 5 6)) → (1 2 3 4 5 6)</p>
<p>(dotimes (i 7)</p>
<p>(let ((*print-length* i))</p>
<p>(format t &quot;~&amp;~D – <del>S</del>%&quot; i a)))</p>
<p>▷ 0 – (...)</p>
<p>▷ 1 – (1 ...)</p>
<p>▷ 2 – (1 2 ...)</p>
<p>▷ 3 – (1 2 3 ...)</p>
<p>▷ 4 – (1 2 3 4 ...)</p>
<p>▷ 5 – (1 2 3 4 5 6)</p>
<p>▷ 6 – (1 2 3 4 5 6)</p>
<p>→ NIL</p>
<p>(dolist (level-length ’((0 1) (1 1) (1 2) (1 3) (1 4)</p>
<p>(2 1) (2 2) (2 3) (3 2) (3 3) (3 4)))</p>
<p>(let ((*print-level* (first level-length))</p>
<p>(*print-length* (second level-length)))</p>
<p>(format t &quot;~&amp;~D ~D – <del>S</del>%&quot;</p>
<p>*print-level* *print-length*</p>
<p>’(if (member x y) (+ (car x) 3) ’(foo . #(a b c d &quot;Baz&quot;))))))</p>
<p>▷ 0 1 – #</p>
<p>▷ 1 1 – (IF ...)</p>
<p>▷ 1 2 – (IF # ...)</p>
<p>▷ 1 3 – (IF # # ...)</p>
<p>▷ 1 4 – (IF # # #)</p>
<p>▷ 2 1 – (IF ...)</p>
<p>▷ 2 2 – (IF (MEMBER X ...) ...)</p>
<p>▷ 2 3 – (IF (MEMBER X Y) (+ # 3) ...)</p>
<p>▷ 3 2 – (IF (MEMBER X ...) ...)</p>
<p>▷ 3 3 – (IF (MEMBER X Y) (+ (CAR X) 3) ...)</p>
<p>▷ 3 4 – (IF (MEMBER X Y) (+ (CAR X) 3) ’(FOO . #(A B C D ...)))</p>
<p>→ NIL</p>
<p><strong>See Also:</strong></p>
<p><strong>write</strong></p>
<p><em>∗</em><strong>print-lines</strong><em>∗ Variable</em></p>
<p><strong>Value Type:</strong></p>
<p>a non-negative <em>integer</em> , or <strong>nil</strong>.</p>
<p><strong>Initial Value:</strong></p>
<p><strong>nil</strong>.</p>
<p><strong>Description:</strong></p>
<p>When the <em>value</em> of <strong>*print-lines*</strong> is other than <strong>nil</strong>, it is a limit on the number of output lines produced when something is pretty printed. If an attempt is made to go beyond that many lines, “..” is printed at the end of the last line followed by all of the suffixes (closing delimiters) that are pending to be printed.</p>
<p><strong>Examples:</strong></p>
<p>(let ((*print-right-margin* 25) (*print-lines* 3))</p>
<p>(pprint ’(progn (setq a 1 b 2 c 3 d 4))))</p>
<p>▷ (PROGN (SETQ A 1</p>
<p>▷ B 2</p>
<p>▷ C 3 ..))</p>
<p>→ hno valuesi</p>
<p><strong>Notes:</strong></p>
<p>The “..” notation is intentionally different than the “...” notation used for level abbreviation, so that the two different situations can be visually distinguished.</p>
<p>This notation is used to increase the likelihood that the <em>Lisp reader</em> will signal an error if an attempt is later made to read the abbreviated output. Note however that if the truncation occurs in a <em>string</em>, as in &quot;This string has been trunc..&quot;, the problem situation cannot be detected later and no such error will be signaled.</p>
<p><em>∗</em><strong>print-miser-width</strong><em>∗ Variable</em></p>
<p><strong>Value Type:</strong></p>
<p>a non-negative <em>integer</em> , or <strong>nil</strong>.</p>
<p><strong>Initial Value:</strong></p>
<p><em>implementation-dependent</em></p>
<p><strong>Description:</strong></p>
<p>If it is not <strong>nil</strong>, the <em>pretty printer</em> switches to a compact style of output (called miser style) whenever the width available for printing a substructure is less than or equal to this many <em>ems</em>.</p>
<p><em>∗</em><strong>print-pprint-dispatch</strong><em>∗ Variable</em></p>
<p><strong>Value Type:</strong></p>
<p>a <em>pprint dispatch table</em>.</p>
<p><strong>Initial Value:</strong></p>
<p><em>implementation-dependent</em>, but the initial entries all use a special class of priorities that have the property that they are less than every priority that can be specified using <strong>set-pprint-dispatch</strong>, so that the initial contents of any entry can be overridden.</p>
<p><strong>Description:</strong></p>
<p>The <em>pprint dispatch table</em> which currently controls the <em>pretty printer</em> .</p>
<p><strong>See Also:</strong></p>
<p><strong>*print-pretty*</strong>, Section 22.2.1.4 (Pretty Print Dispatch Tables)</p>
<p><strong>Notes:</strong></p>
<p>The intent is that the initial <em>value</em> of this <em>variable</em> should cause ‘traditional’ <em>pretty printing</em> of <em>code</em>. In general, however, you can put a value in <strong>*print-pprint-dispatch*</strong> that makes pretty-printed output look exactly like non-pretty-printed output. Setting <strong>*print-pretty*</strong> to <em>true</em> just causes the functions contained in the <em>current pprint dispatch table</em> to have priority over normal <strong>print-object</strong> methods; it has no magic way of enforcing that those functions actually produce pretty output. For details, see Section 22.2.1.4 (Pretty Print Dispatch Tables).</p>
<p><em>∗</em><strong>print-pretty</strong><em>∗ Variable</em></p>
<p><strong>Value Type:</strong></p>
<p>a <em>generalized boolean</em>.</p>
<p><strong>Initial Value:</strong></p>
<p><em>implementation-dependent</em>.</p>
<p><strong>Description:</strong></p>
<p>Controls whether the <em>Lisp printer</em> calls the <em>pretty printer</em> .</p>
<p>If it is <em>false</em>, the <em>pretty printer</em> is not used and a minimum of <em>whitespace</em><sub>1</sub> is output when printing an expression.</p>
<p>If it is <em>true</em>, the <em>pretty printer</em> is used, and the <em>Lisp printer</em> will endeavor to insert extra <em>whitespace</em><sub>1</sub> where appropriate to make <em>expressions</em> more readable.</p>
<p><strong>*print-pretty*</strong> has an effect even when the <em>value</em> of <strong>*print-escape*</strong> is <em>false</em>.</p>
<p><strong>Examples:</strong></p>
<p>(setq *print-pretty* ’nil) → NIL</p>
<p>(progn (write ’(let ((a 1) (b 2) (c 3)) (+ a b c))) nil)</p>
<p>▷ (LET ((A 1) (B 2) (C 3)) (+ A B C))</p>
<p>→ NIL</p>
<p>(let ((*print-pretty* t))</p>
<p>(progn (write ’(let ((a 1) (b 2) (c 3)) (+ a b c))) nil))</p>
<p>▷ (LET ((A 1)</p>
<p>▷ (B 2)</p>
<p>▷ (C 3))</p>
<p>▷ (+ A B C))</p>
<p>→ NIL</p>
<p>;; Note that the first two expressions printed by this next form</p>
<p>;; differ from the second two only in whether escape characters are printed. ;; In all four cases, extra whitespace is inserted by the pretty printer.</p>
<p>(flet ((test (x)</p>
<p>(let ((*print-pretty* t))</p>
<p>(print x)</p>
<p>(format t &quot;~%~S &quot; x)</p>
<p>(terpri) (princ x) (princ &quot; &quot;)</p>
<p>(format t &quot;~%~A &quot; x))))</p>
<p>(test ’#’(lambda () (list &quot;a&quot; # ’c #’d))))</p>
<p>▷ #’(LAMBDA ()</p>
<p>▷ (LIST &quot;a&quot; # ’C #’D))</p>
<p>▷ #’(LAMBDA ()</p>
<p>▷ (LIST &quot;a&quot; # ’C #’D))</p>
<p>▷ #’(LAMBDA ()</p>
<p>▷ (LIST a b ’C #’D))</p>
<p>▷ #’(LAMBDA ()</p>
<p>▷ (LIST a b ’C #’D))</p>
<p>→ NIL</p>
<p><strong>See Also:</strong></p>
<p><strong>write</strong></p>
<p><em>∗</em><strong>print-readably</strong><em>∗ Variable</em></p>
<p><strong>Value Type:</strong></p>
<p>a <em>generalized boolean</em>.</p>
<p><em>∗</em><strong>print-readably</strong><em>∗</em></p>
<p><strong>Initial Value:</strong></p>
<p><em>false</em>.</p>
<p><strong>Description:</strong></p>
<p>If <strong>*print-readably*</strong> is <em>true</em>, some special rules for printing <em>objects</em> go into effect. Specifically, printing any <em>object O</em><sub>1</sub> produces a printed representation that, when seen by the <em>Lisp reader</em> while the <em>standard readtable</em> is in effect, will produce an <em>object O</em><sub>2</sub> that is <em>similar</em> to <em>O</em><sub>1</sub>. The printed representation produced might or might not be the same as the printed representation produced when <strong>*print-readably*</strong> is <em>false</em>. If printing an <em>object readably</em> is not possible, an error of <em>type</em> <strong>print-not-readable</strong> is signaled rather than using a syntax (<em>e.g.</em>, the “#&lt;” syntax) that would not be readable by the same <em>implementation</em>. If the <em>value</em> of some other <em>printer control variable</em> is such that these requirements would be violated, the <em>value</em> of that other <em>variable</em> is ignored.</p>
<p>Specifically, if <strong>*print-readably*</strong> is <em>true</em>, printing proceeds as if <strong>*print-escape*</strong>, <strong>*print-array*</strong>, and <strong>*print-gensym*</strong> were also <em>true</em>, and as if <strong>*print-length*</strong>, <strong>*print-level*</strong>, and <strong>*print-lines*</strong> were <em>false</em>.</p>
<p>If <strong>*print-readably*</strong> is <em>false</em>, the normal rules for printing and the normal interpretations of other <em>printer control variables</em> are in effect.</p>
<p>Individual <em>methods</em> for <strong>print-object</strong>, including user-defined <em>methods</em>, are responsible for implementing these requirements.</p>
<p>If <strong>*read-eval*</strong> is <em>false</em> and <strong>*print-readably*</strong> is <em>true</em>, any such method that would output a reference to the “#.” <em>reader macro</em> will either output something else or will signal an error (as described above).</p>
<p><strong>Examples:</strong></p>
<p>(let ((x (list &quot;a&quot; ’\a (gensym) ’((a (b (c))) d e f g)))</p>
<p>(*print-escape* nil)</p>
<p>(*print-gensym* nil)</p>
<p>(*print-level* 3)</p>
<p>(*print-length* 3))</p>
<p>(write x)</p>
<p>(let ((*print-readably* t))</p>
<p>(terpri)</p>
<p>(write x)</p>
<p>:done<!-- -->))</p>
<p>▷ (a a G4581 ((A #) D E ...))</p>
<p>▷ (&quot;a&quot; |a| #<!-- -->:G4581<!-- --> ((A (B (C))) D E F G))</p>
<p>→ <!-- -->:DONE</p>
<p>;; This is setup code is shared between the examples</p>
<p>;; of three hypothetical implementations which follow.</p>
<p>(setq table (make-hash-table)) → #&lt;HASH-TABLE EQL 0/120 32005763&gt;</p>
<p>(setf (gethash table 1) ’one) → ONE</p>
<p>(setf (gethash table 2) ’two) → TWO</p>
<p>;; Implementation A</p>
<p>(let ((*print-readably* t)) (print table))</p>
<p>Error: Can’t print #&lt;HASH-TABLE EQL 0/120 32005763&gt; readably.</p>
<p>;; Implementation B</p>
<p>;; No standardized #S notation for hash tables is defined,</p>
<p>;; but there might be an implementation-defined notation.</p>
<p>(let ((*print-readably* t)) (print table))</p>
<p>▷ #S(HASH-TABLE <!-- -->:TEST<!-- --> EQL <!-- -->:SIZE<!-- --> 120 <!-- -->:CONTENTS<!-- --> (1 ONE 2 TWO))</p>
<p>→ #&lt;HASH-TABLE EQL 0/120 32005763&gt;</p>
<p>;; Implementation C</p>
<p>;; Note that #. notation can only be used if *READ-EVAL* is true.</p>
<p>;; If *READ-EVAL* were false, this same implementation might have to</p>
<p>;; signal an error unless it had yet another printing strategy to fall</p>
<p>;; back on.</p>
<p>(let ((*print-readably* t)) (print table))</p>
<p>▷ #.(LET ((HASH-TABLE (MAKE-HASH-TABLE)))</p>
<p>▷ (SETF (GETHASH 1 HASH-TABLE) ONE)</p>
<p>▷ (SETF (GETHASH 2 HASH-TABLE) TWO)</p>
<p>▷ HASH-TABLE)</p>
<p>→ #&lt;HASH-TABLE EQL 0/120 32005763&gt;</p>
<p><strong>See Also:</strong></p>
<p><strong>write</strong>, <strong>print-unreadable-object</strong></p>
<p><strong>Notes:</strong></p>
<p>The rules for “<em>similarity</em>” imply that #A or #( syntax cannot be used for <em>arrays</em> of <em>element type</em> other than <strong>t</strong>. An implementation will have to use another syntax or signal an error of <em>type</em> <strong>print-not-readable</strong>.</p>
<p><em>∗</em><strong>print-right-margin</strong><em>∗ Variable</em></p>
<p><strong>Value Type:</strong></p>
<p>a non-negative <em>integer</em> , or <strong>nil</strong>.</p>
<p><strong>Initial Value:</strong></p>
<p><strong>nil</strong>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/lisp-docs/cl-language-reference/tree/develop/docs/chap-22/cc-d-formatted-output.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/cl-language-reference/docs/chap-22/cc-c-the-lisp-pretty-printer"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">22.2 The Lisp Pretty Printer</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cl-language-reference/docs/chap-22/intro"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">intro</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#2231-format-basic-output" class="table-of-contents__link toc-highlight">22.3.1 FORMAT Basic Output</a><ul><li><a href="#22311-tilde-c" class="table-of-contents__link toc-highlight">22.3.1.1 Tilde C</a></li><li><a href="#22312-tilde-percent" class="table-of-contents__link toc-highlight">22.3.1.2 Tilde Percent</a></li><li><a href="#22313-tilde-ampersand" class="table-of-contents__link toc-highlight">22.3.1.3 Tilde Ampersand</a></li><li><a href="#22314-tilde-vertical" class="table-of-contents__link toc-highlight">22.3.1.4 Tilde Vertical</a></li><li><a href="#22315-tilde-tilde" class="table-of-contents__link toc-highlight">22.3.1.5 Tilde Tilde</a></li></ul></li><li><a href="#2232-format-radix-control" class="table-of-contents__link toc-highlight">22.3.2 FORMAT Radix Control</a><ul><li><a href="#22321-tilde-r" class="table-of-contents__link toc-highlight">22.3.2.1 Tilde R</a></li><li><a href="#22322-tilde-d" class="table-of-contents__link toc-highlight">22.3.2.2 Tilde D</a></li><li><a href="#22323-tilde-b" class="table-of-contents__link toc-highlight">22.3.2.3 Tilde B</a></li><li><a href="#22324-tilde-o" class="table-of-contents__link toc-highlight">22.3.2.4 Tilde O</a></li><li><a href="#22325-tilde-x" class="table-of-contents__link toc-highlight">22.3.2.5 Tilde X</a></li></ul></li><li><a href="#2233-format-floating" class="table-of-contents__link toc-highlight">22.3.3 FORMAT Floating</a><ul><li><a href="#22331-tilde-f" class="table-of-contents__link toc-highlight">22.3.3.1 Tilde F</a></li><li><a href="#22332-tilde-e" class="table-of-contents__link toc-highlight">22.3.3.2 Tilde E</a></li><li><a href="#22333-tilde-g" class="table-of-contents__link toc-highlight">22.3.3.3 Tilde G</a></li><li><a href="#22334-tilde-dollarsign" class="table-of-contents__link toc-highlight">22.3.3.4 Tilde Dollarsign</a></li></ul></li><li><a href="#2234-format-printer-operations" class="table-of-contents__link toc-highlight">22.3.4 FORMAT Printer Operations</a><ul><li><a href="#22341-tilde-a" class="table-of-contents__link toc-highlight">22.3.4.1 Tilde A</a></li><li><a href="#22342-tilde-s" class="table-of-contents__link toc-highlight">22.3.4.2 Tilde S</a></li><li><a href="#22343-tilde-w" class="table-of-contents__link toc-highlight">22.3.4.3 Tilde W</a></li></ul></li><li><a href="#2235-format-pretty-printer-operations" class="table-of-contents__link toc-highlight">22.3.5 FORMAT Pretty Printer Operations</a><ul><li><a href="#22351-tilde-underscore" class="table-of-contents__link toc-highlight">22.3.5.1 Tilde Underscore</a></li><li><a href="#22352-tilde-less" class="table-of-contents__link toc-highlight">22.3.5.2 Tilde Less</a></li><li><a href="#22353-tilde-i" class="table-of-contents__link toc-highlight">22.3.5.3 Tilde I</a></li><li><a href="#22354-tilde-slash" class="table-of-contents__link toc-highlight">22.3.5.4 Tilde Slash</a></li></ul></li><li><a href="#2236-format-layout-control" class="table-of-contents__link toc-highlight">22.3.6 FORMAT Layout Control</a><ul><li><a href="#22361-tilde-t" class="table-of-contents__link toc-highlight">22.3.6.1 Tilde T</a></li><li><a href="#22362-tilde-less" class="table-of-contents__link toc-highlight">22.3.6.2 Tilde Less</a></li><li><a href="#22363-tilde-greater" class="table-of-contents__link toc-highlight">22.3.6.3 Tilde Greater</a></li></ul></li><li><a href="#2237-format-control" class="table-of-contents__link toc-highlight">22.3.7 FORMAT Control</a><ul><li><a href="#22371-tilde-asterisk" class="table-of-contents__link toc-highlight">22.3.7.1 Tilde Asterisk</a></li><li><a href="#22372-tilde-left" class="table-of-contents__link toc-highlight">22.3.7.2 Tilde Left</a></li><li><a href="#22373-tilde-right" class="table-of-contents__link toc-highlight">22.3.7.3 Tilde Right</a></li><li><a href="#22374-tilde-left" class="table-of-contents__link toc-highlight">22.3.7.4 Tilde Left</a></li><li><a href="#22375-tilde-right" class="table-of-contents__link toc-highlight">22.3.7.5 Tilde Right</a></li><li><a href="#22376-tilde-question" class="table-of-contents__link toc-highlight">22.3.7.6 Tilde Question</a></li></ul></li><li><a href="#2238-format-miscellaneous-operations" class="table-of-contents__link toc-highlight">22.3.8 FORMAT Miscellaneous Operations</a><ul><li><a href="#22381-tilde-left" class="table-of-contents__link toc-highlight">22.3.8.1 Tilde Left</a></li><li><a href="#22382-tilde-right" class="table-of-contents__link toc-highlight">22.3.8.2 Tilde Right</a></li><li><a href="#22383-tilde-p" class="table-of-contents__link toc-highlight">22.3.8.3 Tilde P</a></li></ul></li><li><a href="#2239-format-miscellaneous-pseudo" class="table-of-contents__link toc-highlight">22.3.9 FORMAT Miscellaneous Pseudo</a><ul><li><a href="#22391-tilde-semicolon" class="table-of-contents__link toc-highlight">22.3.9.1 Tilde Semicolon</a></li><li><a href="#22392-tilde-circumflex" class="table-of-contents__link toc-highlight">22.3.9.2 Tilde Circumflex</a></li><li><a href="#22393-tilde-newline" class="table-of-contents__link toc-highlight">22.3.9.3 Tilde Newline</a></li></ul></li><li><a href="#22310-additional-information-about-format-operations" class="table-of-contents__link toc-highlight">22.3.10 Additional Information about FORMAT Operations</a><ul><li><a href="#223101-nesting-of-format-operations" class="table-of-contents__link toc-highlight">22.3.10.1 Nesting of FORMAT Operations</a></li><li><a href="#223102-missing-and-additional-format-arguments" class="table-of-contents__link toc-highlight">22.3.10.2 Missing and Additional FORMAT Arguments</a></li><li><a href="#223103-additional-format-parameters" class="table-of-contents__link toc-highlight">22.3.10.3 Additional FORMAT Parameters</a></li><li><a href="#223104-undefined-format-modifier-combinations" class="table-of-contents__link toc-highlight">22.3.10.4 Undefined FORMAT Modifier Combinations</a></li></ul></li><li><a href="#22311-examples-of-format" class="table-of-contents__link toc-highlight">22.3.11 Examples of FORMAT</a></li><li><a href="#22312-notes-about-format" class="table-of-contents__link toc-highlight">22.3.12 Notes about FORMAT</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cl-language-reference/docs/intro">Cl Technical Reference</a></li><li class="footer__item"><a href="https://lisp-docs.github.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">CL Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/common-lisp" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/hhk46CE" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.reddit.com/r/common_lisp" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://irclog.tymoon.eu/libera/commonlisp" target="_blank" rel="noopener noreferrer" class="footer__link-item">IRC<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cl-language-reference/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/lisp-docs/cl-language-reference/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 LISP Docs, MIT License. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>