"use strict";(self.webpackChunkcl_language_reference=self.webpackChunkcl_language_reference||[]).push([[13224],{75513:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>d,toc:()=>p});var s=t(85893),r=t(11151);function i(e){const n={code:"code",em:"em",p:"p",pre:"pre",strong:"strong",...(0,r.a)(),...e.components},{ClLinks:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ClLinks",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"get-setf-expansion"})," ",(0,s.jsx)(t,{styled:!0,term:"function",children:(0,s.jsx)("i",{children:"Function"})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Syntax:"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(t,{styled:!0,term:"get-setf-expansion",children:(0,s.jsx)("b",{children:"get-setf-expansion"})})," ",(0,s.jsx)(t,{styled:!0,term:"place",children:(0,s.jsx)("i",{children:"place"})})," &optional ",(0,s.jsx)(t,{styled:!0,term:"environment",children:(0,s.jsx)("i",{children:"environment"})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"! vars, vals, store-vars, writer-form, reader-form"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments and Values:"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(t,{styled:!0,term:"place",children:(0,s.jsx)("i",{children:"place"})}),"\u2014a ",(0,s.jsx)(t,{styled:!0,term:"place",children:(0,s.jsx)("i",{children:"place"})}),"."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(t,{styled:!0,term:"environment",children:(0,s.jsx)("i",{children:"environment"})}),"\u2014an ",(0,s.jsx)(n.em,{children:"environment object"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"vars, vals, store-vars, writer-form, reader-form"}),"\u2014a ",(0,s.jsx)(n.em,{children:"setf expansion"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),"\n",(0,s.jsxs)(n.p,{children:["Determines five values constituting the ",(0,s.jsx)(n.em,{children:"setf expansion"})," for ",(0,s.jsx)(t,{styled:!0,term:"place",children:(0,s.jsx)("i",{children:"place"})})," in ",(0,s.jsx)(t,{styled:!0,term:"environment",children:(0,s.jsx)("i",{children:"environment"})}),"; see Section 5.1.1.2 (Setf Expansions)."]}),"\n",(0,s.jsxs)(n.p,{children:["If ",(0,s.jsx)(t,{styled:!0,term:"environment",children:(0,s.jsx)("i",{children:"environment"})})," is not supplied or ",(0,s.jsx)(t,{styled:!0,term:"nil",children:(0,s.jsx)("b",{children:"nil"})}),", the environment is the ",(0,s.jsx)(n.em,{children:"null lexical environment"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lisp",children:'\n(get-setf-expansion \u2019x) \n*!* NIL, NIL, (#:G0001), (SETQ X #:G0001), X \n;;; This macro is like POP \n(defmacro xpop (place &environment env) \n  (multiple-value-bind (dummies vals new setter getter) \n      (get-setf-expansion place env) \n    \u2018(let\\* (,@(mapcar #\u2019list dummies vals) (,(car new) ,getter)) \n\t    (if (cdr new) (error "Can\u2019t expand this.")) \n\t    (prog1 (car ,(car new)) \n\t      (setq ,(car new) (cdr ,(car new))) \n\t      ,setter)))) \n(defsetf frob (x) (value) \n  \u2018(setf (car ,x) ,value)) *!* FROB \n;;; The following is an error; an error might be signaled at macro expansion time (flet ((frob (x) (cdr x))) ;Invalid \n(xpop (frob z))) \n\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"See Also:"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(t,{styled:!0,term:"defsetf",children:(0,s.jsx)("b",{children:"defsetf"})}),", ",(0,s.jsx)(t,{styled:!0,term:"define-setf-expander",children:(0,s.jsx)("b",{children:"define-setf-expander"})}),", ",(0,s.jsx)(t,{styled:!0,term:"setf",children:(0,s.jsx)("b",{children:"setf"})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Notes:"})}),"\n",(0,s.jsxs)(n.p,{children:["Any ",(0,s.jsx)(n.em,{children:"compound form"})," is a valid ",(0,s.jsx)(t,{styled:!0,term:"place",children:(0,s.jsx)("i",{children:"place"})}),", since any ",(0,s.jsx)(n.em,{children:"compound form"})," whose ",(0,s.jsx)(n.em,{children:"operator f"})," has no ",(0,s.jsx)(n.em,{children:"setf expander"})," are expanded into a call to (setf ",(0,s.jsx)(n.em,{children:"f"})," )."]})]})}function c(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(i,{...e})}):i(e)}const o={title:"get-setf-expansion"},l="get-setf-expansion",d={id:"chap-5/f-d-dictionary/get-setf-expansion_function",title:"get-setf-expansion",description:"Expanded Reference: get-setf-expansion",source:"@site/docs/chap-5/f-d-dictionary/get-setf-expansion_function.md",sourceDirName:"chap-5/f-d-dictionary",slug:"/chap-5/f-d-dictionary/get-setf-expansion_function",permalink:"/cl-language-reference/docs/chap-5/f-d-dictionary/get-setf-expansion_function",draft:!1,unlisted:!1,editUrl:"https://github.com/lisp-docs/cl-language-reference/tree/develop/docs/chap-5/f-d-dictionary/get-setf-expansion_function.md",tags:[],version:"current",frontMatter:{title:"get-setf-expansion"},sidebar:"tutorialSidebar",previous:{title:"functionp",permalink:"/cl-language-reference/docs/chap-5/f-d-dictionary/functionp_function"},next:{title:"go",permalink:"/cl-language-reference/docs/chap-5/f-d-dictionary/go_special-operator"}},a={},p=[{value:"Expanded Reference: get-setf-expansion",id:"expanded-reference-get-setf-expansion",level:2}];function x(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"get-setf-expansion",children:"get-setf-expansion"}),"\n","\n","\n",(0,s.jsx)(c,{}),"\n",(0,s.jsx)(n.h2,{id:"expanded-reference-get-setf-expansion",children:"Expanded Reference: get-setf-expansion"}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"TODO: Please contribute to this page by adding explanations and examples"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lisp",children:"(get-setf-expansion )\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(x,{...e})}):x(e)}},11151:(e,n,t)=>{t.d(n,{Z:()=>o,a:()=>c});var s=t(67294);const r={},i=s.createContext(r);function c(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);