"use strict";(globalThis.webpackChunkcl_language_reference=globalThis.webpackChunkcl_language_reference||[]).push([[6668],{28453:(e,r,n)=>{n.d(r,{R:()=>c,x:()=>o});var t=n(96540);const i={},s=t.createContext(i);function c(e){const r=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),t.createElement(s.Provider,{value:r},e.children)}},87271:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>f,contentTitle:()=>p,default:()=>v,frontMatter:()=>u,metadata:()=>t,toc:()=>b});const t=JSON.parse('{"id":"chap-3/d-h-destructive-operations","title":"3.7 Destructive Operations","description":"3.7.1 Modification of Literal Objects","source":"@site/docs/chap-3/d-h-destructive-operations.md","sourceDirName":"chap-3","slug":"/chap-3/d-h-destructive-operations","permalink":"/cl-language-reference/chap-3/d-h-destructive-operations","draft":false,"unlisted":false,"editUrl":"https://github.com/lisp-docs/cl-language-reference/tree/main/docs/chap-3/d-h-destructive-operations.md","tags":[],"version":"current","lastUpdatedBy":"Daniel Nussenbaum","frontMatter":{"title":"3.7 Destructive Operations"},"sidebar":"tutorialSidebar","previous":{"title":"3.6 Traversal Rules and Side Effects","permalink":"/cl-language-reference/chap-3/d-g-traversal-rules-and-side-effects"},"next":{"title":"3.8 Evaluation and Compilation Dictionary","permalink":"/cl-language-reference/category/38-evaluation-and-compilation-dictionary"}}');var i=n(74848),s=n(28453);function c(e){return(0,i.jsx)(i.Fragment,{})}function o(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(c,{...e})}):c()}function a(e){const r={em:"em",p:"p",...(0,s.R)(),...e.components},{DictionaryLink:n,GlossaryTerm:t}=r;return n||l("DictionaryLink",!0),t||l("GlossaryTerm",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.p,{children:["The consequences are undefined if ",(0,i.jsx)(r.em,{children:"literal objects"})," are destructively modified. For this purpose, the following operations are considered ",(0,i.jsx)(t,{term:"destructive",children:(0,i.jsx)("i",{children:"destructive"})}),":"]}),"\n",(0,i.jsx)(n,{term:"random-state",children:(0,i.jsx)("b",{children:"random-state"})}),"\n",(0,i.jsxs)(r.p,{children:["Using it as an ",(0,i.jsx)(t,{term:"argument",children:(0,i.jsx)("i",{children:"argument"})})," to the ",(0,i.jsx)(t,{term:"function",children:(0,i.jsx)("i",{children:"function"})})," ",(0,i.jsx)(n,{term:"random",children:(0,i.jsx)("b",{children:"random"})}),"."]}),"\n",(0,i.jsx)(n,{term:"cons",children:(0,i.jsx)("b",{children:"cons"})}),"\n",(0,i.jsxs)(r.p,{children:["Changing the ",(0,i.jsx)(t,{term:"car",children:(0,i.jsx)("i",{children:"car"})})," ",(0,i.jsx)("sub",{children:"1"})," or ",(0,i.jsx)(t,{term:"cdr",children:(0,i.jsx)("i",{children:"cdr"})})," ",(0,i.jsx)("sub",{children:"1"})," of the ",(0,i.jsx)(t,{term:"cons",children:(0,i.jsx)("i",{children:"cons"})}),", or performing a ",(0,i.jsx)(t,{term:"destructive",children:(0,i.jsx)("i",{children:"destructive"})})," operation on an ",(0,i.jsx)(t,{term:"object",children:(0,i.jsx)("i",{children:"object"})})," which is either the ",(0,i.jsx)(t,{term:"car",children:(0,i.jsx)("i",{children:"car"})})," ",(0,i.jsx)("sub",{children:"2"})," or the ",(0,i.jsx)(t,{term:"cdr",children:(0,i.jsx)("i",{children:"cdr"})})," ",(0,i.jsx)("sub",{children:"2"})," of the ",(0,i.jsx)(t,{term:"cons",children:(0,i.jsx)("i",{children:"cons"})}),"."]}),"\n",(0,i.jsx)(n,{term:"array",children:(0,i.jsx)("b",{children:"array"})}),"\n",(0,i.jsxs)(r.p,{children:["Storing a new value into some element of the ",(0,i.jsx)(t,{term:"array",children:(0,i.jsx)("i",{children:"array"})}),", or performing a ",(0,i.jsx)(t,{term:"destructive",children:(0,i.jsx)("i",{children:"destructive"})})," operation on an ",(0,i.jsx)(t,{term:"object",children:(0,i.jsx)("i",{children:"object"})})," that is already such an ",(0,i.jsx)(t,{term:"element",children:(0,i.jsx)("i",{children:"element"})}),"."]}),"\n",(0,i.jsxs)(r.p,{children:["Changing the ",(0,i.jsx)(t,{styled:!0,term:"fill pointer",children:(0,i.jsx)("i",{children:"fill pointer"})})," , ",(0,i.jsx)(t,{term:"dimension",children:(0,i.jsx)("i",{children:"dimensions"})}),", or displacement of the ",(0,i.jsx)(t,{term:"array",children:(0,i.jsx)("i",{children:"array"})})," (regardless of whether the ",(0,i.jsx)(t,{term:"array",children:(0,i.jsx)("i",{children:"array"})})," is ",(0,i.jsx)(t,{styled:!0,term:"actually adjustable",children:(0,i.jsx)("i",{children:"actually adjustable"})}),")."]}),"\n",(0,i.jsxs)(r.p,{children:["Performing a ",(0,i.jsx)(t,{term:"destructive",children:(0,i.jsx)("i",{children:"destructive"})})," operation on another ",(0,i.jsx)(t,{term:"array",children:(0,i.jsx)("i",{children:"array"})})," that is displaced to the ",(0,i.jsx)(t,{term:"array",children:(0,i.jsx)("i",{children:"array"})})," or that otherwise shares its contents with the ",(0,i.jsx)(t,{term:"array",children:(0,i.jsx)("i",{children:"array"})}),"."]}),"\n",(0,i.jsx)(n,{term:"hash-table",children:(0,i.jsx)("b",{children:"hash-table"})}),"\n",(0,i.jsxs)(r.p,{children:["Performing a ",(0,i.jsx)(t,{term:"destructive",children:(0,i.jsx)("i",{children:"destructive"})})," operation on any ",(0,i.jsx)(t,{term:"key",children:(0,i.jsx)("i",{children:"key"})}),"."]}),"\n",(0,i.jsxs)(r.p,{children:["Storing a new ",(0,i.jsx)(t,{term:"value",children:(0,i.jsx)("i",{children:"value"})}),(0,i.jsx)("sub",{children:"4"})," for any ",(0,i.jsx)(t,{term:"key",children:(0,i.jsx)("i",{children:"key"})}),", or performing a ",(0,i.jsx)(t,{term:"destructive",children:(0,i.jsx)("i",{children:"destructive"})})," operation on any ",(0,i.jsx)(t,{term:"object",children:(0,i.jsx)("i",{children:"object"})})," that is such a ",(0,i.jsx)(t,{term:"value",children:(0,i.jsx)("i",{children:"value"})}),"."]}),"\n",(0,i.jsxs)(r.p,{children:["Adding or removing entries from the ",(0,i.jsx)(t,{styled:!0,term:"hash table",children:(0,i.jsx)("i",{children:"hash table"})}),"."]}),"\n",(0,i.jsx)(n,{term:"structure-object",children:(0,i.jsx)("b",{children:"structure-object"})}),"\n",(0,i.jsxs)(r.p,{children:["Storing a new value into any slot, or performing a ",(0,i.jsx)(t,{term:"destructive",children:(0,i.jsx)("i",{children:"destructive"})})," operation on an ",(0,i.jsx)(t,{term:"object",children:(0,i.jsx)("i",{children:"object"})})," that is the value of some slot."]}),"\n",(0,i.jsx)(n,{term:"standard-object",children:(0,i.jsx)("b",{children:"standard-object"})}),"\n",(0,i.jsxs)(r.p,{children:["Storing a new value into any slot, or performing a ",(0,i.jsx)(t,{term:"destructive",children:(0,i.jsx)("i",{children:"destructive"})})," operation on an ",(0,i.jsx)(t,{term:"object",children:(0,i.jsx)("i",{children:"object"})})," that is the value of some slot."]}),"\n",(0,i.jsxs)(r.p,{children:["Changing the class of the ",(0,i.jsx)(t,{term:"object",children:(0,i.jsx)("i",{children:"object"})})," (",(0,i.jsx)(r.em,{children:"e.g."}),", using the ",(0,i.jsx)(t,{term:"function",children:(0,i.jsx)("i",{children:"function"})})," ",(0,i.jsx)(n,{term:"change-class",children:(0,i.jsx)("b",{children:"change-class"})}),")."]}),"\n",(0,i.jsx)(n,{term:"readtable",children:(0,i.jsx)("b",{children:"readtable"})}),"\n",(0,i.jsxs)(r.p,{children:["Altering the ",(0,i.jsx)(t,{styled:!0,term:"readtable case",children:(0,i.jsx)("i",{children:"readtable case"})}),"."]}),"\n",(0,i.jsx)(r.p,{children:"Altering the syntax type of any character in this readtable."}),"\n",(0,i.jsxs)(r.p,{children:["Altering the ",(0,i.jsx)(t,{styled:!0,term:"reader macro function",children:(0,i.jsx)("i",{children:"reader macro function"})})," associated with any ",(0,i.jsx)(t,{term:"character",children:(0,i.jsx)("i",{children:"character"})})," in the ",(0,i.jsx)(t,{term:"readtable",children:(0,i.jsx)("i",{children:"readtable"})}),", or altering the ",(0,i.jsx)(t,{styled:!0,term:"reader macro function",children:(0,i.jsx)("i",{children:"reader macro functions"})})," associated with ",(0,i.jsx)(t,{term:"character",children:(0,i.jsx)("i",{children:"characters"})})," defined as ",(0,i.jsx)(t,{styled:!0,term:"dispatching macro character",children:(0,i.jsx)("i",{children:"dispatching macro characters"})})," in the ",(0,i.jsx)(t,{term:"readtable",children:(0,i.jsx)("i",{children:"readtable"})}),"."]}),"\n",(0,i.jsx)(n,{term:"stream",children:(0,i.jsx)("b",{children:"stream"})}),"\n",(0,i.jsxs)(r.p,{children:["Performing I/O operations on the ",(0,i.jsx)(t,{term:"stream",children:(0,i.jsx)("i",{children:"stream"})}),", or ",(0,i.jsx)(r.em,{children:"closing"})," the ",(0,i.jsx)(t,{term:"stream",children:(0,i.jsx)("i",{children:"stream"})}),"."]}),"\n",(0,i.jsx)(r.p,{children:"All other standardized types"}),"\n",(0,i.jsxs)(r.p,{children:["[This category includes, for example, ",(0,i.jsx)(n,{term:"character",children:(0,i.jsx)("b",{children:"character"})}),", ",(0,i.jsx)(n,{term:"condition",children:(0,i.jsx)("b",{children:"condition"})}),", ",(0,i.jsx)(n,{term:"function",children:(0,i.jsx)("b",{children:"function"})}),", ",(0,i.jsx)(n,{term:"method-combination",children:(0,i.jsx)("b",{children:"method-combination"})}),", ",(0,i.jsx)(n,{term:"method",children:(0,i.jsx)("b",{children:"method"})}),", ",(0,i.jsx)(n,{term:"number",children:(0,i.jsx)("b",{children:"number"})}),", ",(0,i.jsx)(n,{term:"package",children:(0,i.jsx)("b",{children:"package"})}),", ",(0,i.jsx)(n,{term:"pathname",children:(0,i.jsx)("b",{children:"pathname"})}),", ",(0,i.jsx)(n,{term:"restart",children:(0,i.jsx)("b",{children:"restart"})}),", and ",(0,i.jsx)(n,{term:"symbol",children:(0,i.jsx)("b",{children:"symbol"})}),".] There are no ",(0,i.jsx)(r.em,{children:"standardized destructive"})," operations defined on ",(0,i.jsx)(t,{term:"object",children:(0,i.jsx)("i",{children:"objects"})})," of these ",(0,i.jsx)(t,{term:"type",children:(0,i.jsx)("i",{children:"types"})}),"."]})]})}function d(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}function l(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}function h(e){const r={em:"em",p:"p",...(0,s.R)(),...e.components},{GlossaryTerm:n}=r;return n||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("GlossaryTerm",!0),(0,i.jsxs)(r.p,{children:["Should a transfer of control out of a ",(0,i.jsx)(n,{term:"destructive",children:(0,i.jsx)("i",{children:"destructive"})})," operation occur (",(0,i.jsx)(r.em,{children:"e.g."}),", due to an error) the state of the ",(0,i.jsx)(n,{term:"object",children:(0,i.jsx)("i",{children:"object"})})," being modified is ",(0,i.jsx)(n,{term:"implementation-dependent",children:(0,i.jsx)("i",{children:"implementation-dependent"})}),"."]})}function j(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}function x(e){const r={code:"code",p:"p",pre:"pre",...(0,s.R)(),...e.components},{GlossaryTerm:n}=r;return n||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("GlossaryTerm",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.p,{children:["The following examples illustrate some of the many ways in which the ",(0,i.jsx)(n,{term:"implementation-dependent",children:(0,i.jsx)("i",{children:"implementation-dependent"})})," nature of the modification can manifest itself."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-lisp",children:"(let ((a (list 2 1 4 3 7 6 'five)))\n  (ignore-errors (sort a #'<))\n  a)\n;; \u2192 (1 2 3 4 6 7 FIVE)\n;; or\u2192 (2 1 4 3 7 6 FIVE)\n;; or\u2192 (2)\n"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-lisp",children:"(prog foo ((a (list 1 2 3 4 5 6 7 8 9 10)))\n  (sort a #'(lambda (x y) (if (zerop (random 5)) (return-from foo a) (> x y)))))\n;; \u2192 (1 2 3 4 5 6 7 8 9 10)\n;; or\u2192 (3 4 5 6 2 7 8 9 10 1)\n;; or\u2192 (1 2 4 3)\n"})})]})}function m(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(x,{...e})}):x(e)}const u={title:"3.7 Destructive Operations"},p="3.7 Destructive Operations",f={},b=[{value:"3.7.1 Modification of Literal Objects",id:"371-modification-of-literal-objects",level:2},{value:"3.7.2 Transfer of Control during a Destructive Operation",id:"372-transfer-of-control-during-a-destructive-operation",level:2},{value:"3.7.2.1 Examples of Transfer of Control during a Destructive Operation",id:"3721-examples-of-transfer-of-control-during-a-destructive-operation",level:3}];function g(e){const r={h1:"h1",h2:"h2",h3:"h3",header:"header",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"37-destructive-operations",children:"3.7 Destructive Operations"})}),"\n","\n",(0,i.jsx)(o,{}),"\n",(0,i.jsx)(r.h2,{id:"371-modification-of-literal-objects",children:"3.7.1 Modification of Literal Objects"}),"\n","\n",(0,i.jsx)(d,{}),"\n",(0,i.jsx)(r.h2,{id:"372-transfer-of-control-during-a-destructive-operation",children:"3.7.2 Transfer of Control during a Destructive Operation"}),"\n","\n",(0,i.jsx)(j,{}),"\n",(0,i.jsx)(r.h3,{id:"3721-examples-of-transfer-of-control-during-a-destructive-operation",children:"3.7.2.1 Examples of Transfer of Control during a Destructive Operation"}),"\n","\n",(0,i.jsx)(m,{})]})}function v(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(g,{...e})}):g(e)}}}]);