"use strict";(globalThis.webpackChunkcl_language_reference=globalThis.webpackChunkcl_language_reference||[]).push([[82585],{222:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>o,contentTitle:()=>a,default:()=>m,frontMatter:()=>h,metadata:()=>n,toc:()=>x});const n=JSON.parse('{"id":"chap-21/cb-c-dictionary/with-output-to-string_macro","title":"with-output-to-string","description":"Expanded Reference: with-output-to-string","source":"@site/docs/chap-21/cb-c-dictionary/with-output-to-string_macro.md","sourceDirName":"chap-21/cb-c-dictionary","slug":"/chap-21/cb-c-dictionary/with-output-to-string_macro","permalink":"/cl-language-reference/chap-21/cb-c-dictionary/with-output-to-string_macro","draft":false,"unlisted":false,"editUrl":"https://github.com/lisp-docs/cl-language-reference/tree/main/docs/chap-21/cb-c-dictionary/with-output-to-string_macro.md","tags":[],"version":"current","lastUpdatedBy":"Daniel Nussenbaum","frontMatter":{"title":"with-output-to-string"},"sidebar":"tutorialSidebar","previous":{"title":"with-open-stream","permalink":"/cl-language-reference/chap-21/cb-c-dictionary/with-open-stream_macro"},"next":{"title":"write-byte","permalink":"/cl-language-reference/chap-21/cb-c-dictionary/write-byte_function"}}');var i=t(74848),s=t(28453);function d(e){const r={code:"code",em:"em",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components},{DictionaryLink:t,GlossaryTerm:n}=r;return t||c("DictionaryLink",!0),n||c("GlossaryTerm",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"with-output-to-string"})," ",(0,i.jsx)(n,{term:"macro",children:(0,i.jsx)("i",{children:"Macro"})})]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Syntax:"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(t,{term:"with-output-to-string",children:(0,i.jsx)("b",{children:"with-output-to-string"})})," (",(0,i.jsx)(r.em,{children:"var"})," &optional ",(0,i.jsx)(r.em,{children:"string-form"})," &key ",(0,i.jsx)(r.em,{children:"element-type"}),") ",(0,i.jsx)(n,{term:"declaration",children:(0,i.jsx)("i",{children:"{declaration}"})}),"* ",(0,i.jsx)(n,{term:"form",children:(0,i.jsx)("i",{children:"{form}"})}),"* \u2192 {result}*"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Arguments and Values:"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.em,{children:"var"}),"\u2014a ",(0,i.jsx)(r.em,{children:"variable name"}),"."]}),"\n",(0,i.jsx)(t,{term:"with-output-to-string",children:(0,i.jsx)("b",{children:"with-output-to-string"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.em,{children:"string-form"}),"\u2014a ",(0,i.jsx)(n,{term:"form",children:(0,i.jsx)("i",{children:"form"})})," or ",(0,i.jsx)(t,{term:"nil",children:(0,i.jsx)("b",{children:"nil"})}),"; if ",(0,i.jsx)(n,{term:"non-nil",children:(0,i.jsx)("i",{children:"non-nil"})}),", evaluated to produce ",(0,i.jsx)(n,{term:"string",children:(0,i.jsx)("i",{children:"string"})}),"."]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(n,{term:"string",children:(0,i.jsx)("i",{children:"string"})}),"\u2014a ",(0,i.jsx)(n,{term:"string",children:(0,i.jsx)("i",{children:"string"})})," that has a ",(0,i.jsx)(n,{styled:!0,term:"fill pointer",children:(0,i.jsx)("i",{children:"fill pointer"})})," ."]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.em,{children:"element-type"}),"\u2014a ",(0,i.jsx)(n,{styled:!0,term:"type specifier",children:(0,i.jsx)("i",{children:"type specifier"})})," ; evaluated. The default is ",(0,i.jsx)(t,{term:"character",children:(0,i.jsx)("b",{children:"character"})}),"."]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(n,{term:"declaration",children:(0,i.jsx)("i",{children:"declaration"})}),"\u2014a ",(0,i.jsx)(t,{term:"declare",children:(0,i.jsx)("b",{children:"declare"})})," ",(0,i.jsx)(n,{term:"expression",children:(0,i.jsx)("i",{children:"expression"})}),"; not evaluated."]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(n,{term:"form",children:(0,i.jsx)("i",{children:"forms"})}),"\u2014an ",(0,i.jsx)(n,{styled:!0,term:"implicit progn",children:(0,i.jsx)("i",{children:"implicit progn"})}),"."]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.em,{children:"results"}),"\u2014If a ",(0,i.jsx)(r.em,{children:"string-form"})," is not supplied or ",(0,i.jsx)(t,{term:"nil",children:(0,i.jsx)("b",{children:"nil"})}),", a ",(0,i.jsx)(n,{term:"string",children:(0,i.jsx)("i",{children:"string"})}),"; otherwise, the ",(0,i.jsx)(n,{term:"value",children:(0,i.jsx)("i",{children:"values"})})," returned by the ",(0,i.jsx)(n,{term:"form",children:(0,i.jsx)("i",{children:"forms"})}),"."]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Description:"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(t,{term:"with-output-to-string",children:(0,i.jsx)("b",{children:"with-output-to-string"})})," creates a character ",(0,i.jsx)(r.em,{children:"output stream"}),", performs a series of operations that may send results to this ",(0,i.jsx)(n,{term:"stream",children:(0,i.jsx)("i",{children:"stream"})}),", and then closes the ",(0,i.jsx)(n,{term:"stream",children:(0,i.jsx)("i",{children:"stream"})}),"."]}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(r.em,{children:"element-type"})," names the ",(0,i.jsx)(n,{term:"type",children:(0,i.jsx)("i",{children:"type"})})," of the elements of the ",(0,i.jsx)(n,{term:"stream",children:(0,i.jsx)("i",{children:"stream"})}),"; a ",(0,i.jsx)(n,{term:"stream",children:(0,i.jsx)("i",{children:"stream"})})," is constructed of the most specialized ",(0,i.jsx)(n,{term:"type",children:(0,i.jsx)("i",{children:"type"})})," that can accommodate elements of the given ",(0,i.jsx)(n,{term:"type",children:(0,i.jsx)("i",{children:"type"})}),"."]}),"\n",(0,i.jsxs)(r.p,{children:["The body is executed as an ",(0,i.jsx)(n,{styled:!0,term:"implicit progn",children:(0,i.jsx)("i",{children:"implicit progn"})})," with ",(0,i.jsx)(r.em,{children:"var"})," bound to an ",(0,i.jsx)(r.em,{children:"output string stream"}),". All output to that ",(0,i.jsx)(n,{styled:!0,term:"string stream",children:(0,i.jsx)("i",{children:"string stream"})})," is saved in a ",(0,i.jsx)(n,{term:"string",children:(0,i.jsx)("i",{children:"string"})}),"."]}),"\n",(0,i.jsxs)(r.p,{children:["If ",(0,i.jsx)(n,{term:"string",children:(0,i.jsx)("i",{children:"string"})})," is supplied, ",(0,i.jsx)(r.em,{children:"element-type"})," is ignored, and the output is incrementally appended to ",(0,i.jsx)(n,{term:"string",children:(0,i.jsx)("i",{children:"string"})})," as if by use of ",(0,i.jsx)(t,{term:"vector-push-extend",children:(0,i.jsx)("b",{children:"vector-push-extend"})}),"."]}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(r.em,{children:"output stream"})," is automatically closed on exit from ",(0,i.jsx)(r.strong,{children:"with-output-from-string"}),", no matter whether the exit is normal or abnormal. The ",(0,i.jsx)(r.em,{children:"output string stream"})," to which the ",(0,i.jsx)(r.em,{children:"variable var"})," is ",(0,i.jsx)(n,{term:"bound",children:(0,i.jsx)("i",{children:"bound"})})," has ",(0,i.jsx)(n,{styled:!0,term:"dynamic extent",children:(0,i.jsx)("i",{children:"dynamic extent"})}),"; its ",(0,i.jsx)(n,{term:"extent",children:(0,i.jsx)("i",{children:"extent"})})," ends when the ",(0,i.jsx)(n,{term:"form",children:(0,i.jsx)("i",{children:"form"})})," is exited."]}),"\n",(0,i.jsxs)(r.p,{children:["If no ",(0,i.jsx)(n,{term:"string",children:(0,i.jsx)("i",{children:"string"})})," is provided, then ",(0,i.jsx)(r.strong,{children:"with-output-from-string"})," produces a ",(0,i.jsx)(n,{term:"stream",children:(0,i.jsx)("i",{children:"stream"})})," that accepts characters and returns a ",(0,i.jsx)(n,{term:"string",children:(0,i.jsx)("i",{children:"string"})})," of the indicated ",(0,i.jsx)(r.em,{children:"element-type"}),". If ",(0,i.jsx)(n,{term:"string",children:(0,i.jsx)("i",{children:"string"})})," is provided, ",(0,i.jsx)(t,{term:"with-output-to-string",children:(0,i.jsx)("b",{children:"with-output-to-string"})})," returns the results of evaluating the last ",(0,i.jsx)(n,{term:"form",children:(0,i.jsx)("i",{children:"form"})}),"."]}),"\n",(0,i.jsxs)(r.p,{children:["The consequences are undefined if an attempt is made to ",(0,i.jsx)(n,{term:"assign",children:(0,i.jsx)("i",{children:"assign"})})," the ",(0,i.jsx)(r.em,{children:"variable var"}),"."]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Examples:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-lisp",children:' \n(setq fstr (make-array \u2019(0) :element-type \u2019base-char \n:fill-pointer 0 :adjustable t)) \u2192 "" \n(with-output-to-string (s fstr) \n(format s "here\u2019s some output") \n(input-stream-p s)) \u2192 false \nfstr \u2192 "here\u2019s some output" \n'})}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Side Effects:"})}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(n,{term:"string",children:(0,i.jsx)("i",{children:"string"})})," is modified."]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Exceptional Situations:"})}),"\n",(0,i.jsxs)(r.p,{children:["The consequences are undefined if destructive modifications are performed directly on the ",(0,i.jsx)(n,{term:"string",children:(0,i.jsx)("i",{children:"string"})})," during the ",(0,i.jsx)(n,{styled:!0,term:"dynamic extent",children:(0,i.jsx)("i",{children:"dynamic extent"})})," of the call."]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"See Also:"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)("b",{children:"make-string-output-stream"}),", ",(0,i.jsx)("b",{children:"vector-push-extend"}),", Section 3.6 (Traversal Rules and Side Effects) ",(0,i.jsxs)("sup",{children:[(0,i.jsx)("i",{children:"\u2217"}),(0,i.jsx)("b",{children:"debug-io"}),(0,i.jsx)("i",{children:"\u2217"}),(0,i.jsx)("b",{children:","})," ",(0,i.jsx)("i",{children:"\u2217"}),(0,i.jsx)("b",{children:"error-output"}),(0,i.jsx)("i",{children:"\u2217"}),(0,i.jsx)("b",{children:","})," ",(0,i.jsx)("i",{children:"\u2217"}),(0,i.jsx)("b",{children:"query-io"}),(0,i.jsx)("i",{children:"\u2217"}),(0,i.jsx)("b",{children:","})," ",(0,i.jsx)("i",{children:"\u2217"}),(0,i.jsx)("b",{children:"standard"})]})," input",(0,i.jsx)("i",{children:"\u2217"}),(0,i.jsx)("b",{children:","})," ",(0,i.jsx)("i",{children:"\u2217"}),(0,i.jsx)("b",{children:"standard-output"}),(0,i.jsx)("i",{children:"\u2217"}),(0,i.jsx)("b",{children:","})," ",(0,i.jsx)("i",{children:"\u2217"}),(0,i.jsx)("b",{children:"trace-output"}),(0,i.jsx)("i",{children:"\u2217 Variable"})]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Value Type:"})}),"\n",(0,i.jsxs)(r.p,{children:["For ",(0,i.jsx)(r.strong,{children:"*standard-input*"}),": an ",(0,i.jsx)(r.em,{children:"input stream"})]}),"\n",(0,i.jsxs)(r.p,{children:["For ",(0,i.jsx)(r.strong,{children:"*error-output*"}),", ",(0,i.jsx)(r.strong,{children:"*standard-output*"}),", and ",(0,i.jsx)(r.strong,{children:"*trace-output*"}),": an ",(0,i.jsx)(r.em,{children:"output stream"}),"."]}),"\n",(0,i.jsxs)(r.p,{children:["For ",(0,i.jsx)(r.strong,{children:"*debug-io*"}),", ",(0,i.jsx)(r.strong,{children:"*query-io*"}),": a ",(0,i.jsx)(r.em,{children:"bidirectional stream"}),"."]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Initial Value:"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(n,{term:"implementation-dependent",children:(0,i.jsx)("i",{children:"implementation-dependent"})}),", but it must be an ",(0,i.jsx)(r.em,{children:"open stream"})," that is not a ",(0,i.jsx)(n,{styled:!0,term:"generalized synonym stream",children:(0,i.jsx)("i",{children:"generalized synonym stream"})})," to an ",(0,i.jsx)(r.em,{children:"I/O customization variables"})," but that might be a ",(0,i.jsx)(n,{styled:!0,term:"generalized synonym stream",children:(0,i.jsx)("i",{children:"generalized synonym stream"})})," to the value of some ",(0,i.jsx)(r.em,{children:"I/O customization variable"}),". The initial value might also be a ",(0,i.jsx)(n,{styled:!0,term:"generalized synonym stream",children:(0,i.jsx)("i",{children:"generalized synonym stream"})})," to either the ",(0,i.jsx)(n,{term:"symbol",children:(0,i.jsx)("i",{children:"symbol"})})," ",(0,i.jsx)(t,{term:"terminal-io",children:(0,i.jsx)("b",{children:"*terminal-io*"})})," or to the ",(0,i.jsx)(n,{term:"stream",children:(0,i.jsx)("i",{children:"stream"})})," that is its ",(0,i.jsx)(n,{term:"value",children:(0,i.jsx)("i",{children:"value"})}),"."]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Description:"})}),"\n",(0,i.jsxs)(r.p,{children:["These ",(0,i.jsx)(n,{term:"variable",children:(0,i.jsx)("i",{children:"variables"})})," are collectively called the ",(0,i.jsx)(r.em,{children:"standardized I/O customization variables"}),". They can be ",(0,i.jsx)(n,{term:"bound",children:(0,i.jsx)("i",{children:"bound"})})," or ",(0,i.jsx)(r.em,{children:"assigned"})," in order to change the default destinations for input and/or output used by various ",(0,i.jsx)(r.em,{children:"standardized operators"})," and facilities."]}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(n,{term:"value",children:(0,i.jsx)("i",{children:"value"})})," of ",(0,i.jsx)(r.strong,{children:"*debug-io*"}),", called ",(0,i.jsx)(r.em,{children:"debug I/O"}),", is a ",(0,i.jsx)(n,{term:"stream",children:(0,i.jsx)("i",{children:"stream"})})," to be used for interactive debugging purposes."]}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(n,{term:"value",children:(0,i.jsx)("i",{children:"value"})})," of ",(0,i.jsx)(r.strong,{children:"*error-output*"}),", called ",(0,i.jsx)(n,{styled:!0,term:"error output",children:(0,i.jsx)("i",{children:"error output"})}),", is a ",(0,i.jsx)(n,{term:"stream",children:(0,i.jsx)("i",{children:"stream"})})," to which warnings and non-interactive error messages should be sent."]}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(n,{term:"value",children:(0,i.jsx)("i",{children:"value"})})," of ",(0,i.jsx)(r.strong,{children:"*query-io*"}),", called ",(0,i.jsx)(r.em,{children:"query I/O"}),", is a ",(0,i.jsx)(r.em,{children:"bidirectional stream"})," to be used when asking questions of the user. The question should be output to this ",(0,i.jsx)(n,{term:"stream",children:(0,i.jsx)("i",{children:"stream"})}),", and the answer read from it."]}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(n,{term:"value",children:(0,i.jsx)("i",{children:"value"})})," of ",(0,i.jsx)(r.strong,{children:"*standard-input*"}),", called ",(0,i.jsx)(n,{styled:!0,term:"standard input",children:(0,i.jsx)("i",{children:"standard input"})}),", is a ",(0,i.jsx)(n,{term:"stream",children:(0,i.jsx)("i",{children:"stream"})})," that is used by many ",(0,i.jsx)(n,{term:"operator",children:(0,i.jsx)("i",{children:"operators"})})," as a default source of input when no specific ",(0,i.jsx)(r.em,{children:"input stream"})," is explicitly supplied."]}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(n,{term:"value",children:(0,i.jsx)("i",{children:"value"})})," of ",(0,i.jsx)(r.strong,{children:"*standard-output*"}),", called ",(0,i.jsx)(n,{styled:!0,term:"standard output",children:(0,i.jsx)("i",{children:"standard output"})}),", is a ",(0,i.jsx)(n,{term:"stream",children:(0,i.jsx)("i",{children:"stream"})})," that is used by many ",(0,i.jsx)(n,{term:"operator",children:(0,i.jsx)("i",{children:"operators"})})," as a default destination for output when no specific ",(0,i.jsx)(r.em,{children:"output stream"})," is explicitly supplied."]}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(n,{term:"value",children:(0,i.jsx)("i",{children:"value"})})," of ",(0,i.jsx)(r.strong,{children:"*trace-output*"}),", called ",(0,i.jsx)(n,{styled:!0,term:"trace output",children:(0,i.jsx)("i",{children:"trace output"})}),", is the ",(0,i.jsx)(n,{term:"stream",children:(0,i.jsx)("i",{children:"stream"})})," on which traced functions (see ",(0,i.jsx)(t,{term:"trace",children:(0,i.jsx)("b",{children:"trace"})}),") and the ",(0,i.jsx)(t,{term:"time",children:(0,i.jsx)("b",{children:"time"})})," ",(0,i.jsx)(n,{term:"macro",children:(0,i.jsx)("i",{children:"macro"})})," print their output."]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsxs)(r.em,{children:["\u2217",(0,i.jsx)(r.em,{children:(0,i.jsx)(r.strong,{children:"debug-io"})}),"\u2217"]}),(0,i.jsx)(r.strong,{children:","})," ",(0,i.jsxs)(r.em,{children:["\u2217",(0,i.jsx)(r.em,{children:(0,i.jsx)(r.strong,{children:"error-output"})}),"\u2217"]}),(0,i.jsx)(r.strong,{children:","})," ",(0,i.jsxs)(r.em,{children:["\u2217",(0,i.jsx)(r.em,{children:(0,i.jsx)(r.strong,{children:"query-io"})}),"\u2217"]}),(0,i.jsx)(r.strong,{children:","})," ",(0,i.jsx)(r.em,{children:". . ."})]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Examples:"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-lisp",children:'(with-output-to-string (\\*error-output\\*) \n  (warn "this string is sent to \\*error-output\\*")) \n\u2192 "Warning: this string is sent to \\*error-output\\* \n" ;The exact format of this string is *implementation-dependent*. \n(with-input-from-string (\\*standard-input\\* "1001") \n  (+ 990 (read))) \u2192 1991 \n(progn (setq out (with-output-to-string (\\*standard-output\\*) \n\t\t   (print "print and format t send things to") \n\t\t   (format t "\\*standard-output\\* now going to a string"))) \n       :done) \n\u2192 :DONE \nout \n\u2192 " \n\\"print and format t send things to\\" \\*standard-output\\* now going to a string" \n(defun fact (n) (if (< n 2) 1 (\\* n (fact (- n 1))))) \n\u2192 FACT \n(trace fact) \n\u2192 (FACT) \n;; Of course, the format of traced output is implementation-dependent. \n(with-output-to-string (\\*trace-output\\*) \n  (fact 3)) \n\u2192 " \n1 Enter FACT 3 \n| 2 Enter FACT 2 \n| 3 Enter FACT 1 \n| 3 Exit FACT 1 \n| 2 Exit FACT 2 \n1 Exit FACT 6" \n'})}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"See Also:"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(t,{term:"terminal-io",children:(0,i.jsx)("b",{children:"*terminal-io*"})}),", ",(0,i.jsx)(t,{term:"synonym-stream",children:(0,i.jsx)("b",{children:"synonym-stream"})}),", ",(0,i.jsx)(t,{term:"time",children:(0,i.jsx)("b",{children:"time"})}),", ",(0,i.jsx)(t,{term:"trace",children:(0,i.jsx)("b",{children:"trace"})}),", Chapter 9 (Conditions), Chapter 23 (Reader), Chapter 22 (Printer)"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Notes:"})}),"\n",(0,i.jsxs)(r.p,{children:["The intent of the constraints on the initial ",(0,i.jsx)(n,{term:"value",children:(0,i.jsx)("i",{children:"value"})})," of the ",(0,i.jsx)(r.em,{children:"I/O customization variables"})," is to ensure that it is always safe to ",(0,i.jsx)(n,{term:"bind",children:(0,i.jsx)("i",{children:"bind"})})," or ",(0,i.jsx)(n,{term:"assign",children:(0,i.jsx)("i",{children:"assign"})})," such a ",(0,i.jsx)(n,{term:"variable",children:(0,i.jsx)("i",{children:"variable"})})," to the ",(0,i.jsx)(n,{term:"value",children:(0,i.jsx)("i",{children:"value"})})," of another ",(0,i.jsx)(r.em,{children:"I/O customization"})]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(n,{term:"variable",children:(0,i.jsx)("i",{children:"variable"})}),", without unduly restricting ",(0,i.jsx)(n,{term:"implementation",children:(0,i.jsx)("i",{children:"implementation"})})," flexibility."]}),"\n",(0,i.jsxs)(r.p,{children:["It is common for an ",(0,i.jsx)(n,{term:"implementation",children:(0,i.jsx)("i",{children:"implementation"})})," to make the initial ",(0,i.jsx)(n,{term:"value",children:(0,i.jsx)("i",{children:"values"})})," of ",(0,i.jsx)(r.strong,{children:"*debug-io*"})," and ",(0,i.jsx)(r.strong,{children:"*query-io*"})," be the ",(0,i.jsx)(r.em,{children:"same stream"}),", and to make the initial ",(0,i.jsx)(n,{term:"value",children:(0,i.jsx)("i",{children:"values"})})," of ",(0,i.jsx)(r.strong,{children:"*error-output*"})," and ",(0,i.jsx)(r.strong,{children:"*standard-output*"})," be the ",(0,i.jsx)(r.em,{children:"same stream"}),"."]}),"\n",(0,i.jsxs)(r.p,{children:["The functions ",(0,i.jsx)(t,{term:"y-or-n-p",children:(0,i.jsx)("b",{children:"y-or-n-p"})})," and ",(0,i.jsx)(t,{term:"yes-or-no-p",children:(0,i.jsx)("b",{children:"yes-or-no-p"})})," use ",(0,i.jsx)(r.em,{children:"query I/O"})," for their input and output."]}),"\n",(0,i.jsxs)(r.p,{children:["In the normal ",(0,i.jsx)(r.em,{children:"Lisp read-eval-print loop"}),", input is read from ",(0,i.jsx)(n,{styled:!0,term:"standard input",children:(0,i.jsx)("i",{children:"standard input"})}),". Many input functions, including ",(0,i.jsx)(t,{term:"read",children:(0,i.jsx)("b",{children:"read"})})," and ",(0,i.jsx)(t,{term:"read-char",children:(0,i.jsx)("b",{children:"read-char"})}),", take a ",(0,i.jsx)(n,{term:"stream",children:(0,i.jsx)("i",{children:"stream"})})," argument that defaults to ",(0,i.jsx)(n,{styled:!0,term:"standard input",children:(0,i.jsx)("i",{children:"standard input"})}),"."]}),"\n",(0,i.jsxs)(r.p,{children:["In the normal ",(0,i.jsx)(r.em,{children:"Lisp read-eval-print loop"}),", output is sent to ",(0,i.jsx)(n,{styled:!0,term:"standard output",children:(0,i.jsx)("i",{children:"standard output"})}),". Many output functions, including ",(0,i.jsx)(t,{term:"print",children:(0,i.jsx)("b",{children:"print"})})," and ",(0,i.jsx)(t,{term:"write-char",children:(0,i.jsx)("b",{children:"write-char"})}),", take a ",(0,i.jsx)(n,{term:"stream",children:(0,i.jsx)("i",{children:"stream"})})," argument that defaults to ",(0,i.jsx)(n,{styled:!0,term:"standard output",children:(0,i.jsx)("i",{children:"standard output"})}),"."]}),"\n",(0,i.jsxs)(r.p,{children:["A program that wants, for example, to divert output to a file should do so by ",(0,i.jsx)(n,{term:"binding",children:(0,i.jsx)("i",{children:"binding"})})," ",(0,i.jsx)(r.strong,{children:"*standard-output*"}),"; that way error messages sent to ",(0,i.jsx)(r.strong,{children:"*error-output*"})," can still get to the user by going through ",(0,i.jsx)(t,{term:"terminal-io",children:(0,i.jsx)("b",{children:"*terminal-io*"})})," (if ",(0,i.jsx)(r.strong,{children:"*error-output*"})," is bound to ",(0,i.jsx)(t,{term:"terminal-io",children:(0,i.jsx)("b",{children:"*terminal-io*"})}),"), which is usually what is desired."]})]})}function l(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}function c(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}const h={title:"with-output-to-string"},a="with-output-to-string",o={},x=[{value:"Expanded Reference: with-output-to-string",id:"expanded-reference-with-output-to-string",level:2}];function j(e){const r={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"with-output-to-string",children:"with-output-to-string"})}),"\n","\n",(0,i.jsx)(l,{}),"\n",(0,i.jsx)(r.h2,{id:"expanded-reference-with-output-to-string",children:"Expanded Reference: with-output-to-string"}),"\n",(0,i.jsx)(r.admonition,{type:"tip",children:(0,i.jsx)(r.p,{children:"TODO: Please contribute to this page by adding explanations and examples"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-lisp",children:"(with-output-to-string )\n"})})]})}function m(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(j,{...e})}):j(e)}},28453:(e,r,t)=>{t.d(r,{R:()=>d,x:()=>l});var n=t(96540);const i={},s=n.createContext(i);function d(e){const r=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),n.createElement(s.Provider,{value:r},e.children)}}}]);