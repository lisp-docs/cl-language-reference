"use strict";(globalThis.webpackChunkcl_language_reference=globalThis.webpackChunkcl_language_reference||[]).push([[23970],{14215:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>h,contentTitle:()=>o,default:()=>m,frontMatter:()=>a,metadata:()=>i,toc:()=>x});const i=JSON.parse('{"id":"chap-3/d-i-dictionary/declare_symbol","title":"declare","description":"Expanded Reference: declare","source":"@site/docs/chap-3/d-i-dictionary/declare_symbol.md","sourceDirName":"chap-3/d-i-dictionary","slug":"/chap-3/d-i-dictionary/declare_symbol","permalink":"/cl-language-reference/chap-3/d-i-dictionary/declare_symbol","draft":false,"unlisted":false,"editUrl":"https://github.com/lisp-docs/cl-language-reference/tree/main/docs/chap-3/d-i-dictionary/declare_symbol.md","tags":[],"version":"current","lastUpdatedBy":"Daniel Nussenbaum","frontMatter":{"title":"declare"},"sidebar":"tutorialSidebar","previous":{"title":"declaration","permalink":"/cl-language-reference/chap-3/d-i-dictionary/declaration_declaration"},"next":{"title":"define-compiler-macro","permalink":"/cl-language-reference/chap-3/d-i-dictionary/define-compiler-macro_macro"}}');var s=r(74848),t=r(28453);function c(e){const n={code:"code",em:"em",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components},{DictionaryLink:r,GlossaryTerm:i}=n;return r||d("DictionaryLink",!0),i||d("GlossaryTerm",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"declare"})," ",(0,s.jsx)(i,{term:"symbol",children:(0,s.jsx)("i",{children:"Symbol"})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Syntax:"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(r,{term:"declare",children:(0,s.jsx)("b",{children:"declare"})})," ",(0,s.jsx)(n.em,{children:"{declaration-specifier}"}),"*"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments:"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"declaration-specifier"}),"\u2014a ",(0,s.jsx)(i,{styled:!0,term:"declaration specifier",children:(0,s.jsx)("i",{children:"declaration specifier"})})," ; not evaluated."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(r,{term:"declare",children:(0,s.jsx)("b",{children:"declare"})})," ",(0,s.jsx)(i,{term:"expression",children:(0,s.jsx)("i",{children:"expression"})}),", sometimes called a ",(0,s.jsx)(i,{term:"declaration",children:(0,s.jsx)("i",{children:"declaration"})}),", can occur only at the beginning of the bodies of certain ",(0,s.jsx)(i,{term:"form",children:(0,s.jsx)("i",{children:"forms"})}),"; that is, it may be preceded only by other ",(0,s.jsx)(r,{term:"declare",children:(0,s.jsx)("b",{children:"declare"})})," ",(0,s.jsx)(i,{term:"expression",children:(0,s.jsx)("i",{children:"expressions"})}),", or by a ",(0,s.jsx)(i,{styled:!0,term:"documentation string",children:(0,s.jsx)("i",{children:"documentation string"})})," if the context permits."]}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(r,{term:"declare",children:(0,s.jsx)("b",{children:"declare"})})," ",(0,s.jsx)(i,{term:"expression",children:(0,s.jsx)("i",{children:"expression"})})," can occur in a ",(0,s.jsx)(i,{styled:!0,term:"lambda expression",children:(0,s.jsx)("i",{children:"lambda expression"})})," or in any of the ",(0,s.jsx)(i,{term:"form",children:(0,s.jsx)("i",{children:"forms"})})," listed in Figure 3\u201323."]}),"\n",(0,s.jsx)(r,{term:"declare",children:(0,s.jsx)("b",{children:"declare"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lisp",metastring:'title="Figure 3\u201323. Standardized Forms In Which Declarations Can Occur"',children:"<p>**defgeneric do-external-symbols prog** </p><p>**define-compiler-macro do-symbols prog\\*** </p><p>**define-method-combination dolist restart-case define-setf-expander dotimes symbol-macrolet defmacro flet with-accessors defmethod handler-case with-hash-table-iterator defsetf labels with-input-from-string deftype let with-open-file defun let\\* with-open-stream destructuring-bind locally with-output-to-string do macrolet with-package-iterator do\\* multiple-value-bind with-slots** </p><p>**do-all-symbols pprint-logical-block**</p>\n"})}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(r,{term:"declare",children:(0,s.jsx)("b",{children:"declare"})})," ",(0,s.jsx)(i,{term:"expression",children:(0,s.jsx)("i",{children:"expression"})})," can only occur where specified by the syntax of these ",(0,s.jsx)(i,{term:"form",children:(0,s.jsx)("i",{children:"forms"})}),". The consequences of attempting to evaluate a ",(0,s.jsx)(r,{term:"declare",children:(0,s.jsx)("b",{children:"declare"})})," ",(0,s.jsx)(i,{term:"expression",children:(0,s.jsx)("i",{children:"expression"})})," are undefined. In situations where such ",(0,s.jsx)(i,{term:"expression",children:(0,s.jsx)("i",{children:"expressions"})})," can appear, explicit checks are made for their presence and they are never actually evaluated; it is for this reason that they are called \u201c",(0,s.jsx)(r,{term:"declare",children:(0,s.jsx)("b",{children:"declare"})})," ",(0,s.jsx)(i,{term:"expression",children:(0,s.jsx)("i",{children:"expressions"})}),"\u201d rather than \u201c",(0,s.jsx)(r,{term:"declare",children:(0,s.jsx)("b",{children:"declare"})})," ",(0,s.jsx)(i,{term:"form",children:(0,s.jsx)("i",{children:"forms"})}),".\u201d"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(i,{styled:!0,term:"macro form",children:(0,s.jsx)("i",{children:"Macro forms"})})," cannot expand into declarations; ",(0,s.jsx)(r,{term:"declare",children:(0,s.jsx)("b",{children:"declare"})})," ",(0,s.jsx)(i,{term:"expression",children:(0,s.jsx)("i",{children:"expressions"})})," must appear as actual ",(0,s.jsx)(i,{term:"subexpression",children:(0,s.jsx)("i",{children:"subexpressions"})})," of the ",(0,s.jsx)(i,{term:"form",children:(0,s.jsx)("i",{children:"form"})})," to which they refer."]}),"\n",(0,s.jsxs)(n.p,{children:["Figure 3\u201324 shows a list of ",(0,s.jsx)(i,{styled:!0,term:"declaration identifier",children:(0,s.jsx)("i",{children:"declaration identifiers"})})," that can be used with ",(0,s.jsx)(r,{term:"declare",children:(0,s.jsx)("b",{children:"declare"})}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lisp",metastring:'title="Figure 3\u201324. Local Declaration Specifiers"',children:"<p>**dynamic-extent ignore optimize** </p><p>**ftype inline special** </p><p>**ignorable notinline type**</p>\n"})}),"\n",(0,s.jsxs)(n.p,{children:["An implementation is free to support other (",(0,s.jsx)(i,{term:"implementation-defined",children:(0,s.jsx)("i",{children:"implementation-defined"})}),") ",(0,s.jsx)(i,{styled:!0,term:"declaration identifier",children:(0,s.jsx)("i",{children:"declaration identifiers"})})," as well."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lisp",children:"(defun nonsense (k x z) \n  (foo z x) ;First call to foo \n  (let ((j (foo k x)) ;Second call to foo \n\t(x (\\* k k))) \n    (declare (inline foo) (special x z)) \n    (foo x j z))) ;Third call to foo \nIn this example, the **inline** declaration applies only to the third call to foo, but not to the first or second ones. The **special** declaration of x causes **let** to make a dynamic *binding* for x, and \nEvaluation and \n\ncauses the reference to x in the body of **let** to be a dynamic reference. The reference to x in the second call to foo is a local reference to the second parameter of nonsense. The reference to x in the first call to foo is a local reference, not a **special** one. The **special** declaration of z causes the \nreference to z in the third call to foo to be a dynamic reference; it does not refer to the parameter to nonsense named z, because that parameter *binding* has not been declared to be **special**. (The **special** declaration of z does not appear in the body of **defun**, but in an inner *form*, and therefore does not a\u21b5ect the *binding* of the *parameter* .) \n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Exceptional Situations:"})}),"\n",(0,s.jsxs)(n.p,{children:["The consequences of trying to use a ",(0,s.jsx)(r,{term:"declare",children:(0,s.jsx)("b",{children:"declare"})})," ",(0,s.jsx)(i,{term:"expression",children:(0,s.jsx)("i",{children:"expression"})})," as a ",(0,s.jsx)(i,{term:"form",children:(0,s.jsx)("i",{children:"form"})})," to be ",(0,s.jsx)(n.em,{children:"evaluated"})," are undefined."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"See Also:"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(r,{term:"proclaim",children:(0,s.jsx)("b",{children:"proclaim"})}),", Section 4.2.3 (Type Specifiers), ",(0,s.jsx)(r,{term:"declaration",children:(0,s.jsx)("b",{children:"declaration"})}),", ",(0,s.jsx)(r,{term:"dynamic-extent",children:(0,s.jsx)("b",{children:"dynamic-extent"})}),", ",(0,s.jsx)(r,{term:"ftype",children:(0,s.jsx)("b",{children:"ftype"})}),", ",(0,s.jsx)(r,{term:"ignorable",children:(0,s.jsx)("b",{children:"ignorable"})}),", ",(0,s.jsx)(r,{term:"ignore",children:(0,s.jsx)("b",{children:"ignore"})}),", ",(0,s.jsx)(r,{term:"inline",children:(0,s.jsx)("b",{children:"inline"})}),", ",(0,s.jsx)(r,{term:"notinline",children:(0,s.jsx)("b",{children:"notinline"})}),", ",(0,s.jsx)(r,{term:"optimize",children:(0,s.jsx)("b",{children:"optimize"})}),", ",(0,s.jsx)(r,{term:"type",children:(0,s.jsx)("b",{children:"type"})})]})]})}function l(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}function d(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}const a={title:"declare"},o="declare",h={},x=[{value:"Expanded Reference: declare",id:"expanded-reference-declare",level:2}];function p(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"declare",children:"declare"})}),"\n","\n",(0,s.jsx)(l,{}),"\n",(0,s.jsx)(n.h2,{id:"expanded-reference-declare",children:"Expanded Reference: declare"}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"TODO: Please contribute to this page by adding explanations and examples"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lisp",children:"(declare )\n"})})]})}function m(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>l});var i=r(96540);const s={},t=i.createContext(s);function c(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);