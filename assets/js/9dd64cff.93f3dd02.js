"use strict";(globalThis.webpackChunkcl_language_reference=globalThis.webpackChunkcl_language_reference||[]).push([[95213],{28453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>o});var t=r(96540);const s={},i=t.createContext(s);function c(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),t.createElement(i.Provider,{value:n},e.children)}},38659:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>p,contentTitle:()=>d,default:()=>f,frontMatter:()=>l,metadata:()=>t,toc:()=>x});const t=JSON.parse('{"id":"chap-5/f-d-dictionary/get-setf-expansion_function","title":"get-setf-expansion","description":"Expanded Reference: get-setf-expansion","source":"@site/docs/chap-5/f-d-dictionary/get-setf-expansion_function.md","sourceDirName":"chap-5/f-d-dictionary","slug":"/chap-5/f-d-dictionary/get-setf-expansion_function","permalink":"/cl-language-reference/chap-5/f-d-dictionary/get-setf-expansion_function","draft":false,"unlisted":false,"editUrl":"https://github.com/lisp-docs/cl-language-reference/tree/main/docs/chap-5/f-d-dictionary/get-setf-expansion_function.md","tags":[],"version":"current","lastUpdatedBy":"Daniel Nussenbaum","frontMatter":{"title":"get-setf-expansion"},"sidebar":"tutorialSidebar","previous":{"title":"functionp","permalink":"/cl-language-reference/chap-5/f-d-dictionary/functionp_function"},"next":{"title":"go","permalink":"/cl-language-reference/chap-5/f-d-dictionary/go_special-operator"}}');var s=r(74848),i=r(28453);function c(e){const n={code:"code",em:"em",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components},{DictionaryLink:r,GlossaryTerm:t}=n;return r||a("DictionaryLink",!0),t||a("GlossaryTerm",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"get-setf-expansion"})," ",(0,s.jsx)(t,{term:"function",children:(0,s.jsx)("i",{children:"Function"})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Syntax:"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(r,{term:"get-setf-expansion",children:(0,s.jsx)("b",{children:"get-setf-expansion"})})," ",(0,s.jsx)(t,{term:"place",children:(0,s.jsx)("i",{children:"place"})})," &optional ",(0,s.jsx)(t,{term:"environment",children:(0,s.jsx)("i",{children:"environment"})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"! vars, vals, store-vars, writer-form, reader-form"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments and Values:"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(t,{term:"place",children:(0,s.jsx)("i",{children:"place"})}),"\u2014a ",(0,s.jsx)(t,{term:"place",children:(0,s.jsx)("i",{children:"place"})}),"."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(t,{term:"environment",children:(0,s.jsx)("i",{children:"environment"})}),"\u2014an ",(0,s.jsx)(t,{styled:!0,term:"environment object",children:(0,s.jsx)("i",{children:"environment object"})}),"."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"vars, vals, store-vars, writer-form, reader-form"}),"\u2014a ",(0,s.jsx)(t,{styled:!0,term:"setf expansion",children:(0,s.jsx)("i",{children:"setf expansion"})}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),"\n",(0,s.jsxs)(n.p,{children:["Determines five values constituting the ",(0,s.jsx)(t,{styled:!0,term:"setf expansion",children:(0,s.jsx)("i",{children:"setf expansion"})})," for ",(0,s.jsx)(t,{term:"place",children:(0,s.jsx)("i",{children:"place"})})," in ",(0,s.jsx)(t,{term:"environment",children:(0,s.jsx)("i",{children:"environment"})}),"; see Section 5.1.1.2 (Setf Expansions)."]}),"\n",(0,s.jsxs)(n.p,{children:["If ",(0,s.jsx)(t,{term:"environment",children:(0,s.jsx)("i",{children:"environment"})})," is not supplied or ",(0,s.jsx)(r,{term:"nil",children:(0,s.jsx)("b",{children:"nil"})}),", the environment is the ",(0,s.jsx)(t,{styled:!0,term:"null lexical environment",children:(0,s.jsx)("i",{children:"null lexical environment"})}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lisp",children:'(get-setf-expansion \u2019x) \n*!* NIL, NIL, (#:G0001), (SETQ X #:G0001), X \n;;; This macro is like POP \n(defmacro xpop (place &environment env) \n  (multiple-value-bind (dummies vals new setter getter) \n      (get-setf-expansion place env) \n    \u2018(let\\* (,@(mapcar #\u2019list dummies vals) (,(car new) ,getter)) \n\t    (if (cdr new) (error "Can\u2019t expand this.")) \n\t    (prog1 (car ,(car new)) \n\t      (setq ,(car new) (cdr ,(car new))) \n\t      ,setter)))) \n(defsetf frob (x) (value) \n  \u2018(setf (car ,x) ,value)) *!* FROB \n;;; The following is an error; an error might be signaled at macro expansion time (flet ((frob (x) (cdr x))) ;Invalid \n(xpop (frob z))) \n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"See Also:"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(r,{term:"defsetf",children:(0,s.jsx)("b",{children:"defsetf"})}),", ",(0,s.jsx)(r,{term:"define-setf-expander",children:(0,s.jsx)("b",{children:"define-setf-expander"})}),", ",(0,s.jsx)(r,{term:"setf",children:(0,s.jsx)("b",{children:"setf"})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Notes:"})}),"\n",(0,s.jsxs)(n.p,{children:["Any ",(0,s.jsx)(n.em,{children:"compound form"})," is a valid ",(0,s.jsx)(t,{term:"place",children:(0,s.jsx)("i",{children:"place"})}),", since any ",(0,s.jsx)(n.em,{children:"compound form"})," whose ",(0,s.jsx)(n.em,{children:"operator f"})," has no ",(0,s.jsx)(n.em,{children:"setf expander"})," are expanded into a call to (setf ",(0,s.jsx)(n.em,{children:"f"})," )."]})]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}function a(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}const l={title:"get-setf-expansion"},d="get-setf-expansion",p={},x=[{value:"Expanded Reference: get-setf-expansion",id:"expanded-reference-get-setf-expansion",level:2}];function h(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"get-setf-expansion",children:"get-setf-expansion"})}),"\n","\n",(0,s.jsx)(o,{}),"\n",(0,s.jsx)(n.h2,{id:"expanded-reference-get-setf-expansion",children:"Expanded Reference: get-setf-expansion"}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"TODO: Please contribute to this page by adding explanations and examples"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lisp",children:"(get-setf-expansion )\n"})})]})}function f(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);