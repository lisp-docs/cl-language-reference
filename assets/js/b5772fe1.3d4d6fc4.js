"use strict";(self.webpackChunkcl_language_reference=self.webpackChunkcl_language_reference||[]).push([[55725],{16603:(e,s,c)=>{c.r(s),c.d(s,{assets:()=>i,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>o});var n=c(85893),a=c(11151);const l={},r="ensure-class-using-class",t={id:"meta-object-protocol/dictionary/ensure-class-using-class",title:"ensure-class-using-class",description:"Generic Function ENSURE-CLASS-USING-CLASS",source:"@site/docs/meta-object-protocol/dictionary/ensure-class-using-class.md",sourceDirName:"meta-object-protocol/dictionary",slug:"/meta-object-protocol/dictionary/ensure-class-using-class",permalink:"/cl-language-reference/meta-object-protocol/dictionary/ensure-class-using-class",draft:!1,unlisted:!1,editUrl:"https://github.com/lisp-docs/cl-language-reference/tree/main/docs/meta-object-protocol/dictionary/ensure-class-using-class.md",tags:[],version:"current",lastUpdatedBy:"Daniel Nussenbaum",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"ensure-class-using-class-null",permalink:"/cl-language-reference/meta-object-protocol/dictionary/ensure-class-using-class-null"},next:{title:"ensure-class",permalink:"/cl-language-reference/meta-object-protocol/dictionary/ensure-class"}},i={},o=[{value:"<strong>ensure-class-using-class</strong> (<em>class</em> class) <em>name</em> <code>&amp;key</code> <code>:metaclass</code> <code>:direct-superclasses</code> <code>&amp;allow-other-keys</code>\n<strong>ensure-class-using-class</strong> (<em>class</em> forward-referenced-class) <em>name</em> <code>&amp;key</code> <code>:metaclass</code> <code>:direct-superclasses</code> <code>&amp;allow-other-keys</code>\n<strong>ensure-class-using-class</strong> (<em>class</em> null) <em>name</em> <code>&amp;key</code> <code>:metaclass</code> <code>:direct-superclasses</code> <code>&amp;allow-other-keys</code>",id:"ensure-class-using-class-class-class-name-key-metaclass-direct-superclasses-allow-other-keysensure-class-using-class-class-forward-referenced-class-name-key-metaclass-direct-superclasses-allow-other-keysensure-class-using-class-class-null-name-key-metaclass-direct-superclasses-allow-other-keys",level:2}];function d(e){const s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",hr:"hr",li:"li",p:"p",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h1,{id:"ensure-class-using-class",children:"ensure-class-using-class"}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.em,{children:"Generic Function"})," ",(0,n.jsx)(s.strong,{children:"ENSURE-CLASS-USING-CLASS"})]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Syntax:"})}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"ensure-class-using-class"})," ",(0,n.jsx)(s.em,{children:"class"})," ",(0,n.jsx)(s.em,{children:"name"})," ",(0,n.jsx)(s.code,{children:"&key"})," ",(0,n.jsx)(s.code,{children:":direct-default-initargs"})," ",(0,n.jsx)(s.code,{children:":direct-slots"})," ",(0,n.jsx)(s.code,{children:":direct-superclasses"})," ",(0,n.jsx)(s.code,{children:":name"})," ",(0,n.jsx)(s.code,{children:":metaclass"})," => ",(0,n.jsx)(s.em,{children:"resulting-class"})]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Arguments and values:"})}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.em,{children:"class"})," -- A class metaobject or ",(0,n.jsx)(s.code,{children:"NIL"}),"."]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.em,{children:"name"})," -- A class name."]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:":metaclass"})," -- A class metaobject class or a class metaobject class name. If this argument is not supplied, it defaults to the class named ",(0,n.jsx)(s.code,{children:"standard-class"}),". If a class name is supplied, it is interpreted as the class with that name. If a class name is supplied, but there is no such class, an error is signaled."]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:":direct-superclasses"})," -- A list of which each element is a class metaobject or a class name. An error is signaled if this argument is not a proper list."]}),"\n",(0,n.jsxs)(s.p,{children:["For the interpretation of additional keyword arguments, see",(0,n.jsx)(s.a,{href:"/meta-object-protocol/initialization-of-class-metaobjects",children:"Initialization of Class Metaobjects"}),"."]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.em,{children:"resulting-class"})," -- A class metaobject."]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Description:"})}),"\n",(0,n.jsxs)(s.p,{children:["This generic function is called to define or modify the definition of a named class. It is called by the ",(0,n.jsx)(s.code,{children:"ensure-class"})," function. It can also be called directly."]}),"\n",(0,n.jsx)(s.p,{children:"The first step performed by this generic function is to compute the set of initialization arguments which will be used to create or reinitialize the named class. The initialization arguments are computed from the full set of keyword arguments received by this generic function as follows:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["The ",(0,n.jsx)(s.code,{children:":metaclass"})," argument is not included in the initialization arguments."]}),"\n",(0,n.jsxs)(s.li,{children:["If the ",(0,n.jsx)(s.code,{children:":direct-superclasses"})," argument was received by this generic function, it is converted into a list of class metaobjects. This conversion does not affect the structure of the supplied ",(0,n.jsx)(s.code,{children:":direct-superclasses"})," argument. For each element in the ",(0,n.jsx)(s.code,{children:":direct-superclasses"})," argument:","\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"If the element is a class metaobject, that class metaobject is used."}),"\n",(0,n.jsx)(s.li,{children:"If the element names a class, that class metaobject is used."}),"\n",(0,n.jsxs)(s.li,{children:["Otherwise an instance of the class ",(0,n.jsx)(s.a,{href:"/meta-object-protocol/class-forward-referenced-class",children:"forward-referenced-class"})," is created and used. The proper name of the newly created forward referenced class metaobject is set to ",(0,n.jsx)(s.em,{children:"name"}),"."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.li,{children:"All other keyword arguments are included directly in the initialization arguments."}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["If the ",(0,n.jsx)(s.em,{children:"class"})," argument is ",(0,n.jsx)(s.code,{children:"nil"}),", a new class metaobject is created by calling the ",(0,n.jsx)(s.code,{children:"make-instance"})," generic function with the value of the ",(0,n.jsx)(s.code,{children:":metaclass"})," argument as its first argument, and the previously computed initialization arguments. The proper name of the newly created class metaobject is set to ",(0,n.jsx)(s.em,{children:"name"}),". The newly created class metaobject is returned."]}),"\n",(0,n.jsxs)(s.p,{children:["If the ",(0,n.jsx)(s.em,{children:"class"})," argument is a forward referenced class, ",(0,n.jsx)(s.code,{children:"change-class"})," is called to change its class to the value specified by the ",(0,n.jsx)(s.code,{children:":metaclass"})," argument. The class metaobject is then reinitialized with the previously initialization arguments. (This is a documented violation of the general constraint that ",(0,n.jsx)(s.code,{children:"change-class"})," not be used with class metaobjects.)"]}),"\n",(0,n.jsxs)(s.p,{children:["If the class of the ",(0,n.jsx)(s.em,{children:"class"})," argument is not the same as the class specified by the ",(0,n.jsx)(s.code,{children:":metaclass"})," argument, an error is signaled."]}),"\n",(0,n.jsxs)(s.p,{children:["Otherwise, the class metaobject ",(0,n.jsx)(s.em,{children:"class"})," is redefined by calling the ",(0,n.jsx)(s.code,{children:"reinitialize-instance"})," generic function with ",(0,n.jsx)(s.em,{children:"class"})," and the initialization arguments. The ",(0,n.jsx)(s.em,{children:"class"})," argument is then returned."]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Methods:"})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"ensure-class-using-class-class-class-name-key-metaclass-direct-superclasses-allow-other-keysensure-class-using-class-class-forward-referenced-class-name-key-metaclass-direct-superclasses-allow-other-keysensure-class-using-class-class-null-name-key-metaclass-direct-superclasses-allow-other-keys",children:[(0,n.jsxs)(s.a,{href:"/meta-object-protocol/ensure-class-using-class-class",children:[(0,n.jsx)(s.strong,{children:"ensure-class-using-class"})," (",(0,n.jsx)(s.em,{children:"class"})," class) ",(0,n.jsx)(s.em,{children:"name"})," ",(0,n.jsx)(s.code,{children:"&key"})," ",(0,n.jsx)(s.code,{children:":metaclass"})," ",(0,n.jsx)(s.code,{children:":direct-superclasses"})," ",(0,n.jsx)(s.code,{children:"&allow-other-keys"})]}),"\n",(0,n.jsxs)(s.a,{href:"/meta-object-protocol/ensure-class-using-class-forward-referenced-class",children:[(0,n.jsx)(s.strong,{children:"ensure-class-using-class"})," (",(0,n.jsx)(s.em,{children:"class"})," forward-referenced-class) ",(0,n.jsx)(s.em,{children:"name"})," ",(0,n.jsx)(s.code,{children:"&key"})," ",(0,n.jsx)(s.code,{children:":metaclass"})," ",(0,n.jsx)(s.code,{children:":direct-superclasses"})," ",(0,n.jsx)(s.code,{children:"&allow-other-keys"})]}),"\n",(0,n.jsxs)(s.a,{href:"/meta-object-protocol/ensure-class-using-class-null",children:[(0,n.jsx)(s.strong,{children:"ensure-class-using-class"})," (",(0,n.jsx)(s.em,{children:"class"})," null) ",(0,n.jsx)(s.em,{children:"name"})," ",(0,n.jsx)(s.code,{children:"&key"})," ",(0,n.jsx)(s.code,{children:":metaclass"})," ",(0,n.jsx)(s.code,{children:":direct-superclasses"})," ",(0,n.jsx)(s.code,{children:"&allow-other-keys"})]})]})]})}function h(e={}){const{wrapper:s}={...(0,a.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},11151:(e,s,c)=>{c.d(s,{Z:()=>t,a:()=>r});var n=c(67294);const a={},l=n.createContext(a);function r(e){const s=n.useContext(l);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),n.createElement(l.Provider,{value:s},e.children)}}}]);