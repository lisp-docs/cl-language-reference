"use strict";(globalThis.webpackChunkcl_language_reference=globalThis.webpackChunkcl_language_reference||[]).push([[99087],{28453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>c});var i=r(96540);const s={},l=i.createContext(s);function t(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(l.Provider,{value:n},e.children)}},82519:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>h,contentTitle:()=>o,default:()=>m,frontMatter:()=>a,metadata:()=>i,toc:()=>x});const i=JSON.parse('{"id":"chap-5/f-d-dictionary/nth-value_macro","title":"nth-value","description":"Expanded Reference: nth-value","source":"@site/docs/chap-5/f-d-dictionary/nth-value_macro.md","sourceDirName":"chap-5/f-d-dictionary","slug":"/chap-5/f-d-dictionary/nth-value_macro","permalink":"/cl-language-reference/chap-5/f-d-dictionary/nth-value_macro","draft":false,"unlisted":false,"editUrl":"https://github.com/lisp-docs/cl-language-reference/tree/main/docs/chap-5/f-d-dictionary/nth-value_macro.md","tags":[],"version":"current","lastUpdatedBy":"Daniel Nussenbaum","frontMatter":{"title":"nth-value"},"sidebar":"tutorialSidebar","previous":{"title":"not","permalink":"/cl-language-reference/chap-5/f-d-dictionary/not_function"},"next":{"title":"or","permalink":"/cl-language-reference/chap-5/f-d-dictionary/or_macro"}}');var s=r(74848),l=r(28453);function t(e){const n={code:"code",em:"em",p:"p",pre:"pre",strong:"strong",...(0,l.R)(),...e.components},{DictionaryLink:r,GlossaryTerm:i}=n;return r||d("DictionaryLink",!0),i||d("GlossaryTerm",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"nth-value"})," ",(0,s.jsx)(i,{term:"macro",children:(0,s.jsx)("i",{children:"Macro"})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Syntax:"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(r,{term:"nth-value",children:(0,s.jsx)("b",{children:"nth-value"})})," ",(0,s.jsx)(n.em,{children:"n form ! object"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments and Values:"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"n"}),"\u2014a non-negative ",(0,s.jsx)(n.em,{children:"integer"})," ; evaluated."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(i,{term:"form",children:(0,s.jsx)("i",{children:"form"})}),"\u2014a ",(0,s.jsx)(i,{term:"form",children:(0,s.jsx)("i",{children:"form"})}),"; evaluated as described below."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(i,{term:"object",children:(0,s.jsx)("i",{children:"object"})}),"\u2014an ",(0,s.jsx)(i,{term:"object",children:(0,s.jsx)("i",{children:"object"})}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),"\n",(0,s.jsxs)(n.p,{children:["Evaluates ",(0,s.jsx)(n.em,{children:"n"})," and then ",(0,s.jsx)(i,{term:"form",children:(0,s.jsx)("i",{children:"form"})}),", returning as its only value the ",(0,s.jsx)(n.em,{children:"n"}),"th value ",(0,s.jsx)(n.em,{children:"yielded"})," by ",(0,s.jsx)(i,{term:"form",children:(0,s.jsx)("i",{children:"form"})}),", or ",(0,s.jsx)(r,{term:"nil",children:(0,s.jsx)("b",{children:"nil"})})," if ",(0,s.jsx)(n.em,{children:"n"})," is greater than or equal to the number of ",(0,s.jsx)(i,{term:"value",children:(0,s.jsx)("i",{children:"values"})})," returned by ",(0,s.jsx)(i,{term:"form",children:(0,s.jsx)("i",{children:"form"})}),". (The first returned value is numbered 0.)"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lisp",children:" \n(nth-value 0 (values \u2019a \u2019b)) *!* A \n(nth-value 1 (values \u2019a \u2019b)) *!* B \n(nth-value 2 (values \u2019a \u2019b)) *!* NIL \n(let\\* ((x 83927472397238947423879243432432432) \n(y 32423489732) \n \n \n(a (nth-value 1 (floor x y))) \n(b (mod x y))) \n(values a b (= a b))) \n*!* 3332987528, 3332987528, *true* \n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"See Also:"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(r,{term:"multiple-value-list",children:(0,s.jsx)("b",{children:"multiple-value-list"})}),", ",(0,s.jsx)(r,{term:"nth",children:(0,s.jsx)("b",{children:"nth"})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Notes:"})}),"\n",(0,s.jsxs)(n.p,{children:["Operationally, the following relationship is true, although ",(0,s.jsx)(r,{term:"nth-value",children:(0,s.jsx)("b",{children:"nth-value"})})," might be more ecient in some ",(0,s.jsx)(i,{term:"implementation",children:(0,s.jsx)("i",{children:"implementations"})})," because, for example, some ",(0,s.jsx)(n.em,{children:"consing"})," might be avoided."]}),"\n",(0,s.jsxs)(n.p,{children:["(nth-value ",(0,s.jsx)(n.em,{children:"n form"}),") ",(0,s.jsx)(n.em,{children:"\u2318"})," (nth ",(0,s.jsx)(n.em,{children:"n"})," (multiple-value-list ",(0,s.jsx)(i,{term:"form",children:(0,s.jsx)("i",{children:"form"})}),"))"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"prog, prog"}),"*\u21e4 Macro*"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Syntax:"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"prog"})," (",(0,s.jsx)(n.em,{children:"{var |"})," (",(0,s.jsx)(n.em,{children:"var"})," [",(0,s.jsx)(n.em,{children:"init-form"}),"])",(0,s.jsx)(n.em,{children:"}"}),"*) ",(0,s.jsx)(i,{term:"declaration",children:(0,s.jsx)("i",{children:"{declaration}"})}),"* ",(0,s.jsx)(n.em,{children:"{tag | statement}"}),"*"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"! {result}"}),"*"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"prog*"})," (",(0,s.jsx)(n.em,{children:"{var |"})," (",(0,s.jsx)(n.em,{children:"var"})," [",(0,s.jsx)(n.em,{children:"init-form"}),"])",(0,s.jsx)(n.em,{children:"}"}),"*) ",(0,s.jsx)(i,{term:"declaration",children:(0,s.jsx)("i",{children:"{declaration}"})}),"* ",(0,s.jsx)(n.em,{children:"{tag | statement}"}),"*"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"! {result}"}),"*"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Arguments and Values:"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"var"}),"\u2014variable name."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"init-form"}),"\u2014a ",(0,s.jsx)(i,{term:"form",children:(0,s.jsx)("i",{children:"form"})}),"."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(i,{term:"declaration",children:(0,s.jsx)("i",{children:"declaration"})}),"\u2014a ",(0,s.jsx)(r,{term:"declare",children:(0,s.jsx)("b",{children:"declare"})})," ",(0,s.jsx)(i,{term:"expression",children:(0,s.jsx)("i",{children:"expression"})}),"; not evaluated."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(i,{term:"tag",children:(0,s.jsx)("i",{children:"tag"})}),"\u2014a ",(0,s.jsx)(i,{styled:!0,term:"go tag",children:(0,s.jsx)("i",{children:"go tag"})}),"; not evaluated."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"statement"}),"\u2014a ",(0,s.jsx)(i,{styled:!0,term:"compound form",children:(0,s.jsx)("i",{children:"compound form"})}),"; evaluated as described below."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"results"}),"\u2014",(0,s.jsx)(r,{term:"nil",children:(0,s.jsx)("b",{children:"nil"})})," if a ",(0,s.jsx)(i,{styled:!0,term:"normal return",children:(0,s.jsx)("i",{children:"normal return"})})," occurs, or else, if an ",(0,s.jsx)(i,{styled:!0,term:"explicit return",children:(0,s.jsx)("i",{children:"explicit return"})})," occurs, the ",(0,s.jsx)(i,{term:"value",children:(0,s.jsx)("i",{children:"values"})})," that were transferred."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Description:"})}),"\n",(0,s.jsxs)(n.p,{children:["Three distinct operations are performed by ",(0,s.jsx)(n.strong,{children:"prog"})," and ",(0,s.jsx)(n.strong,{children:"prog*"}),": they bind local variables, they permit use of the ",(0,s.jsx)(r,{term:"return",children:(0,s.jsx)("b",{children:"return"})})," statement, and they permit use of the ",(0,s.jsx)(r,{term:"go",children:(0,s.jsx)("b",{children:"go"})})," statement. A typical ",(0,s.jsx)(n.strong,{children:"prog"})," looks like this:"]}),"\n",(0,s.jsx)(n.p,{children:"(prog (var1 var2 (var3 init-form-3) var4 (var5 init-form-5))"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(i,{term:"declaration",children:(0,s.jsx)("i",{children:"{declaration}"})}),"*"]}),"\n",(0,s.jsx)(n.p,{children:"Data and Control"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"prog, prog"}),"*\u21e4*"]}),"\n",(0,s.jsx)(n.p,{children:"statement1"}),"\n",(0,s.jsx)(n.p,{children:"tag1"}),"\n",(0,s.jsx)(n.p,{children:"statement2"}),"\n",(0,s.jsx)(n.p,{children:"statement3"}),"\n",(0,s.jsx)(n.p,{children:"statement4"}),"\n",(0,s.jsx)(n.p,{children:"tag2"}),"\n",(0,s.jsx)(n.p,{children:"statement5"}),"\n",(0,s.jsx)(n.p,{children:"..."}),"\n",(0,s.jsx)(n.p,{children:")"}),"\n",(0,s.jsxs)(n.p,{children:["For ",(0,s.jsx)(n.strong,{children:"prog"}),", ",(0,s.jsx)(n.em,{children:"init-forms"})," are evaluated first, in the order in which they are supplied. The ",(0,s.jsx)(n.em,{children:"vars"})," are then bound to the corresponding values in parallel. If no ",(0,s.jsx)(n.em,{children:"init-form"})," is supplied for a given ",(0,s.jsx)(n.em,{children:"var"}),", that ",(0,s.jsx)(n.em,{children:"var"})," is bound to ",(0,s.jsx)(r,{term:"nil",children:(0,s.jsx)("b",{children:"nil"})}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["The body of ",(0,s.jsx)(n.strong,{children:"prog"})," is executed as if it were a ",(0,s.jsx)(r,{term:"tagbody",children:(0,s.jsx)("b",{children:"tagbody"})})," ",(0,s.jsx)(i,{term:"form",children:(0,s.jsx)("i",{children:"form"})}),"; the ",(0,s.jsx)(r,{term:"go",children:(0,s.jsx)("b",{children:"go"})})," statement can be used to transfer control to a ",(0,s.jsx)(i,{term:"tag",children:(0,s.jsx)("i",{children:"tag"})}),". ",(0,s.jsx)(i,{term:"tag",children:(0,s.jsx)("i",{children:"Tags"})})," label ",(0,s.jsx)(n.em,{children:"statements"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"prog"})," implicitly establishes a ",(0,s.jsx)(r,{term:"block",children:(0,s.jsx)("b",{children:"block"})})," named ",(0,s.jsx)(r,{term:"nil",children:(0,s.jsx)("b",{children:"nil"})})," around the entire ",(0,s.jsx)(n.strong,{children:"prog"})," ",(0,s.jsx)(i,{term:"form",children:(0,s.jsx)("i",{children:"form"})}),", so that ",(0,s.jsx)(r,{term:"return",children:(0,s.jsx)("b",{children:"return"})})," can be used at any time to exit from the ",(0,s.jsx)(n.strong,{children:"prog"})," ",(0,s.jsx)(i,{term:"form",children:(0,s.jsx)("i",{children:"form"})}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["The di\u21b5erence between ",(0,s.jsx)(n.strong,{children:"prog*"})," and ",(0,s.jsx)(n.strong,{children:"prog"})," is that in ",(0,s.jsx)(n.strong,{children:"prog*"})," the ",(0,s.jsx)(i,{term:"binding",children:(0,s.jsx)("i",{children:"binding"})})," and initialization of the ",(0,s.jsx)(n.em,{children:"vars"})," is done ",(0,s.jsx)(i,{term:"sequentially",children:(0,s.jsx)("i",{children:"sequentially"})}),", so that the ",(0,s.jsx)(n.em,{children:"init-form"})," for each one can use the values of previous ones."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lisp",children:'(prog\\* ((y z) (x (car y))) \n\t(return x)) \nreturns the *car* of the value of z. \n(setq a 1) *!* 1 \n(prog ((a 2) (b a)) (return (if (= a b) \u2019= \u2019/=))) *!* /= \n(prog\\* ((a 2) (b a)) (return (if (= a b) \u2019= \u2019/=))) *!* = \n(prog () \u2019no-return-value) *!* NIL \n(defun king-of-confusion (w) \n  "Take a cons of two lists and make a list of conses. \nThink of this function as being like a zipper." \n  (prog (x y z) ;Initialize x, y, z to NIL \n     (setq y (car w) z (cdr w)) \n   loop \n     (cond ((null y) (return x)) \n\t   ((null z) (go err))) \n   rejoin \n     (setq x (cons (cons (car y) (car z)) x)) \n     (setq y (cdr y) z (cdr z)) \n     (go loop) \n   err \n     \n     \n     (cerror "Will self-pair extraneous items" \n\t     "Mismatch - gleep! ~S" y) \n     (setq z y) \n     (go rejoin))) *!* KING-OF-CONFUSION \nThis can be accomplished more perspicuously as follows: \n(defun prince-of-clarity (w) \n  "Take a cons of two lists and make a list of conses. \nThink of this function as being like a zipper." \n  (do ((y (car w) (cdr y)) \n       (z (cdr w) (cdr z)) \n       (x \u2019() (cons (cons (car y) (car z)) x))) \n      ((null y) x) \n    (when (null z) \n      (cerror "Will self-pair extraneous items" \n\t      "Mismatch - gleep! ~S" y) \n      (setq z y)))) *!* PRINCE-OF-CLARITY \n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"See Also:"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(r,{term:"block",children:(0,s.jsx)("b",{children:"block"})}),", ",(0,s.jsx)(r,{term:"let",children:(0,s.jsx)("b",{children:"let"})}),", ",(0,s.jsx)(r,{term:"tagbody",children:(0,s.jsx)("b",{children:"tagbody"})}),", ",(0,s.jsx)(r,{term:"go",children:(0,s.jsx)("b",{children:"go"})}),", ",(0,s.jsx)(r,{term:"return",children:(0,s.jsx)("b",{children:"return"})}),", Section 3.1 (Evaluation)"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Notes:"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"prog"})," can be explained in terms of ",(0,s.jsx)(r,{term:"block",children:(0,s.jsx)("b",{children:"block"})}),", ",(0,s.jsx)(r,{term:"let",children:(0,s.jsx)("b",{children:"let"})}),", and ",(0,s.jsx)(r,{term:"tagbody",children:(0,s.jsx)("b",{children:"tagbody"})})," as follows:"]}),"\n",(0,s.jsxs)(n.p,{children:["(prog ",(0,s.jsx)(n.em,{children:"variable-list declaration"})," . ",(0,s.jsx)(n.em,{children:"body"}),")"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"\u2318"})," (block nil (let ",(0,s.jsx)(n.em,{children:"variable-list declaration"})," (tagbody . ",(0,s.jsx)(n.em,{children:"body"}),")))"]})]})}function c(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}function d(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}const a={title:"nth-value"},o="nth-value",h={},x=[{value:"Expanded Reference: nth-value",id:"expanded-reference-nth-value",level:2}];function j(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"nth-value",children:"nth-value"})}),"\n","\n",(0,s.jsx)(c,{}),"\n",(0,s.jsx)(n.h2,{id:"expanded-reference-nth-value",children:"Expanded Reference: nth-value"}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"TODO: Please contribute to this page by adding explanations and examples"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lisp",children:"(nth-value )\n"})})]})}function m(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(j,{...e})}):j(e)}}}]);