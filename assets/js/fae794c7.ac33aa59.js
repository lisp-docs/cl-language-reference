"use strict";(self.webpackChunkcl_language_reference=self.webpackChunkcl_language_reference||[]).push([[33417],{90628:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>g,contentTitle:()=>j,default:()=>v,frontMatter:()=>x,metadata:()=>u,toc:()=>y});var t=s(85893),i=s(11151);function r(e){const n={em:"em",p:"p",strong:"strong",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["This section describes the Common Lisp interface to file systems. The model used by this interface assumes that ",(0,t.jsx)(n.em,{children:"files"})," are named by ",(0,t.jsx)(n.em,{children:"filenames"}),", that a ",(0,t.jsx)(n.em,{children:"filename"})," can be represented by a ",(0,t.jsx)(n.em,{children:"pathname object"}),", and that given a ",(0,t.jsx)(n.em,{children:"pathname"})," a ",(0,t.jsx)(n.em,{children:"stream"})," can be constructed that connects to a ",(0,t.jsx)(n.em,{children:"file"})," whose ",(0,t.jsx)(n.em,{children:"filename"})," it represents."]}),"\n",(0,t.jsxs)(n.p,{children:["For information about opening and closing ",(0,t.jsx)(n.em,{children:"files"}),", and manipulating their contents, see Chapter 21 (Streams)."]}),"\n",(0,t.jsxs)(n.p,{children:["Figure 20\u20131 lists some ",(0,t.jsx)(n.em,{children:"operators"})," that are applicable to ",(0,t.jsx)(n.em,{children:"files"})," and directories."]}),"\n",(0,t.jsxs)(n.p,{children:["|",(0,t.jsxs)("p",{children:[(0,t.jsx)(n.strong,{children:"compile-file file-length open"})," "]}),(0,t.jsxs)("p",{children:[(0,t.jsx)(n.strong,{children:"delete-file file-position probe-file"})," "]}),(0,t.jsxs)("p",{children:[(0,t.jsx)(n.strong,{children:"directory file-write-date rename-file"})," "]}),(0,t.jsx)("p",{children:(0,t.jsx)(n.strong,{children:"file-author load with-open-file"})}),"|"]}),"\n",(0,t.jsx)(n.p,{children:"| :- |"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Figure 20\u20131. File and Directory Operations"})})]})}function a(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(r,{...e})}):r(e)}function l(e){const n={em:"em",p:"p",strong:"strong",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["A ",(0,t.jsx)(n.em,{children:"stream associated with a file"})," is either a ",(0,t.jsx)(n.em,{children:"file stream"})," or a ",(0,t.jsx)(n.em,{children:"synonym stream"})," whose target is a ",(0,t.jsx)(n.em,{children:"stream associated with a file"}),". Such streams can be used as ",(0,t.jsx)(n.em,{children:"pathname designators"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Normally, when a ",(0,t.jsx)(n.em,{children:"stream associated with a file"})," is used as a ",(0,t.jsx)(n.em,{children:"pathname designator"})," , it denotes the ",(0,t.jsx)(n.em,{children:"pathname"})," used to open the ",(0,t.jsx)(n.em,{children:"file"}),"; this may be, but is not required to be, the actual name of the ",(0,t.jsx)(n.em,{children:"file"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Some functions, such as ",(0,t.jsx)(n.strong,{children:"truename"})," and ",(0,t.jsx)(n.strong,{children:"delete-file"}),", coerce ",(0,t.jsx)(n.em,{children:"streams"})," to ",(0,t.jsx)(n.em,{children:"pathnames"})," in a different way that involves referring to the actual ",(0,t.jsx)(n.em,{children:"file"})," that is open, which might or might not be the file whose name was opened originally. Such special situations are always notated specifically and are not the default."]})]})}function c(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}function o(e){const n={em:"em",p:"p",strong:"strong",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["Many ",(0,t.jsx)(n.em,{children:"functions"})," that perform ",(0,t.jsx)(n.em,{children:"file"})," operations accept either ",(0,t.jsx)(n.em,{children:"open"})," or ",(0,t.jsx)(n.em,{children:"closed streams"})," as ",(0,t.jsx)(n.em,{children:"arguments"}),"; see Section 21.1.3 (Stream Arguments to Standardized Functions)."]}),"\n",(0,t.jsxs)(n.p,{children:["Of these, the ",(0,t.jsx)(n.em,{children:"functions"})," in Figure 20\u20132 treat ",(0,t.jsx)(n.em,{children:"open"})," and ",(0,t.jsx)(n.em,{children:"closed streams"})," differently."]}),"\n",(0,t.jsxs)(n.p,{children:["|",(0,t.jsxs)("p",{children:[(0,t.jsx)(n.strong,{children:"delete-file file-author probe-file"})," "]}),(0,t.jsx)("p",{children:(0,t.jsx)(n.strong,{children:"directory file-write-date truename"})}),"|"]}),"\n",(0,t.jsx)(n.p,{children:"| :- |"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Figure 20\u20132. File Functions that Treat Open and Closed Streams Differently"})}),"\n",(0,t.jsxs)(n.p,{children:["Since treatment of ",(0,t.jsx)(n.em,{children:"open streams"})," by the ",(0,t.jsx)(n.em,{children:"file system"})," may vary considerably between ",(0,t.jsx)(n.em,{children:"implementations"}),", however, a ",(0,t.jsx)(n.em,{children:"closed stream"})," might be the most reliable kind of ",(0,t.jsx)(n.em,{children:"argument"})," for some of these functions\u2014in particular, those in Figure 20\u20133. For example, in some ",(0,t.jsx)(n.em,{children:"file systems"}),", ",(0,t.jsx)(n.em,{children:"open files"})," are written under temporary names and not renamed until ",(0,t.jsx)(n.em,{children:"closed"})," and/or are held invisible until ",(0,t.jsx)(n.em,{children:"closed"}),". In general, any code that is intended to be portable should use such ",(0,t.jsx)(n.em,{children:"functions"})," carefully."]}),"\n",(0,t.jsxs)(n.p,{children:["|",(0,t.jsx)(n.strong,{children:"directory probe-file truename"}),"|"]}),"\n",(0,t.jsx)(n.p,{children:"| :- |"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Figure 20\u20133. File Functions where Closed Streams Might Work Best"})})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}function m(e){const n={em:"em",p:"p",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["Many ",(0,t.jsx)(n.em,{children:"file systems"})," permit more than one ",(0,t.jsx)(n.em,{children:"filename"})," to designate a particular ",(0,t.jsx)(n.em,{children:"file"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Even where multiple names are possible, most ",(0,t.jsx)(n.em,{children:"file systems"})," have a convention for generating a canonical ",(0,t.jsx)(n.em,{children:"filename"})," in such situations. Such a canonical ",(0,t.jsx)(n.em,{children:"filename"})," (or the ",(0,t.jsx)(n.em,{children:"pathname"})," representing such a ",(0,t.jsx)(n.em,{children:"filename"}),") is called a ",(0,t.jsx)(n.em,{children:"truename"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.em,{children:"truename"})," of a ",(0,t.jsx)(n.em,{children:"file"})," may differ from other ",(0,t.jsx)(n.em,{children:"filenames"})," for the file because of symbolic links, version numbers, logical device translations in the ",(0,t.jsx)(n.em,{children:"file system"}),", ",(0,t.jsx)(n.em,{children:"logical pathname"})," translations within Common Lisp, or other artifacts of the ",(0,t.jsx)(n.em,{children:"file system"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.em,{children:"truename"})," for a ",(0,t.jsx)(n.em,{children:"file"})," is often, but not necessarily, unique for each ",(0,t.jsx)(n.em,{children:"file"}),". For instance, a Unix ",(0,t.jsx)(n.em,{children:"file"})," with multiple hard links could have several ",(0,t.jsx)(n.em,{children:"truenames"}),"."]})]})}function d(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(m,{...e})}):m(e)}function f(e){const n={em:"em",p:"p",strong:"strong",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["For example, a DEC TOPS-20 system with ",(0,t.jsx)(n.em,{children:"files"})," PS:<JOE>FOO.TXT.1 and PS:<JOE>FOO.TXT.2 might permit the second ",(0,t.jsx)(n.em,{children:"file"})," to be referred to as PS:<JOE>FOO.TXT.0, since the \u201c.0\u201d notation denotes \u201cnewest\u201d version of several ",(0,t.jsx)(n.em,{children:"files"}),". In the same ",(0,t.jsx)(n.em,{children:"file system"}),", a \u201clogical device\u201d \u201cJOE:\u201d might be taken to refer to PS:<JOE>\u201d and so the names JOE",":FOO",".TXT.2 or JOE",":FOO",".TXT.0 might refer to PS:<JOE>FOO.TXT.2. In all of these cases, the ",(0,t.jsx)(n.em,{children:"truename"})," of the file would probably be PS:<JOE>FOO.TXT.2."]}),"\n",(0,t.jsxs)(n.p,{children:["If a ",(0,t.jsx)(n.em,{children:"file"})," is a symbolic link to another ",(0,t.jsx)(n.em,{children:"file"})," (in a ",(0,t.jsx)(n.em,{children:"file system"})," permitting such a thing), it is conventional for the ",(0,t.jsx)(n.em,{children:"truename"})," to be the canonical name of the ",(0,t.jsx)(n.em,{children:"file"})," after any symbolic links have been followed; that is, it is the canonical name of the ",(0,t.jsx)(n.em,{children:"file"})," whose contents would become available if an ",(0,t.jsx)(n.em,{children:"input stream"})," to that ",(0,t.jsx)(n.em,{children:"file"})," were opened."]}),"\n",(0,t.jsxs)(n.p,{children:["In the case of a ",(0,t.jsx)(n.em,{children:"file"})," still being created (that is, of an ",(0,t.jsx)(n.em,{children:"output stream"})," open to such a ",(0,t.jsx)(n.em,{children:"file"}),"), the exact ",(0,t.jsx)(n.em,{children:"truename"})," of the file might not be known until the ",(0,t.jsx)(n.em,{children:"stream"})," is closed. In this case, the ",(0,t.jsx)(n.em,{children:"function"})," ",(0,t.jsx)(n.strong,{children:"truename"})," might return different values for such a ",(0,t.jsx)(n.em,{children:"stream"})," before and after it was closed. In fact, before it is closed, the name returned might not even be a valid name in the ",(0,t.jsx)(n.em,{children:"file system"}),"\u2014for example, while a file is being written, it might have version ",":newest"," and might only take on a specific numeric value later when the file is closed even in a ",(0,t.jsx)(n.em,{children:"file system"})," where all files have numeric versions."]})]})}function p(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(f,{...e})}):f(e)}const x={title:"20.1 File System Concepts"},j="20.1 File System Concepts",u={id:"chap-20/ca-b-file-system-concepts",title:"20.1 File System Concepts",description:"20.1.1 Coercion of Streams to Pathnames",source:"@site/docs/chap-20/ca-b-file-system-concepts.md",sourceDirName:"chap-20",slug:"/chap-20/ca-b-file-system-concepts",permalink:"/cl-language-reference/docs/chap-20/ca-b-file-system-concepts",draft:!1,unlisted:!1,editUrl:"https://github.com/lisp-docs/cl-language-reference/tree/develop/docs/chap-20/ca-b-file-system-concepts.md",tags:[],version:"current",frontMatter:{title:"20.1 File System Concepts"},sidebar:"tutorialSidebar",previous:{title:"20. Files",permalink:"/cl-language-reference/docs/category/20-files"},next:{title:"20.2 Files Dictionary",permalink:"/cl-language-reference/docs/category/202-files-dictionary"}},g={},y=[{value:"20.1.1 Coercion of Streams to Pathnames",id:"2011-coercion-of-streams-to-pathnames",level:2},{value:"20.1.2 File Operations on Open and Closed Streams",id:"2012-file-operations-on-open-and-closed-streams",level:2},{value:"20.1.3 Truenames",id:"2013-truenames",level:2},{value:"20.1.3.1 Examples of Truenames",id:"20131-examples-of-truenames",level:3}];function b(e){const n={h1:"h1",h2:"h2",h3:"h3",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"201-file-system-concepts",children:"20.1 File System Concepts"}),"\n","\n",(0,t.jsx)(a,{}),"\n",(0,t.jsx)(n.h2,{id:"2011-coercion-of-streams-to-pathnames",children:"20.1.1 Coercion of Streams to Pathnames"}),"\n","\n",(0,t.jsx)(c,{}),"\n",(0,t.jsx)(n.h2,{id:"2012-file-operations-on-open-and-closed-streams",children:"20.1.2 File Operations on Open and Closed Streams"}),"\n","\n",(0,t.jsx)(h,{}),"\n",(0,t.jsx)(n.h2,{id:"2013-truenames",children:"20.1.3 Truenames"}),"\n","\n",(0,t.jsx)(d,{}),"\n",(0,t.jsx)(n.h3,{id:"20131-examples-of-truenames",children:"20.1.3.1 Examples of Truenames"}),"\n","\n","\n",(0,t.jsx)(p,{})]})}function v(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(b,{...e})}):b(e)}},11151:(e,n,s)=>{s.d(n,{Z:()=>l,a:()=>a});var t=s(67294);const i={},r=t.createContext(i);function a(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);